<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="format-detection" content="telephone=no">
    <title>ç›´æ’­ç›‘æ§å®¤ - LiveRadar v3.1.1</title>
    <!-- çº¢è‰²åœ†ç‚¹ Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='50' fill='%23ef4444'/%3E%3C/svg%3E">
    <!-- å¼•å…¥ CryptoJS ç”¨äºç­¾åè®¡ç®— -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --douyu: #ff5d23; --bilibili: #fb7299; --twitch: #9146ff;
            --live: #10b981; --loop: #6366f1; --off: #6b7280; --weak: #eab308;
            --card-bg: #121212; --bg-dark: #050505; --gold: #ffd700;
        }

        body {
            font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Microsoft YaHei", "å¾®è½¯é›…é»‘", sans-serif;
            background-color: var(--bg-dark); color: #e5e7eb; overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            position: relative; /* ç¡®ä¿ body æ˜¯å®šä½ä¸Šä¸‹æ–‡ */
        }

        /* --- â„ï¸ ä¸‹é›ªç‰¹æ•ˆæ ¸å¿ƒæ ·å¼ â„ï¸ --- */
        #snow-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1; /* å…³é”®ï¼šå±‚çº§ä¸º 1ï¼Œåœ¨èƒŒæ™¯ä¹‹ä¸Š */
            pointer-events: none; /* å…³é”®ï¼šè®©é¼ æ ‡ç©¿é€é›ªèŠ±ï¼Œä¸å½±å“ç‚¹å‡» */
            opacity: 0.6; /* æ•´ä½“é€æ˜åº¦ï¼Œè®©é›ªèŠ±ä¸é‚£ä¹ˆæŠ¢çœ¼ */
        }

        /* --- åˆ†åŒºå¸ƒå±€ --- */
        .zone-container { width: 100%; max-width: 2200px; margin: 0 auto 4rem; display: none; transition: opacity 0.3s ease; }
        .zone-container.active { display: block; animation: fadeIn 0.5s ease; }
        
        .zone-header { display: flex; align-items: center; gap: 14px; margin-bottom: 1.5rem; padding-left: 0.8rem; border-left: 5px solid transparent; }
        .zone-title { font-size: 16px; font-weight: 900; letter-spacing: 0.05em; color: #a3a3a3; }
        .zone-sub { font-size: 11px; opacity: 0.5; font-weight: 400; letter-spacing: 0.1em; margin-left: 8px; }

        /* --- çŠ¶æ€æ»šåŠ¨é€šçŸ¥ --- */
        .status-ticker {
            flex: 1;
            margin-left: 2rem;
            height: 28px;
            overflow: hidden;
            position: relative;
            display: none; /* é»˜è®¤éšè—ï¼Œæœ‰æ¶ˆæ¯æ—¶æ˜¾ç¤º */
            align-items: center;
        }
        .status-ticker-item {
            position: absolute;
            width: 100%;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            font-weight: 600;
            opacity: 0;
            transform: translateY(10px);
            transition: opacity 0.3s ease, transform 0.3s ease;
            white-space: nowrap;
        }
        .status-ticker-item.active {
            opacity: 1;
            transform: translateY(0);
        }
        .status-ticker-item.exit {
            opacity: 0;
            transform: translateY(-10px);
        }
        .ticker-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            flex-shrink: 0;
        }
        .ticker-icon.online {
            background: rgba(16, 185, 129, 0.2);
            color: #10b981;
        }
        .ticker-icon.offline {
            background: rgba(107, 114, 128, 0.2);
            color: #6b7280;
        }
        .ticker-text {
            color: #9ca3af;
        }
        .ticker-name {
            color: #f3f4f6;
            font-weight: 700;
        } 
        
        /* ã€ç§»åŠ¨ç«¯ä¼˜åŒ–ã€‘å“åº”å¼Gridå¸ƒå±€ */
        .monitor-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(min(100%, 340px), 1fr));
            gap: 1rem;
            width: 100%;
            padding: 0 0.5rem;
        }

        /* å¹³æ¿å’Œæ¡Œé¢ç«¯ */
        @media (min-width: 768px) {
            .monitor-grid {
                grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
                gap: 1.5rem;
                padding: 0;
            }
        }

        #zone-live .zone-header { border-left-color: var(--live); }
        #zone-live .zone-title { color: var(--live); text-shadow: 0 0 12px rgba(16, 185, 129, 0.3); }
        #zone-offline .zone-header { border-left-color: #333; }
        #zone-loop { background: rgba(99, 102, 241, 0.03); border: 2px dashed rgba(99, 102, 241, 0.2); border-radius: 24px; padding: 2.5rem; }
        #zone-loop .zone-header { border-left-color: var(--loop); padding-left: 0; margin-left: 0.5rem; }
        #zone-loop .zone-title { color: var(--loop); }
        #zone-loop .room-card { opacity: 0.85; }
        #zone-loop .room-card:hover { opacity: 1; }

        /* --- æ ¸å¿ƒç‰¹æ•ˆï¼šç»†é‡‘è‰²å‘¼å¸ (ä»…åœ¨çº¿æœ€çˆ±) --- */
        @keyframes goldenBreath {
            0% { box-shadow: 0 0 5px rgba(255, 215, 0, 0.2); }
            50% { box-shadow: 0 0 15px rgba(255, 215, 0, 0.5); }
            100% { box-shadow: 0 0 5px rgba(255, 215, 0, 0.2); }
        }

        .room-card { 
            background-color: var(--card-bg); border-radius: 16px; overflow: hidden; 
            border: 1px solid #262626; display: flex; flex-direction: column; position: relative; 
            box-shadow: 0 5px 8px -1px rgba(0,0,0,0.3); transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease; 
            cursor: pointer; 
        }
        
        .room-card:hover { transform: translateY(-8px) scale(1.02); z-index: 10; box-shadow: 0 25px 35px -5px rgba(0,0,0,0.6); border-color: #404040; }
        
        /* --- æœ€çˆ±å¡ç‰‡æ ·å¼å¢å¼º --- */
        .room-card.is-favorite {
            border-color: rgba(255, 215, 0, 0.6); /* å¸¸é©»é‡‘è¾¹ */
            border-width: 1px;
        }
        /* æœ€çˆ±ä¸”åœ¨çº¿ï¼šå‘¼å¸å…‰ç¯ */
        .room-card.is-favorite.is-live-card {
            animation: goldenBreath 3s infinite ease-in-out;
            border-color: rgba(255, 215, 0, 0.9);
            border-width: 2px;
            z-index: 5;
        }
        /* æœ€çˆ±ä¸”ç¦»çº¿/è½®æ’­ï¼šé™æ€é‡‘è¾¹ï¼ˆæ›´æ˜æ˜¾ï¼‰ */
        .room-card.is-favorite.is-offline-card,
        .room-card.is-favorite.is-loop-card {
            border-color: rgba(255, 215, 0, 0.7);
            border-width: 2px;
        }

        .card-thumbnail-box { position: relative; width: 100%; padding-top: 56.25%; background-color: #0a0a0a; overflow: hidden; }
        .thumb-loader { position: absolute; inset: 0; display: flex; align-items: center; justify-content: center; background-color: #111; z-index: 5; transition: opacity 0.3s ease; }
        .thumb-loader.hidden { opacity: 0; pointer-events: none; }
        
        /* --- å›¾ç‰‡æ ·å¼ --- */
        .card-thumbnail { 
            position: absolute; inset: 0; width: 100%; height: 100%; 
            object-fit: cover; object-position: center; 
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 10; opacity: 0;
        }
        .card-thumbnail.loaded { opacity: 1; }
        
        /* æ ¸å¿ƒä¿®æ”¹ï¼šåªæœ‰ç¦»çº¿æ‰æ˜¯é»‘ç™½ï¼Œè½®æ’­æ¢å¤å½©è‰² */
        .is-offline-card .card-thumbnail.loaded { 
            filter: grayscale(100%) brightness(0.6); 
        }
        /* æ‚¬åœçŠ¶æ€ï¼šæ¢å¤å½©è‰² */
        .room-card:hover .card-thumbnail.loaded { 
            filter: grayscale(0%) brightness(1.1); 
            transform: scale(1.08); 
        }

        .status-chip { position: absolute; top: 12px; left: 12px; padding: 5px 12px; border-radius: 6px; font-size: 12px; font-weight: 900; backdrop-filter: blur(8px); display: flex; align-items: center; gap: 6px; z-index: 20; }
        .chip-live { background: rgba(16, 185, 129, 0.95); color: white; } 
        .chip-loop { background: rgba(99, 102, 241, 0.95); color: white; }
        .chip-off { background: rgba(0, 0, 0, 0.7); color: #9ca3af; border: 1px solid rgba(255,255,255,0.1); } 
        .chip-weak { background: var(--weak); color: white; }

        .card-info { padding: 18px; display: flex; gap: 14px; flex: 1; background: linear-gradient(to bottom, #161616, #121212); border-top: 1px solid rgba(255,255,255,0.05); position: relative; }
        .room-card:hover .card-info { background: var(--brand-color); }
        
        .u-avatar { width: 56px; height: 56px; border-radius: 50%; background-color: #262626; object-fit: cover; border: 2px solid #333; flex-shrink: 0; }
        .is-live-card .u-avatar { border-color: var(--live); } .is-loop-card .u-avatar { border-color: var(--loop); } .is-offline-card .u-avatar { border-color: #333; filter: grayscale(1); }
        .room-card:hover .u-avatar { border-color: white !important; }
        /* æœ€çˆ±ä¸»æ’­çš„å¤´åƒå§‹ç»ˆæ˜¾ç¤ºé‡‘è‰²è¾¹æ¡†ï¼ˆåœ¨çº¿/ç¦»çº¿/è½®æ’­ï¼‰ */
        .room-card.is-favorite.is-live-card .u-avatar { border-color: var(--gold); }
        .room-card.is-favorite.is-offline-card .u-avatar { border-color: var(--gold); filter: grayscale(0); }
        .room-card.is-favorite.is-loop-card .u-avatar { border-color: var(--gold); }
        
        .meta-text { flex: 1; min-width: 0; display: flex; flex-direction: column; justify-content: space-between; gap: 4px; padding-right: 2px; }
        .room-title { font-size: 16px; font-weight: 700; color: #f3f4f6; line-height: 1.4; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; margin-bottom: 2px; }
        .room-owner { font-size: 13px; color: #9ca3af; font-weight: 500; margin-top: auto; } /* åå­—é¡¶åˆ°åº•éƒ¨ */
        
        /* --- å¸ƒå±€é‡æ„ï¼šåº•éƒ¨å·¥å…·æ  --- */
        .card-bottom-bar {
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            margin-top: 10px;
            height: 32px; /* å›ºå®šé«˜åº¦é˜²æ­¢è·³åŠ¨ */
        }

        .viewer-pill { background-color: #262626; color: #9ca3af; padding: 4px 10px; border-radius: 6px; font-size: 12px; font-weight: 700; display: flex; align-items: center; gap: 5px; border: 1px solid rgba(255,255,255,0.05); }
        .viewer-pill.hot { color: #fb923c; background-color: rgba(251, 146, 60, 0.1); border-color: rgba(251, 146, 60, 0.2); }
        
        /* ç›´æ’­æ—¶é•¿æ ·å¼ */
        .live-duration {
            font-size: 12px;
            font-weight: 600;
            color: #6b7280;
            padding: 4px 8px;
            background: rgba(255,255,255,0.05);
            border-radius: 6px;
            font-family: ui-monospace, monospace;
        }
        .is-live-card .live-duration {
            color: #10b981;
            background: rgba(16, 185, 129, 0.1);
        }
        .live-duration.hidden { display: none; }
        
        /* æ“ä½œæŒ‰é’®å®¹å™¨ (ç°åœ¨æ˜¯é™æ€å¸ƒå±€ï¼Œé å³å¯¹é½) */
        .card-actions {
            display: flex; gap: 8px; z-index: 30;
            opacity: 0; transition: opacity 0.2s ease;
        }
        .room-card:hover .card-actions { opacity: 1; }

        .action-btn {
            width: 32px; height: 32px;
            display: flex; align-items: center; justify-content: center;
            border-radius: 50%;
            background: rgba(0,0,0,0.6);
            border: 1px solid rgba(255,255,255,0.1);
            color: #9ca3af;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .action-btn:hover { background: #fff; transform: scale(1.1); }
        .action-btn svg { width: 18px; height: 18px; fill: none; stroke: currentColor; stroke-width: 2; }
        
        .fav-btn:hover { color: var(--gold); border-color: var(--gold); }
        .fav-btn.active { background: rgba(255, 215, 0, 0.15); color: var(--gold); border-color: var(--gold); }
        .fav-btn.active svg { fill: currentColor; stroke: none; }
        .fav-btn svg { stroke-linejoin: round; } 
        .delete-btn:hover { color: #ef4444; border-color: #ef4444; }

        .notify-btn { background: rgba(16, 185, 129, 0.1); border: 1px solid rgba(16, 185, 129, 0.2); color: #10b981; padding: 8px 16px; border-radius: 12px; font-size: 13px; font-weight: 800; display: flex; align-items: center; gap: 6px; cursor: pointer; transition: all 0.2s; }
        .notify-btn.off { background: rgba(255,255,255,0.05); border-color: rgba(255,255,255,0.1); color: #6b7280; }
        
        /* è‡ªåŠ¨åˆ·æ–°æŒ‰é’® */
        .auto-refresh-btn { background: rgba(99, 102, 241, 0.1); border: 1px solid rgba(99, 102, 241, 0.2); color: #6366f1; padding: 8px 16px; border-radius: 12px; font-size: 13px; font-weight: 800; display: flex; align-items: center; gap: 6px; cursor: pointer; transition: all 0.2s; }
        .auto-refresh-btn.off { background: rgba(255,255,255,0.05); border-color: rgba(255,255,255,0.1); color: #6b7280; }
        .auto-refresh-btn:hover { background: rgba(99, 102, 241, 0.2); }
        .auto-refresh-btn.off:hover { background: rgba(255,255,255,0.1); }

        /* é˜²ä¼‘çœ æŒ‰é’® */
        .keepalive-btn { background: rgba(234, 179, 8, 0.1); border: 1px solid rgba(234, 179, 8, 0.2); color: #eab308; padding: 8px 16px; border-radius: 12px; font-size: 13px; font-weight: 800; display: flex; align-items: center; gap: 6px; cursor: pointer; transition: all 0.2s; }
        .keepalive-btn.off { background: rgba(255,255,255,0.05); border-color: rgba(255,255,255,0.1); color: #6b7280; }
        .keepalive-btn:hover { background: rgba(234, 179, 8, 0.2); }
        .keepalive-btn.off:hover { background: rgba(255,255,255,0.1); }

        /* åœ°åŒºæ¨¡å¼æŒ‰é’® */
        .region-btn { display: flex; align-items: center; gap: 6px; padding: 8px 16px; font-size: 13px; font-weight: 800; border-radius: 12px; transition: all 0.2s; cursor: pointer; background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%); color: white; border: none; }
        .region-btn:hover { transform: translateY(-1px); box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4); }
        .region-btn.mainland { background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); }
        .region-btn.mainland:hover { box-shadow: 0 4px 12px rgba(239, 68, 68, 0.4); }
        .region-btn.overseas { background: linear-gradient(135deg, #10b981 0%, #059669 100%); }
        .region-btn.overseas:hover { box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4); }

        /* å¯¼å…¥å¯¼å‡ºæŒ‰é’® */
        .import-export-btn {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 8px 12px;
            font-size: 13px;
            font-weight: 600;
            border-radius: 10px;
            transition: all 0.2s;
            cursor: pointer;
            border: 1px solid rgba(147, 197, 253, 0.3);
            color: #93c5fd;
            background: rgba(59, 130, 246, 0.1);
        }
        .import-export-btn:hover {
            background: rgba(59, 130, 246, 0.2);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }
        .import-export-btn svg {
            width: 16px;
            height: 16px;
        }

        /* ä¸‹é›ªå¼€å…³æŒ‰é’® */
        .snow-toggle-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            padding: 6px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background: rgba(147, 197, 253, 0.1);
            border: 1px solid rgba(147, 197, 253, 0.2);
            color: #93c5fd;
        }
        .snow-toggle-btn:hover {
            background: rgba(147, 197, 253, 0.2);
            transform: scale(1.1) rotate(15deg);
            box-shadow: 0 0 20px rgba(147, 197, 253, 0.3);
        }
        .snow-toggle-btn.on {
            background: linear-gradient(135deg, #60a5fa 0%, #93c5fd 100%);
            color: white;
            box-shadow: 0 0 15px rgba(96, 165, 250, 0.4);
        }
        .snow-toggle-btn.on:hover {
            box-shadow: 0 0 25px rgba(96, 165, 250, 0.6);
        }
        .snow-toggle-btn.off {
            background: rgba(255,255,255,0.05);
            border-color: rgba(255,255,255,0.1);
            color: #6b7280;
        }
        .snow-toggle-btn.off:hover {
            background: rgba(255,255,255,0.1);
            transform: scale(1.05);
            box-shadow: none;
        }

        @keyframes popIn { 0% { opacity: 0; transform: scale(0.9); } 100% { opacity: 1; transform: scale(1); } }
        .animate-pop-in { animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }
        
        /* é€†æ—¶é’ˆæ—‹è½¬åŠ¨ç”» */
        @keyframes spin-reverse { to { transform: rotate(-360deg); } }
        .animate-spin-reverse { animation: spin-reverse 1s linear infinite; }
        
        .loader-ring { display: inline-block; width: 48px; height: 48px; border: 4px solid rgba(255,255,255,0.1); border-radius: 50%; border-top-color: var(--douyu); animation: spin 1s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }
        /* Dropdown */
        #selector-menu, #history-dropdown { transform-origin: top center; transition: all 0.2s cubic-bezier(0.16, 1, 0.3, 1); }
        .dropdown-enter { opacity: 0; transform: scale(0.95) translateY(-10px); pointer-events: none; }
        .dropdown-enter-active { opacity: 1; transform: scale(1) translateY(0); pointer-events: auto; }
        #history-dropdown { position: absolute; top: 100%; left: 0; right: 0; margin-top: 8px; background: #161616; border: 1px solid #333; border-radius: 12px; box-shadow: 0 15px 40px rgba(0,0,0,0.8); z-index: 90; overflow: hidden; }
        .history-item { padding: 8px 12px; cursor: pointer; display: flex; align-items: center; justify-content: space-between; color: #9ca3af; font-size: 12px; font-weight: 600; border-bottom: 1px solid rgba(255,255,255,0.03); }
        .history-item:hover { background-color: #262626; color: #fff; }
        .history-delete { color: #525252; padding: 4px; border-radius: 4px; opacity: 0.5; transition: all 0.2s; }
        .history-item:hover .history-delete { opacity: 1; }
        .history-delete:hover { color: #ef4444; background: rgba(239, 68, 68, 0.1); }
        #toast-container { position: fixed; bottom: 2.5rem; right: 2.5rem; z-index: 9999; }
        .toast { background: #1f1f1f; border: 1px solid #333; padding: 14px 24px; border-radius: 10px; color: #eee; font-size: 14px; font-weight: 600; margin-top: 12px; box-shadow: 0 10px 20px -5px rgba(0,0,0,0.5); animation: slideUp 0.3s ease; }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

        /* File Protocol Warning Banner */
        #file-protocol-warning {
            position: relative;
            z-index: 40;
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.12) 0%, rgba(245, 158, 11, 0.08) 100%);
            border: 1px solid rgba(251, 191, 36, 0.3);
            border-radius: 16px;
            padding: 20px 24px;
            margin-bottom: 24px;
            animation: slideDown 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        #file-protocol-warning.hidden { display: none; }
        @keyframes slideDown {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .warning-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }
        .warning-icon {
            font-size: 24px;
            line-height: 1;
        }
        .warning-title {
            font-size: 16px;
            font-weight: 700;
            color: #fbbf24;
            flex: 1;
        }
        .warning-close {
            color: #9ca3af;
            background: transparent;
            border: none;
            font-size: 20px;
            cursor: pointer;
            padding: 4px 8px;
            border-radius: 6px;
            transition: all 0.2s;
        }
        .warning-close:hover {
            color: #fff;
            background: rgba(255,255,255,0.1);
        }
        .warning-message {
            color: #d1d5db;
            font-size: 14px;
            line-height: 1.6;
            margin-bottom: 16px;
        }
        .warning-solutions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 12px;
            margin-bottom: 16px;
        }
        .solution-card {
            background: rgba(0,0,0,0.3);
            border: 1px solid rgba(251, 191, 36, 0.2);
            border-radius: 12px;
            padding: 16px;
        }
        .solution-title {
            color: #fbbf24;
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 8px;
        }
        .solution-code {
            background: #0a0a0a;
            border: 1px solid #1f1f1f;
            border-radius: 8px;
            padding: 10px 12px;
            font-family: ui-monospace, 'Cascadia Code', 'Consolas', monospace;
            font-size: 12px;
            color: #10b981;
            margin-bottom: 8px;
            overflow-x: auto;
        }
        .solution-hint {
            color: #9ca3af;
            font-size: 12px;
            line-height: 1.5;
        }
        .warning-actions {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }
        .warning-btn {
            padding: 10px 20px;
            border-radius: 10px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            border: none;
        }
        .warning-btn-primary {
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            color: #0a0a0a;
        }
        .warning-btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(251, 191, 36, 0.4);
        }
        .warning-btn-secondary {
            background: rgba(255,255,255,0.05);
            color: #d1d5db;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .warning-btn-secondary:hover {
            background: rgba(255,255,255,0.1);
            color: #fff;
        }

        /* æ–°å¢ï¼šåˆ·æ–°çŠ¶æ€æŒ‡ç¤ºå™¨ */
        .refresh-stats {
            font-size: 11px;
            color: #6b7280;
            padding: 4px 12px;
            background: rgba(255,255,255,0.03);
            border-radius: 8px;
            font-family: ui-monospace, monospace;
        }
        .refresh-stats.active { color: #10b981; }

        /* ========================================
           ã€ç§»åŠ¨ç«¯ä¼˜åŒ–ã€‘Mobile-First Enhancements
           ======================================== */

        /* iOSå®‰å…¨åŒºåŸŸé€‚é… */
        body {
            padding-top: env(safe-area-inset-top);
            padding-bottom: env(safe-area-inset-bottom);
            padding-left: env(safe-area-inset-left);
            padding-right: env(safe-area-inset-right);
        }

        /* ç§»åŠ¨ç«¯ç¦ç”¨é›ªèŠ±ç‰¹æ•ˆï¼ˆæ€§èƒ½ä¼˜åŒ–ï¼‰ */
        @media (max-width: 768px) {
            #snow-canvas {
                display: none !important;
            }

            /* ä¼˜åŒ–ç§»åŠ¨ç«¯å­—ä½“å¤§å° */
            body { padding: 1rem !important; }
            .zone-title { font-size: 14px; }
            .zone-sub { font-size: 10px; }
            .room-title { font-size: 14px; }
            .room-owner { font-size: 12px; }

            /* ä¼˜åŒ–è§¦æ‘¸ç›®æ ‡å¤§å°(æœ€å°44x44px) */
            .action-btn { width: 44px; height: 44px; }
            button, .notify-btn, .auto-refresh-btn {
                min-height: 44px;
                padding: 10px 14px;
            }

            /* ä¼˜åŒ–å¡ç‰‡é—´è· */
            .zone-container { margin-bottom: 2rem; }
            .card-info { padding: 12px; }

            /* Toastç§»åŠ¨ç«¯ä½ç½® */
            #toast-container {
                bottom: 1rem;
                right: 1rem;
                left: 1rem;
            }
            .toast {
                width: 100%;
                text-align: center;
            }

            /* ç§»é™¤hoveræ•ˆæœï¼Œä¼˜åŒ–è§¦æ‘¸ä½“éªŒ */
            .room-card:hover {
                transform: none;
                box-shadow: 0 5px 8px -1px rgba(0,0,0,0.3);
            }
            .room-card:active {
                transform: scale(0.98);
            }
        }

        /* iPhone SEç­‰å°å±è®¾å¤‡ */
        @media (max-width: 375px) {
            .monitor-grid {
                grid-template-columns: 1fr;
                gap: 0.75rem;
            }
            .zone-header { gap: 8px; }
        }

        /* ========================================
           ã€ç§»åŠ¨ç«¯ã€‘å¤´éƒ¨å·¥å…·æ ä¼˜åŒ–
           ======================================== */
        @media (max-width: 768px) {
            header {
                padding: 1rem !important;
                gap: 1rem !important;
                margin-bottom: 1.5rem !important;
                flex-direction: column !important;
            }

            header > div:first-child {
                border-right: none !important;
                padding: 0 !important;
                width: 100%;
                justify-content: center;
            }

            header h1 {
                font-size: 1.25rem !important; /* 20px */
                text-align: center;
            }

            header h1 span {
                display: block;
                font-size: 0.75rem !important; /* 12px */
                margin-top: 0.25rem;
                margin-left: 0 !important;
            }

            /* è¾“å…¥åŒºåŸŸ */
            header > div:nth-child(2) {
                flex-direction: column;
                gap: 0.5rem !important;
                padding: 0.75rem !important;
            }

            #custom-selector-container {
                width: 100% !important;
            }

            #room-id-input {
                width: 100%;
                padding: 0.75rem !important;
            }

            header button {
                width: 100%;
                justify-content: center;
            }

            /* å·¥å…·æŒ‰é’®åŒº */
            header > div:last-child {
                width: 100%;
                padding: 0 !important;
                justify-content: space-between;
                flex-wrap: wrap;
            }

            .auto-refresh-btn,
            .notify-btn,
            .keepalive-btn {
                flex: 1;
                min-width: 120px;
            }

            #global-refresh-btn {
                flex: 0 0 auto;
            }
        }

        /* ========================================
           ã€ç§»åŠ¨ç«¯ã€‘å¡ç‰‡å’Œäº¤äº’ä¼˜åŒ–
           ======================================== */
        @media (max-width: 768px) {
            /* ä¼˜åŒ–å¡ç‰‡å†…è¾¹è· */
            .u-avatar {
                width: 48px !important;
                height: 48px !important;
            }

            .viewer-pill {
                font-size: 11px !important;
                padding: 3px 8px !important;
            }

            /* ä¼˜åŒ–çŠ¶æ€èŠ¯ç‰‡ */
            .status-chip {
                font-size: 11px !important;
                padding: 4px 10px !important;
            }

            /* ä¼˜åŒ–å¡ç‰‡æŒ‰é’® */
            .card-actions {
                opacity: 1 !important; /* ç§»åŠ¨ç«¯å§‹ç»ˆæ˜¾ç¤º */
            }

            /* ä¼˜åŒ–ä¸‹æ‹‰èœå• */
            #selector-menu {
                position: fixed !important;
                left: 0.5rem !important;
                right: 0.5rem !important;
                width: auto !important;
                max-width: none !important;
            }

            #history-dropdown {
                position: fixed !important;
                left: 0.5rem !important;
                right: 0.5rem !important;
                top: auto !important;
                bottom: 5rem !important;
            }

            /* ä¼˜åŒ–åŒºåŸŸæ ‡é¢˜ */
            .zone-header {
                padding-left: 0.5rem !important;
            }

            /* è§¦æ‘¸æ»šåŠ¨ä¼˜åŒ– */
            body {
                -webkit-overflow-scrolling: touch;
                overscroll-behavior-y: contain;
            }

            /* é˜²æ­¢iOSåŒå‡»ç¼©æ”¾ */
            * {
                touch-action: manipulation;
            }
        }

        /* Back to Top Button */
        #back-to-top {
            transition: opacity 0.3s ease, transform 0.3s ease;
        }
        #back-to-top.hidden-btn {
            opacity: 0;
            transform: translateY(1rem);
            pointer-events: none;
        }
    </style>
</head>
<body class="p-6 md:p-10" onclick="window.closeDropdown(event); window.hideHistory(event)">

    <!-- â„ï¸ é›ªèŠ± Canvas (å±‚çº§ z-index: 1) -->
    <canvas id="snow-canvas"></canvas>

    <div id="initial-loader" class="fixed inset-0 z-[100] flex flex-col items-center justify-center bg-[#050505]">
        <div class="loader-ring mb-8"></div>
        <div id="loader-text" class="text-sm font-bold tracking-wide text-gray-1000" style="font-family: system-ui, -apple-system, sans-serif; font-size: 1.575rem;">è€å¤´æ­£åœ¨å¾€æªç“·èŒ¶ç¼¸é‡Œå¹æ°”...</div>
    </div>

    <!-- é¡¶éƒ¨æ  (Tailwind z-50, ç¡®ä¿åœ¨é›ªèŠ±ä¹‹ä¸Š) -->
    <header class="max-w-[2200px] mx-auto flex flex-col md:flex-row items-center gap-6 mb-12 bg-[#0a0a0a] p-6 rounded-3xl border border-[#1f1f1f] shadow-2xl relative z-50">
        <div class="flex items-center gap-5 px-4 border-r border-[#1f1f1f] pr-8">
            <div id="secret-audio-button" class="w-3 h-3 bg-red-600 rounded-full animate-pulse cursor-pointer" title="æ’­æ”¾æµ‹è¯•éŸ³æ•ˆ"></div>
            <h1 class="text-2xl font-black italic tracking-tighter text-gray-100">ç›´æ’­ç›‘æ§å®¤ <span class="text-orange-500 text-sm not-italic font-mono ml-2">LiveRadar v3.1.1</span></h1>
            <button id="snow-toggle-btn" onclick="window.toggleSnow()" class="snow-toggle-btn on" title="åˆ‡æ¢ä¸‹é›ªç‰¹æ•ˆ">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 2v20M2 12h20M4.93 4.93l14.14 14.14M4.93 19.07L19.07 4.93M12 6l-3 3M12 6l3 3M6 12l3-3M6 12l3 3M12 18l-3-3M12 18l3-3M18 12l-3-3M18 12l-3 3"/>
                </svg>
            </button>
        </div>
        <div class="flex flex-1 w-full md:w-auto items-center gap-3 bg-[#111] p-2 rounded-2xl border border-[#1f1f1f] relative">
            <div class="relative w-40" id="custom-selector-container">
                <button onclick="window.toggleDropdown(event)" id="selector-trigger" class="w-full flex items-center justify-between bg-transparent text-sm font-bold px-4 py-3 rounded-xl text-gray-400 hover:text-white border-r border-[#262626] cursor-pointer transition-colors focus:outline-none">
                    <div class="flex items-center gap-2"><div id="selected-indicator" class="w-2.5 h-2.5 rounded-full bg-[#ff5d23] shadow-[0_0_6px_#ff5d23]"></div><span id="current-platform-label" class="text-[#ff5d23]">æ–—é±¼</span></div>
                    <svg class="w-3.5 h-3.5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </button>
                <input type="hidden" id="platform-select" value="douyu">
                <div id="selector-menu" class="dropdown-enter absolute top-full left-0 mt-3 w-full bg-[#161616]/95 backdrop-blur-xl border border-[#333] rounded-2xl shadow-[0_15px_30px_-5px_rgba(0,0,0,0.8)] overflow-hidden z-[100]">
                    <div onclick="window.selectPlatform('douyu', '#ff5d23', 'æ–—é±¼')" class="cursor-pointer px-5 py-3 hover:bg-[#262626] transition-colors border-b border-white/5 flex items-center justify-between group"><span class="text-[#ff5d23] font-bold text-sm group-hover:drop-shadow-[0_0_6px_#ff5d23]">æ–—é±¼</span></div>
                    <div onclick="window.selectPlatform('bilibili', '#fb7299', 'Bç«™')" class="cursor-pointer px-5 py-3 hover:bg-[#262626] transition-colors border-b border-white/5 flex items-center justify-between group"><span class="text-[#fb7299] font-bold text-sm group-hover:drop-shadow-[0_0_6px_#fb7299]">Bç«™</span></div>
                    <div onclick="window.selectPlatform('twitch', '#9146ff', 'Twitch')" class="cursor-pointer px-5 py-3 hover:bg-[#262626] transition-colors flex items-center justify-between group"><span class="text-[#9146ff] font-bold text-sm group-hover:drop-shadow-[0_0_6px_#9146ff]">Twitch</span></div>
                </div>
            </div>
            <input type="text" id="room-id-input" onfocus="window.showHistory()" oninput="window.handleInput(event)" onkeydown="if(event.key === 'Enter') window.handleAddInput()" placeholder="è¾“å…¥æˆ¿é—´å·..." class="bg-transparent text-sm flex-1 outline-none text-gray-200 placeholder:text-gray-700 font-medium px-4 py-3 h-full">
            <div id="history-dropdown" class="dropdown-enter w-full"></div>
            <button onclick="window.handleAddInput()" class="bg-gray-100 text-black hover:bg-orange-500 hover:text-white text-sm font-bold px-6 py-3 rounded-xl transition-all active:scale-95">æ·»åŠ </button>
        </div>
        <div class="flex items-center gap-4 px-4">
            <span id="refresh-stats" class="refresh-stats hidden">--</span>
            <button id="auto-refresh-btn" onclick="window.toggleAutoRefresh()" class="auto-refresh-btn off">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                <span id="auto-refresh-label">è‡ªåŠ¨: å…³</span>
            </button>
            <button id="notify-btn" onclick="window.toggleNotifications()" class="notify-btn off"><span>æ¨é€: å…³</span></button>
            <button id="keepalive-btn" onclick="window.toggleKeepAlive()" class="keepalive-btn off">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" /></svg>
                <span id="keepalive-label">é˜²ä¼‘çœ : å…³</span>
            </button>
            <button id="region-btn" onclick="window.toggleRegionMode()" class="region-btn" title="åˆ‡æ¢åœ°åŒºæ¨¡å¼">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                <span id="region-label">åœ°åŒº: è‡ªåŠ¨</span>
            </button>
            <button onclick="window.exportRooms()" class="import-export-btn" title="å¯¼å‡ºä¸»æ’­åˆ—è¡¨">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/></svg>
                <span>å¯¼å‡º</span>
            </button>
            <button onclick="document.getElementById('import-file-input').click()" class="import-export-btn" title="å¯¼å…¥ä¸»æ’­åˆ—è¡¨">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"/></svg>
                <span>å¯¼å…¥</span>
            </button>
            <input type="file" id="import-file-input" accept=".json,.liveradar" style="display: none;" onchange="window.importRooms(event)">
            <button onclick="window.refreshAll()" id="global-refresh-btn" class="p-3 text-gray-600 hover:text-white transition-colors rounded-full hover:bg-[#1f1f1f]">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" /></svg>
            </button>
        </div>
    </header>

    <!-- File Protocol Warning Banner -->
    <div id="file-protocol-warning" class="hidden max-w-[2200px] mx-auto">
        <div class="warning-header">
            <span class="warning-icon">ğŸ’¡</span>
            <h3 class="warning-title">æ£€æµ‹åˆ°æœ¬åœ°æ–‡ä»¶æ¨¡å¼ (file://)</h3>
            <button class="warning-close" onclick="window.dismissFileWarning()" title="å…³é—­">&times;</button>
        </div>
        <p class="warning-message">
            ç”±äºæµè§ˆå™¨å®‰å…¨é™åˆ¶ï¼ˆCORSè·¨åŸŸï¼‰ï¼Œæœ¬åœ°ç›´æ¥æ‰“å¼€HTMLæ–‡ä»¶æ—¶å¯èƒ½æ— æ³•è®¿é—®ç›´æ’­å¹³å°APIã€‚
            <br>å»ºè®®ä½¿ç”¨ä»¥ä¸‹ä»»ä¸€æ–¹æ¡ˆå¯åŠ¨æœ¬åœ°HTTPæœåŠ¡å™¨ä»¥è·å¾—æœ€ä½³ä½“éªŒï¼š
        </p>
        <div class="warning-solutions">
            <div class="solution-card">
                <div class="solution-title">ğŸ“¦ æ–¹æ¡ˆ1ï¼šPythonï¼ˆæ¨èï¼‰</div>
                <div class="solution-code">python -m http.server 8000</div>
                <div class="solution-hint">ç„¶åè®¿é—®ï¼š<strong>http://localhost:8000</strong></div>
            </div>
            <div class="solution-card">
                <div class="solution-title">ğŸŸ¢ æ–¹æ¡ˆ2ï¼šNode.js</div>
                <div class="solution-code">npx http-server -p 8000</div>
                <div class="solution-hint">æˆ–ä½¿ç”¨ VS Code çš„ Live Server æ‰©å±•</div>
            </div>
        </div>
        <div class="warning-actions">
            <button class="warning-btn warning-btn-primary" onclick="window.showDeploymentGuide()">æŸ¥çœ‹è¯¦ç»†æ•™ç¨‹</button>
            <button class="warning-btn warning-btn-secondary" onclick="window.dismissFileWarningPermanently()">æˆ‘çŸ¥é“äº†ï¼Œä¸å†æç¤º</button>
        </div>
    </div>

    <!-- ä¸»å†…å®¹åŒº (å…³é”®ä¿®æ”¹ï¼šå¢åŠ  relative å’Œ z-10ï¼Œç¡®ä¿å†…å®¹æµ®åœ¨é›ªèŠ±ä¹‹ä¸Š) -->
    <div id="main-content" class="w-full relative z-10">
        <section id="zone-live" class="zone-container">
            <div class="zone-header">
                <div class="zone-title">æ­£åœ¨ç›´æ’­</div>
                <div class="zone-sub">ACTIVE</div>
                <div id="live-status-ticker" class="status-ticker"></div>
            </div>
            <div class="monitor-grid" id="grid-live"></div>
        </section>
        <section id="zone-offline" class="zone-container"><div class="zone-header"><div class="zone-title">ç¦»çº¿é¢‘é“</div><div class="zone-sub">OFFLINE</div></div><div class="monitor-grid" id="grid-offline"></div></section>
        <section id="zone-loop" class="zone-container"><div class="zone-header"><div class="zone-title">è½®æ’­å½•åƒ</div><div class="zone-sub">REPLAY</div></div><div class="monitor-grid" id="grid-loop"></div></section>
        <div id="empty-state" class="hidden py-40 text-center opacity-30"><p class="text-base font-bold text-gray-500 uppercase tracking-widest">æš‚æ— ä¿¡å·æº</p></div>
    </div>
    
    <div id="toast-container"></div>

    <!-- é˜²ä¼‘çœ éŸ³é¢‘ï¼šé™éŸ³å¾ªç¯æ’­æ”¾ï¼Œä¿æŒæ ‡ç­¾é¡µæ´»è·ƒ -->
    <audio id="bg-keepalive" loop style="display: none;">
        <source src="data:audio/mp3;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAACAAADhAC7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7v////////////////////////////////////////////////////////////////////////////////////////////////MQXQwAAAAAtgAAAAAAAANEAAAAAOGluZwAAAAPAAAAAgAAA4QAu7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7v////////////////////////////////////////////////////////////////////////////////////////////////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//uQxAAADwAABpAAAACAAADSAAAAETEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==" type="audio/mp3">
    </audio>

    <!-- Back to Top Button -->
    <button id="back-to-top" class="hidden-btn fixed bottom-8 right-8 z-[99] w-12 h-12 rounded-full bg-orange-500/80 text-white flex items-center justify-center shadow-lg backdrop-blur-sm hover:bg-orange-500">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3">
            <path stroke-linecap="round" stroke-linejoin="round" d="M5 15l7-7 7 7" />
        </svg>
    </button>

    <!-- Footer ä¹Ÿéœ€è¦æµ®èµ·æ¥ -->
    <footer class="w-full text-center py-8 mt-12 border-t border-[#1f1f1f] relative z-10"><p class="text-[10px] text-gray-600 font-mono tracking-widest uppercase mb-2">DISCLAIMER: EDUCATIONAL PURPOSE ONLY.</p><div class="mt-4 flex items-center justify-center gap-2 text-xs text-gray-400"><span>Idea by <span class="text-gray-200">Fengyu Xu</span></span><span class="w-1 h-1 rounded-full bg-gray-700"></span><span>Built by <span class="text-blue-400">Gemini</span> & <span class="text-purple-400">Claude</span></span></div></footer>

    <template id="card-template">
        <a target="_blank" rel="noopener noreferrer" class="room-card group">
            <div class="card-thumbnail-box">
                <div class="thumb-loader"><div class="w-8 h-8 border-2 border-white/20 border-t-orange-500 rounded-full animate-spin"></div></div>
                <img class="card-thumbnail" src="" alt="" loading="lazy">
            </div>
            <span class="status-chip chip-off"><span class="status-text">åŠ è½½ä¸­</span></span>
            <div class="card-info">
                <img class="u-avatar hidden" src="" alt=""><div class="w-14 h-14 rounded-full bg-[#262626] flex-shrink-0 skeleton-avatar"></div>
                <div class="meta-text">
                    <span class="room-title">æ­£åœ¨è¿æ¥...</span>
                    <span class="room-owner owner-name">---</span>
                    <div class="card-bottom-bar">
                        <div class="viewer-pill"><span class="viewer-icon">ğŸ”¥</span><span class="viewer-num">--</span></div>
                        <span class="live-duration hidden">â± --:--</span>
                        <div class="card-actions">
                            <button class="action-btn fav-btn" onclick="event.preventDefault(); event.stopPropagation(); window.toggleFavorite(this.dataset.id, this.dataset.platform)"><svg viewBox="0 0 24 24"><path d="M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.01 4.38.38-3.32 2.88 1 4.28L12 15.4z" fill="none" stroke="currentColor" stroke-width="2"/></svg></button>
                            <button class="action-btn delete-btn" onclick="event.preventDefault(); event.stopPropagation(); window.removeRoom(this.dataset.id, this.dataset.platform)"><svg viewBox="0 0 24 24"><path d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/></svg></button>
                        </div>
                    </div>
                </div>
            </div>
        </a>
    </template>

    <script>
        // ====================================================================
        // ã€åˆå§‹åŠ è½½å™¨ã€‘éšæœºæ–‡å­—
        // ====================================================================
        (function() {
            const loaderTexts = [
                "è€å¤´æ­£åœ¨å¾€æªç“·èŒ¶ç¼¸é‡Œå¹æ°”...",
                "è€å¤´æ­£åœ¨æŠŠæ”¶éŸ³æœºçš„å¤©çº¿æ‹‰åˆ°æœ€é•¿...",
                "è€å¤´æ­£åœ¨é€è¿‡è€èŠ±é•œæ‰“é‡é™Œç”Ÿäºº...",
                "è€å¤´æ­£åœ¨è·Ÿé€å¤–å–çš„å°ä¼™å­æŒ‡è·¯...",
                "è€å¤´æ­£åœ¨ç”¨è‹è‡æ‹ç„å‡†çª—æˆ·ä¸Šçš„è‹è‡...",
                "è€å¤´æ­£åœ¨ç ”ç©¶æ™šæŠ¥ä¸Šçš„ä¸­ç¼å¹¿å‘Š...",
                "è€å¤´æ­£åœ¨æŠŠæ‰åœ¨åœ°ä¸Šçš„å¿«é€’è¸¢å›è§’è½...",
                "è€å¤´æ­£åœ¨çœ¯ç€çœ¼å¬æ”¶éŸ³æœºé‡Œçš„äº¬å‰§...",
                "è€å¤´æ­£åœ¨ç›˜ä¸¤ä¸ªæ²¹å…‰å‘äº®çš„æ ¸æ¡ƒ...",
                "è€å¤´æ­£åœ¨å‡è£…æ²¡çœ‹è§å¿˜è®°å¸¦é—¨ç¦å¡çš„ä½ ..."
            ];

            // éšæœºé€‰æ‹©ä¸€æ¡æ–‡å­—
            const randomText = loaderTexts[Math.floor(Math.random() * loaderTexts.length)];

            // ç«‹å³è®¾ç½®loaderæ–‡å­—ï¼ˆåœ¨DOMåŠ è½½å®Œæˆåï¼‰
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', function() {
                    const loaderTextEl = document.getElementById('loader-text');
                    if (loaderTextEl) {
                        loaderTextEl.textContent = randomText;
                    }
                });
            } else {
                // DOMå·²ç»åŠ è½½å®Œæˆï¼Œç›´æ¥è®¾ç½®
                const loaderTextEl = document.getElementById('loader-text');
                if (loaderTextEl) {
                    loaderTextEl.textContent = randomText;
                }
            }
        })();

        // ====================================================================
        // ã€LiveRadar v3.1.1ã€‘ä¸»è¦ç‰¹æ€§ï¼š
        // 1. é›†ä¸­é…ç½®ç®¡ç† - æ¶ˆé™¤é­”æ³•æ•°å­—
        // 2. DOMå¼•ç”¨ç¼“å­˜ - å‡å°‘é‡å¤æŸ¥è¯¢
        // 3. æ»šåŠ¨äº‹ä»¶ä¼˜åŒ– - requestAnimationFrameèŠ‚æµ
        // 4. èµ„æºç®¡ç†å™¨ - é˜²æ­¢å†…å­˜æ³„æ¼
        // 5. æ€§èƒ½ç›‘æ§ - è‡ªåŠ¨æ£€æµ‹è®¾å¤‡æ€§èƒ½
        // ====================================================================

        // ============================================================
        // ã€iOSå…¼å®¹ã€‘SafeLocalStorage åŒ…è£…å™¨ - å¿…é¡»åœ¨APP_CONFIGä¹‹å‰å®šä¹‰
        // ============================================================
        const SafeStorage = {
            getItem(key, defaultValue = null) {
                try {
                    const value = localStorage.getItem(key);
                    return value !== null ? value : defaultValue;
                } catch (e) {
                    console.warn(`[SafeStorage] è¯»å–å¤±è´¥: ${key}`, e);
                    return defaultValue;
                }
            },
            setItem(key, value) {
                try {
                    localStorage.setItem(key, value);
                    return true;
                } catch (e) {
                    console.warn(`[SafeStorage] å†™å…¥å¤±è´¥: ${key}`, e);
                    return false;
                }
            },
            getJSON(key, defaultValue = null) {
                try {
                    const value = localStorage.getItem(key);
                    return value ? JSON.parse(value) : defaultValue;
                } catch (e) {
                    console.warn(`[SafeStorage] JSONè§£æå¤±è´¥: ${key}`, e);
                    return defaultValue;
                }
            },
            setJSON(key, value) {
                try {
                    localStorage.setItem(key, JSON.stringify(value));
                    return true;
                } catch (e) {
                    console.warn(`[SafeStorage] JSONå­˜å‚¨å¤±è´¥: ${key}`, e);
                    return false;
                }
            }
        };

        // ============================================================
        // ã€è¶£å‘³åŠ è½½ã€‘éšæœºåŠ è½½æ–‡æ¡ˆ - è€å¤´ç³»åˆ—
        // ============================================================
        const LOADING_MESSAGES = [
            'è€å¤´æ­£åœ¨å¾€æªç“·èŒ¶ç¼¸é‡Œå¹æ°”...',
            'è€å¤´æ­£åœ¨æŠŠæ”¶éŸ³æœºçš„å¤©çº¿æ‹‰åˆ°æœ€é•¿...',
            'è€å¤´æ­£åœ¨é€è¿‡è€èŠ±é•œæ‰“é‡é™Œç”Ÿäºº...',
            'è€å¤´æ­£åœ¨è·Ÿé€å¤–å–çš„å°ä¼™å­æŒ‡è·¯...',
            'è€å¤´æ­£åœ¨ç”¨è‹è‡æ‹ç„å‡†çª—æˆ·ä¸Šçš„è‹è‡...',
            'è€å¤´æ­£åœ¨ç ”ç©¶æ™šæŠ¥ä¸Šçš„ä¸­ç¼å¹¿å‘Š...',
            'è€å¤´æ­£åœ¨æŠŠæ‰åœ¨åœ°ä¸Šçš„å¿«é€’è¸¢å›è§’è½...',
            'è€å¤´æ­£åœ¨çœ¯ç€çœ¼å¬æ”¶éŸ³æœºé‡Œçš„äº¬å‰§...',
            'è€å¤´æ­£åœ¨ç›˜ä¸¤ä¸ªæ²¹å…‰å‘äº®çš„æ ¸æ¡ƒ...',
            'è€å¤´æ­£åœ¨å‡è£…æ²¡çœ‹è§å¿˜è®°å¸¦é—¨ç¦å¡çš„ä½ ...'
        ];

        // éšæœºé€‰æ‹©åŠ è½½æ–‡æ¡ˆå¹¶æ›´æ–°DOM
        const randomMessage = LOADING_MESSAGES[Math.floor(Math.random() * LOADING_MESSAGES.length)];
        const loaderTextEl = document.getElementById('loader-text');
        if (loaderTextEl) {
            loaderTextEl.textContent = randomMessage;
        }

        // è®°å½•åŠ è½½å¼€å§‹æ—¶é—´ï¼ˆç”¨äºç¡®ä¿æœ€å°æ˜¾ç¤ºæ—¶é—´ï¼‰
        const loaderStartTime = Date.now();
        const MIN_LOADER_DISPLAY_TIME = 1500; // æœ€å°æ˜¾ç¤º1.5ç§’

        // ============================================================
        // ğŸ¯ å…¨å±€é…ç½®ä¸­å¿ƒ - æ‰€æœ‰é­”æ³•æ•°å­—é›†ä¸­ç®¡ç†
        // ============================================================
        const APP_CONFIG = {
            // ç½‘ç»œé…ç½®
            NETWORK: {
                PROXY_TIMEOUT: 6000,            // ä»£ç†è¯·æ±‚è¶…æ—¶ï¼ˆæ¯«ç§’ï¼‰- ä¼˜åŒ–ï¼šå¿«é€Ÿå¤±è´¥
                PROXY_TIMEOUT_QUICK: 4000,      // å¿«é€Ÿè¯·æ±‚è¶…æ—¶ï¼ˆæ¯«ç§’ï¼‰
                PROXY_TIMEOUT_TWITCH: 6000,     // Twitchä¸“ç”¨è¶…æ—¶
                REFRESH_COOLDOWN: 5000,         // åˆ·æ–°å†·å´æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
                MAX_PROXY_STATS: 100,           // ä»£ç†ç»Ÿè®¡æœ€å¤§è®°å½•æ•°
                RETRY_DELAY: 1000,              // ç½‘ç»œæ¢å¤åé‡è¯•å»¶è¿Ÿ
            },

            // ç¼“å­˜é…ç½®
            CACHE: {
                DEBOUNCE_DELAY: 500,                        // localStorageä¿å­˜é˜²æŠ–å»¶è¿Ÿï¼ˆæ¯«ç§’ï¼‰
                AVATAR_UPDATE_INTERVAL: 90 * 24 * 60 * 60 * 1000,  // å¤´åƒæ›´æ–°é—´éš”ï¼ˆ90å¤©ï¼‰
                IMAGE_TIMESTAMP_INTERVAL: 300000,           // å›¾ç‰‡æ—¶é—´æˆ³æ›´æ–°é—´éš”ï¼ˆ5åˆ†é’Ÿï¼‰
            },

            // UIé…ç½®
            UI: {
                TOAST_DURATION: 3000,           // Toastæ˜¾ç¤ºæ—¶é•¿ï¼ˆæ¯«ç§’ï¼‰
                LOADER_FADE_DURATION: 500,      // åŠ è½½å™¨æ·¡å‡ºæ—¶é•¿ï¼ˆæ¯«ç§’ï¼‰
                SCROLL_THRESHOLD: 300,          // è¿”å›é¡¶éƒ¨æŒ‰é’®æ˜¾ç¤ºé˜ˆå€¼ï¼ˆåƒç´ ï¼‰
                STATS_HIDE_DELAY: 2000,         // ç»Ÿè®¡ä¿¡æ¯éšè—å»¶è¿Ÿï¼ˆæ¯«ç§’ï¼‰
            },

            // å¹¶å‘æ§åˆ¶
            CONCURRENCY: {
                DEFAULT: 6,                     // é»˜è®¤å¹¶å‘æ•°
                MEDIUM: 8,                      // ä¸­ç­‰è´Ÿè½½å¹¶å‘æ•°
                HIGH: 10,                       // é«˜è´Ÿè½½å¹¶å‘æ•°
                THRESHOLD_MEDIUM: 5,            // ä¸­ç­‰è´Ÿè½½é˜ˆå€¼
                THRESHOLD_HIGH: 15,             // é«˜è´Ÿè½½é˜ˆå€¼
            },

            // æ‰¹é‡æ¸²æŸ“
            BATCH: {
                SIZE_SMALL: 2,                  // å°æ‰¹æ¬¡å¤§å°
                SIZE_LARGE: 4,                  // å¤§æ‰¹æ¬¡å¤§å°
                THRESHOLD: 10,                  // åˆ‡æ¢é˜ˆå€¼
            },

            // è‡ªåŠ¨åˆ·æ–°
            AUTO_REFRESH: {
                INTERVAL: 600,                  // è‡ªåŠ¨åˆ·æ–°é—´éš”ï¼ˆç§’ï¼‰
                JITTER_MAX_INITIAL: 2000,       // åˆå§‹åŠ è½½æŠ–åŠ¨æœ€å¤§å€¼ï¼ˆæ¯«ç§’ï¼‰
            },

            // é›ªèŠ±ç‰¹æ•ˆï¼ˆç§»åŠ¨ç«¯è‡ªåŠ¨ç¦ç”¨ï¼‰
            SNOW: {
                ENABLED: window.innerWidth >= 768 && (SafeStorage.getItem('pro_snow_enabled', 'true') === 'true'),  // ç§»åŠ¨ç«¯ç¦ç”¨ï¼Œä¸”è¯»å–ç”¨æˆ·è®¾ç½®
                COUNT: 500,                     // é›ªèŠ±æ€»æ•°é‡
                MAX_SIZE: 3.5,                  // æœ€å¤§å°ºå¯¸ï¼ˆåƒç´ ï¼‰
                MIN_SIZE: 1,                    // æœ€å°å°ºå¯¸ï¼ˆåƒç´ ï¼‰
                MAX_SPEED: 1.2,                 // æœ€å¤§ä¸‹è½é€Ÿåº¦
                MIN_SPEED: 0.3,                 // æœ€å°ä¸‹è½é€Ÿåº¦
                MAX_ACCUMULATED: 12,            // æ¯å¡ç‰‡æœ€å¤šå †ç§¯æ•°
                FALL_SPEED_BOOST: 1.5,          // æ‰è½åŠ é€Ÿå€æ•°
                ACCUMULATED_SIZE_MULT: 1.3,     // å †ç§¯é›ªèŠ±æ”¾å¤§å€æ•°
                COLLISION_OFFSET: 5,            // ç¢°æ’æ£€æµ‹åç§»ï¼ˆåƒç´ ï¼‰
                POSITION_UPDATE_INTERVAL: 100,  // ä½ç½®æ›´æ–°é—´éš”ï¼ˆæ¯«ç§’ï¼‰
            },

            // æ€§èƒ½é…ç½®
            PERFORMANCE: {
                LOW_MEMORY_THRESHOLD: 4,        // ä½å†…å­˜é˜ˆå€¼ï¼ˆGBï¼‰
                LOW_CPU_THRESHOLD: 4,           // ä½CPUæ ¸å¿ƒæ•°é˜ˆå€¼
                ENABLE_PERFORMANCE_MODE: false, // æ€§èƒ½æ¨¡å¼ï¼ˆè‡ªåŠ¨æ£€æµ‹ï¼‰
            },

            // å¢é‡æ›´æ–°é…ç½®
            INCREMENTAL: {
                ENABLED: true,                  // å¯ç”¨å¢é‡æ›´æ–°
                COMPARE_FIELDS: [               // éœ€è¦æ¯”è¾ƒçš„å…³é”®å­—æ®µ
                    'isLive', 'isReplay', 'title', 'owner',
                    'cover', 'avatar', 'viewers', 'heatValue', 'startTime'
                ],
                LOG_CHANGES: true,              // è®°å½•å˜åŒ–æ—¥å¿—
            },

            // éŸ³é¢‘é…ç½®
            AUDIO: {
                NOTIFICATION_VOLUME: 1.0,       // é€šçŸ¥éŸ³é‡ (0.0 - 1.0)
                ENABLE_ON_IOS: false,           // iOSè®¾å¤‡å¯ç”¨éŸ³é¢‘ï¼ˆå®éªŒæ€§ï¼‰
                AUTO_UNLOCK: true,              // è‡ªåŠ¨è§£é”éŸ³é¢‘
            },

// åœ°åŒºé…ç½®ï¼ˆæ™ºèƒ½é€‚é…ä¸­å›½å¤§é™†/æµ·å¤–ï¼‰
            REGION: {
                AUTO_DETECT: true,              // è‡ªåŠ¨æ£€æµ‹ç”¨æˆ·åœ°åŒº
                IS_MAINLAND_CHINA: null,        // æ˜¯å¦ä¸­å›½å¤§é™†ï¼ˆnull=æœªæ£€æµ‹ï¼Œtrue=å¤§é™†ï¼Œfalse=æµ·å¤–ï¼‰
                DETECTION_TIMEOUT: 5000,        // IPæ£€æµ‹è¶…æ—¶ï¼ˆæ¯«ç§’ï¼‰
                MAINLAND_PROXY_STRATEGY: 'direct', // å¤§é™†Bç«™/æ–—é±¼ç­–ç•¥ï¼š'direct'ï¼ˆç›´è¿ï¼‰æˆ– 'proxy'ï¼ˆä»£ç†ï¼‰
                DISABLE_TWITCH_IN_MAINLAND: true,  // å¤§é™†ç¦ç”¨Twitchæ£€æµ‹
            },

            // è°ƒè¯•é…ç½®
            DEBUG: {
                ENABLED: false,                 // è°ƒè¯•æ¨¡å¼å¼€å…³
                LOG_NETWORK: false,             // ç½‘ç»œæ—¥å¿—
                LOG_RENDER: false,              // æ¸²æŸ“æ—¥å¿—
                LOG_PERFORMANCE: true,          // æ€§èƒ½æ—¥å¿—
                LOG_AUDIO: true,                // éŸ³é¢‘æ—¥å¿—
            }
        };

        // ============================================================
        // ğŸ“Š æ€§èƒ½æ£€æµ‹å™¨ - è‡ªåŠ¨æ£€æµ‹è®¾å¤‡æ€§èƒ½å¹¶è°ƒæ•´é…ç½®
        // ============================================================
        const PerformanceDetector = {
            detect() {
                const memory = navigator.deviceMemory || 4; // GB
                const cores = navigator.hardwareConcurrency || 2;

                // æ£€æµ‹ä½æ€§èƒ½è®¾å¤‡
                if (memory < APP_CONFIG.PERFORMANCE.LOW_MEMORY_THRESHOLD ||
                    cores < APP_CONFIG.PERFORMANCE.LOW_CPU_THRESHOLD) {
                    APP_CONFIG.PERFORMANCE.ENABLE_PERFORMANCE_MODE = true;
                    this.applyPerformanceMode();
                }

                if (APP_CONFIG.DEBUG.LOG_PERFORMANCE) {
                    console.log(`[æ€§èƒ½æ£€æµ‹] å†…å­˜: ${memory}GB, CPUæ ¸å¿ƒ: ${cores}, æ€§èƒ½æ¨¡å¼: ${APP_CONFIG.PERFORMANCE.ENABLE_PERFORMANCE_MODE ? 'å¼€å¯' : 'å…³é—­'}`);
                }
            },

            applyPerformanceMode() {
                // é™ä½é›ªèŠ±æ•°é‡
                APP_CONFIG.SNOW.COUNT = 50;
                APP_CONFIG.SNOW.POSITION_UPDATE_INTERVAL = 200;

                // é™ä½å¹¶å‘æ•°
                APP_CONFIG.CONCURRENCY.DEFAULT = 4;
                APP_CONFIG.CONCURRENCY.MEDIUM = 6;
                APP_CONFIG.CONCURRENCY.HIGH = 8;

                // å¢åŠ æ‰¹é‡å¤§å°
                APP_CONFIG.BATCH.SIZE_SMALL = 3;
                APP_CONFIG.BATCH.SIZE_LARGE = 6;

                console.log('[æ€§èƒ½ä¼˜åŒ–] å·²å¯ç”¨æ€§èƒ½æ¨¡å¼ï¼Œé™ä½èµ„æºæ¶ˆè€—');
            }
        };

        // ç«‹å³æ‰§è¡Œæ€§èƒ½æ£€æµ‹
        PerformanceDetector.detect();

        // ============================================================
        // ğŸ” æ•°æ®æ¯”è¾ƒå™¨ - æ™ºèƒ½æ£€æµ‹æ•°æ®å˜åŒ–ï¼ˆå¢é‡æ›´æ–°æ ¸å¿ƒï¼‰
        // ============================================================
        const DataDiffer = {
            /**
             * æ¯”è¾ƒä¸¤ä¸ªæ•°æ®å¯¹è±¡æ˜¯å¦æœ‰å®è´¨æ€§å˜åŒ–
             * @param {Object} oldData - æ—§æ•°æ®
             * @param {Object} newData - æ–°æ•°æ®
             * @returns {Object} { changed: boolean, changes: Array<string> }
             */
            compare(oldData, newData) {
                if (!APP_CONFIG.INCREMENTAL.ENABLED) {
                    return { changed: true, changes: ['å¢é‡æ›´æ–°å·²ç¦ç”¨'] };
                }

                // å¦‚æœæ²¡æœ‰æ—§æ•°æ®ï¼Œè§†ä¸ºæ–°å¡ç‰‡ï¼ˆéœ€è¦æ¸²æŸ“ï¼‰
                if (!oldData) {
                    return { changed: true, changes: ['æ–°å¡ç‰‡'] };
                }

                const changes = [];
                const fields = APP_CONFIG.INCREMENTAL.COMPARE_FIELDS;

                for (const field of fields) {
                    const oldValue = oldData[field];
                    const newValue = newData[field];

                    // æ·±åº¦æ¯”è¾ƒï¼ˆå¤„ç†ä¸åŒç±»å‹ï¼‰
                    if (!this.isEqual(oldValue, newValue)) {
                        changes.push(field);
                    }
                }

                return {
                    changed: changes.length > 0,
                    changes: changes
                };
            },

            /**
             * æ·±åº¦ç›¸ç­‰æ¯”è¾ƒ
             */
            isEqual(a, b) {
                // ä¸¥æ ¼ç›¸ç­‰
                if (a === b) return true;

                // null/undefined å¤„ç†
                if (a == null || b == null) return a === b;

                // ç±»å‹ä¸åŒ
                if (typeof a !== typeof b) return false;

                // æ•°å­—æ¯”è¾ƒï¼ˆå¤„ç†NaNï¼‰
                if (typeof a === 'number') {
                    if (isNaN(a) && isNaN(b)) return true;
                    return a === b;
                }

                // å­—ç¬¦ä¸²æ¯”è¾ƒï¼ˆtrimåæ¯”è¾ƒï¼Œé¿å…ç©ºæ ¼å·®å¼‚ï¼‰
                if (typeof a === 'string') {
                    return String(a).trim() === String(b).trim();
                }

                // å¸ƒå°”å€¼
                if (typeof a === 'boolean') {
                    return a === b;
                }

                // å…¶ä»–ç±»å‹ï¼ˆå¯¹è±¡ã€æ•°ç»„ç­‰ï¼‰ä½¿ç”¨JSONæ¯”è¾ƒ
                try {
                    return JSON.stringify(a) === JSON.stringify(b);
                } catch (e) {
                    return a === b;
                }
            },

            /**
             * ç”Ÿæˆå˜åŒ–æ‘˜è¦ï¼ˆç”¨äºæ—¥å¿—ï¼‰
             */
            summarize(oldData, newData, changes) {
                if (!changes || changes.length === 0) return '';

                const summary = changes.map(field => {
                    const oldVal = this.formatValue(oldData?.[field]);
                    const newVal = this.formatValue(newData?.[field]);
                    return `${field}: ${oldVal} â†’ ${newVal}`;
                }).join(', ');

                return summary;
            },

            /**
             * æ ¼å¼åŒ–å€¼ç”¨äºæ˜¾ç¤º
             */
            formatValue(value) {
                if (value === null || value === undefined) return 'null';
                if (typeof value === 'boolean') return value ? 'true' : 'false';
                if (typeof value === 'string') return value.length > 30 ? value.slice(0, 30) + '...' : value;
                if (typeof value === 'number') return String(value);
                return JSON.stringify(value).slice(0, 30);
            }
        };

        // ============================================================
        // ğŸ”§ èµ„æºç®¡ç†å™¨ - é˜²æ­¢å†…å­˜æ³„æ¼
        // ============================================================
        const ResourceManager = {
            _timers: new Set(),
            _intervals: new Set(),
            _listeners: new Map(),

            addTimer(id) {
                this._timers.add(id);
                return id;
            },

            addInterval(id) {
                this._intervals.add(id);
                return id;
            },

            clearTimer(id) {
                clearTimeout(id);
                this._timers.delete(id);
            },

            clearInterval(id) {
                clearInterval(id);
                this._intervals.delete(id);
            },

            addEventListener(element, event, handler, options) {
                if (!this._listeners.has(element)) {
                    this._listeners.set(element, []);
                }
                this._listeners.get(element).push({ event, handler, options });
                element.addEventListener(event, handler, options);
            },

            cleanup() {
                // æ¸…ç†æ‰€æœ‰å®šæ—¶å™¨
                this._timers.forEach(id => clearTimeout(id));
                this._timers.clear();

                // æ¸…ç†æ‰€æœ‰é—´éš”å™¨
                this._intervals.forEach(id => clearInterval(id));
                this._intervals.clear();

                // æ¸…ç†æ‰€æœ‰äº‹ä»¶ç›‘å¬å™¨
                this._listeners.forEach((listeners, element) => {
                    listeners.forEach(({ event, handler, options }) => {
                        element.removeEventListener(event, handler, options);
                    });
                });
                this._listeners.clear();

                console.log('[èµ„æºç®¡ç†] æ‰€æœ‰èµ„æºå·²æ¸…ç†');
            }
        };

        // --- â„ï¸ SNOW EFFECT ENGINE - ç‰©ç†ç§¯é›ªç³»ç»Ÿ â„ï¸ ---
        // åŠŸèƒ½ç‰¹æ€§ï¼š
        // 1. é›ªèŠ±ä¼šå †ç§¯åœ¨ç›´æ’­å¡ç‰‡é¡¶éƒ¨
        // 2. é¼ æ ‡æ‚¬åœå¡ç‰‡æ—¶ï¼Œç§¯é›ªä¼šæ‰è½
        // 3. é¡µé¢æ»šåŠ¨æ—¶é›ªèŠ±ä½ç½®æ­£ç¡®
        // 4. æ€§èƒ½ä¼˜åŒ–ï¼šç¢°æ’æ£€æµ‹ç¼“å­˜ã€ç§¯é›ªæ•°é‡é™åˆ¶ã€è‡ªåŠ¨æ€§èƒ½è°ƒæ•´
        (function() {
            // ã€æ€§èƒ½ä¼˜åŒ–ã€‘ç§»åŠ¨ç«¯è‡ªåŠ¨ç¦ç”¨é›ªèŠ±ç‰¹æ•ˆ
            if (window.innerWidth < 768) {
                console.log('[é›ªèŠ±ç‰¹æ•ˆ] å·²ç¦ç”¨ï¼ˆç§»åŠ¨ç«¯ï¼‰');
                return;
            }

            const canvas = document.getElementById('snow-canvas');
            if (!canvas) return; // å®‰å…¨æ£€æŸ¥ï¼šcanvas ä¸å­˜åœ¨æ—¶é€€å‡º

            const ctx = canvas.getContext('2d');
            if (!ctx) return; // å®‰å…¨æ£€æŸ¥ï¼šcontext è·å–å¤±è´¥æ—¶é€€å‡º

            let width, height;
            let snowflakes = [];

            // ã€æ€§èƒ½ä¼˜åŒ–ã€‘ä½¿ç”¨å…¨å±€é…ç½®
            const CONFIG = APP_CONFIG.SNOW;

            // ========================================
            // å¡ç‰‡ä½ç½®ç¼“å­˜ï¼ˆæ€§èƒ½ä¼˜åŒ–ï¼‰
            // ========================================
            let cardPositionsCache = [];
            let lastPositionUpdate = 0;

            /**
             * æ›´æ–°æ‰€æœ‰å¡ç‰‡çš„ä½ç½®ä¿¡æ¯ï¼ˆå¸¦èŠ‚æµï¼‰
             * ä½¿ç”¨ç¼“å­˜é¿å…æ¯å¸§éƒ½è°ƒç”¨ getBoundingClientRect
             */
            function updateCardPositions(forceUpdate = false) {
                const now = Date.now();
                // èŠ‚æµï¼šæ¯éš”ä¸€å®šæ—¶é—´æ‰æ›´æ–°
                if (!forceUpdate && now - lastPositionUpdate < CONFIG.POSITION_UPDATE_INTERVAL) {
                    return;
                }
                lastPositionUpdate = now;

                const cards = document.querySelectorAll('.room-card');
                cardPositionsCache = [];

                cards.forEach(card => {
                    const rect = card.getBoundingClientRect();
                    // åªç¼“å­˜åœ¨è§†å£å†…çš„å¡ç‰‡ï¼ˆæ€§èƒ½ä¼˜åŒ–ï¼‰
                    if (rect.bottom > 0 && rect.top < height) {
                        cardPositionsCache.push({
                            element: card,
                            rect: rect,
                            isHovered: card.matches(':hover'),
                            accumulatedCount: 0  // å½“å‰å †ç§¯æ•°é‡ï¼Œç¨åç»Ÿè®¡
                        });
                    }
                });
            }

            /**
             * ç»Ÿè®¡æ¯å¼ å¡ç‰‡ä¸Šçš„ç§¯é›ªæ•°é‡
             */
            function countAccumulatedSnow() {
                // é‡ç½®è®¡æ•°
                cardPositionsCache.forEach(cp => cp.accumulatedCount = 0);

                // ç»Ÿè®¡æ¯å¼ å¡ç‰‡çš„ç§¯é›ª
                snowflakes.forEach(flake => {
                    if (flake.isAccumulated && flake.accumulatedOn) {
                        const cardData = cardPositionsCache.find(
                            cp => cp.element === flake.accumulatedOn
                        );
                        if (cardData) {
                            cardData.accumulatedCount++;
                        }
                    }
                });
            }

            // ========================================
            // Snowflake ç±» - å¢å¼ºç‰ˆï¼ˆæ”¯æŒç‰©ç†ç§¯é›ªï¼‰
            // ========================================
            class Snowflake {
                constructor() {
                    this.reset(true);
                }

                /**
                 * é‡ç½®é›ªèŠ±åˆ°åˆå§‹çŠ¶æ€
                 * @param {boolean} initial - æ˜¯å¦ä¸ºåˆå§‹åŒ–ï¼ˆéšæœºåˆ†å¸ƒï¼‰è¿˜æ˜¯é‡ç”Ÿï¼ˆä»é¡¶éƒ¨ï¼‰
                 */
                reset(initial = false) {
                    this.x = Math.random() * width;
                    // åˆå§‹åŒ–æ—¶éšæœºåˆ†å¸ƒï¼Œå¦åˆ™ä»å±å¹•é¡¶éƒ¨è½ä¸‹
                    this.y = initial ? Math.random() * height : -10 - Math.random() * 50;
                    this.size = Math.random() * (CONFIG.MAX_SIZE - CONFIG.MIN_SIZE) + CONFIG.MIN_SIZE;
                    this.baseSize = this.size;  // ä¿å­˜åŸå§‹å°ºå¯¸
                    this.speed = Math.random() * (CONFIG.MAX_SPEED - CONFIG.MIN_SPEED) + CONFIG.MIN_SPEED;
                    this.baseSpeed = this.speed;  // ä¿å­˜åŸå§‹é€Ÿåº¦
                    this.opacity = Math.random() * 0.5 + 0.2;
                    this.drift = Math.random() * 2 - 1;
                    this.driftCycle = Math.random() * Math.PI * 2;

                    // ç§¯é›ªç›¸å…³å±æ€§
                    this.isAccumulated = false;      // æ˜¯å¦å·²å †ç§¯
                    this.accumulatedOn = null;       // å †ç§¯åœ¨å“ªå¼ å¡ç‰‡ä¸Š
                    this.accumulatedOffsetX = 0;     // ç›¸å¯¹äºå¡ç‰‡å·¦è¾¹ç¼˜çš„Xåç§»
                    this.accumulatedOffsetY = 0;     // ç›¸å¯¹äºå¡ç‰‡é¡¶éƒ¨çš„Yåç§»

                    // è§†è§‰æ•ˆæœç›¸å…³
                    this.rotation = 0;               // æ—‹è½¬è§’åº¦
                    this.rotationSpeed = (Math.random() - 0.5) * 0.1;  // æ—‹è½¬é€Ÿåº¦
                    this.wobble = Math.random() * Math.PI * 2;  // æ‘‡æ‘†ç›¸ä½
                }

                /**
                 * æ›´æ–°é›ªèŠ±çŠ¶æ€
                 */
                update() {
                    if (this.isAccumulated) {
                        // ========== å·²å †ç§¯çŠ¶æ€ ==========
                        this.updateAccumulated();
                    } else {
                        // ========== ä¸‹è½çŠ¶æ€ ==========
                        this.updateFalling();
                    }
                }

                /**
                 * æ›´æ–°å·²å †ç§¯çš„é›ªèŠ±
                 */
                updateAccumulated() {
                    // æ£€æŸ¥å¡ç‰‡æ˜¯å¦è¿˜å­˜åœ¨
                    if (!this.accumulatedOn || !document.contains(this.accumulatedOn)) {
                        // å¡ç‰‡å·²è¢«ç§»é™¤ï¼Œæ¢å¤ä¸‹è½
                        this.startFalling();
                        return;
                    }

                    // æ£€æŸ¥å¡ç‰‡æ˜¯å¦æ­£åœ¨è¢« hover
                    if (this.accumulatedOn.matches(':hover')) {
                        // å¡ç‰‡è¢« hoverï¼Œè§¦å‘æ‰è½
                        this.startFalling();
                        return;
                    }

                    // è·Ÿéšå¡ç‰‡ä½ç½®ï¼ˆå¤„ç†é¡µé¢æ»šåŠ¨ï¼‰
                    const rect = this.accumulatedOn.getBoundingClientRect();
                    this.x = rect.left + this.accumulatedOffsetX;
                    this.y = rect.top + this.accumulatedOffsetY;

                    // å¦‚æœé›ªèŠ±ç§»å‡ºè§†å£å¤ªè¿œï¼Œé‡ç½®å®ƒ
                    if (this.y > height + 100 || this.y < -100) {
                        this.reset();
                    }
                }

                /**
                 * æ›´æ–°ä¸‹è½ä¸­çš„é›ªèŠ±
                 */
                updateFalling() {
                    // æ›´æ–°ä½ç½®
                    this.y += this.speed;
                    this.driftCycle += 0.02;
                    this.x += Math.sin(this.driftCycle) * 0.5 + this.drift * 0.1;

                    // æ›´æ–°æ—‹è½¬
                    this.rotation += this.rotationSpeed;

                    // ç¢°æ’æ£€æµ‹ï¼šæ£€æŸ¥æ˜¯å¦è½åˆ°å¡ç‰‡ä¸Š
                    for (const cardData of cardPositionsCache) {
                        // è·³è¿‡æ­£åœ¨ hover çš„å¡ç‰‡ï¼ˆä¸åœ¨ä¸Šé¢å †ç§¯ï¼‰
                        if (cardData.isHovered) continue;

                        // æ£€æŸ¥è¯¥å¡ç‰‡æ˜¯å¦å·²è¾¾åˆ°ç§¯é›ªä¸Šé™
                        if (cardData.accumulatedCount >= CONFIG.MAX_ACCUMULATED) continue;

                        // æ‰§è¡Œç¢°æ’æ£€æµ‹
                        if (this.checkCollision(cardData.rect)) {
                            this.accumulateOn(cardData.element, cardData.rect);
                            return;  // ç¢°æ’åä¸å†ç»§ç»­æ£€æµ‹
                        }
                    }

                    // è¾¹ç•Œæ£€æŸ¥ï¼šå¦‚æœè¶…å‡ºå±å¹•ï¼Œé‡ç½®
                    if (this.y > height + 10 || this.x < -10 || this.x > width + 10) {
                        this.reset();
                    }
                }

                /**
                 * ç¢°æ’æ£€æµ‹ï¼šæ£€æŸ¥é›ªèŠ±æ˜¯å¦ä¸å¡ç‰‡ç¢°æ’
                 * @param {DOMRect} rect - å¡ç‰‡çš„è¾¹ç•ŒçŸ©å½¢
                 * @returns {boolean} æ˜¯å¦ç¢°æ’
                 */
                checkCollision(rect) {
                    // åªæ£€æµ‹å¡ç‰‡é¡¶éƒ¨åŒºåŸŸï¼ˆè®©é›ªèŠ±å †ç§¯åœ¨é¡¶éƒ¨è¾¹ç¼˜ï¼‰
                    const collisionTop = rect.top - CONFIG.COLLISION_OFFSET;
                    const collisionBottom = rect.top + 15;  // åªæ£€æµ‹é¡¶éƒ¨ä¸€å°æ®µ

                    return (
                        this.y + this.size >= collisionTop &&
                        this.y <= collisionBottom &&
                        this.x >= rect.left &&
                        this.x <= rect.right
                    );
                }

                /**
                 * å †ç§¯åˆ°å¡ç‰‡ä¸Š
                 * @param {HTMLElement} card - å¡ç‰‡å…ƒç´ 
                 * @param {DOMRect} rect - å¡ç‰‡çš„è¾¹ç•ŒçŸ©å½¢
                 */
                accumulateOn(card, rect) {
                    this.isAccumulated = true;
                    this.accumulatedOn = card;

                    // è®¡ç®—ç›¸å¯¹äºå¡ç‰‡çš„åç§»é‡
                    this.accumulatedOffsetX = this.x - rect.left;
                    // æ·»åŠ éšæœºåç§»è®©é›ªå †æ›´è‡ªç„¶
                    this.accumulatedOffsetY = (Math.random() * 8 - 4);

                    // è§†è§‰æ•ˆæœï¼šå †ç§¯çš„é›ªèŠ±ç¨å¾®å˜å¤§
                    this.size = this.baseSize * CONFIG.ACCUMULATED_SIZE_MULT;
                    // å †ç§¯åæé«˜é€æ˜åº¦ï¼Œè®©é›ªå †æ›´æ˜æ˜¾
                    this.opacity = Math.min(this.opacity + 0.15, 0.85);
                }

                /**
                 * ä»å¡ç‰‡ä¸Šæ‰è½ï¼ˆè¢«æŠ–è½ï¼‰
                 */
                startFalling() {
                    this.isAccumulated = false;
                    this.accumulatedOn = null;

                    // æ¢å¤åŸå§‹å°ºå¯¸
                    this.size = this.baseSize;

                    // æ‰è½æ—¶é€Ÿåº¦å¢åŠ ï¼Œæ¨¡æ‹Ÿè¢«æŠ–è½çš„æ•ˆæœ
                    this.speed = this.baseSpeed + CONFIG.FALL_SPEED_BOOST;

                    // æ·»åŠ éšæœºæ°´å¹³æ¼‚ç§»ï¼Œè®©æ‰è½æ›´è‡ªç„¶
                    this.drift = (Math.random() - 0.5) * 3;

                    // å¢åŠ æ—‹è½¬é€Ÿåº¦
                    this.rotationSpeed = (Math.random() - 0.5) * 0.3;
                }

                /**
                 * ç»˜åˆ¶é›ªèŠ±
                 */
                draw() {
                    ctx.save();

                    // è®¾ç½®é€æ˜åº¦
                    ctx.globalAlpha = this.opacity;
                    ctx.fillStyle = 'white';

                    // å¦‚æœæ˜¯å †ç§¯çŠ¶æ€ï¼Œç»˜åˆ¶ç¨å¾®ä¸åŒçš„æ•ˆæœ
                    if (this.isAccumulated) {
                        // å †ç§¯çš„é›ªèŠ±ï¼šç¨å¾®æ‰å¹³ï¼Œæ¨¡æ‹Ÿé›ªå †æ•ˆæœ
                        ctx.beginPath();
                        ctx.ellipse(
                            this.x, this.y,
                            this.size * 1.2,  // æ°´å¹³æ–¹å‘ç¨å®½
                            this.size * 0.8,  // å‚ç›´æ–¹å‘ç¨æ‰
                            0, 0, Math.PI * 2
                        );
                        ctx.fill();

                        // æ·»åŠ å¾®å¼±çš„å…‰æ™•æ•ˆæœ
                        ctx.globalAlpha = this.opacity * 0.3;
                        ctx.beginPath();
                        ctx.arc(this.x, this.y, this.size * 1.5, 0, Math.PI * 2);
                        ctx.fill();
                    } else {
                        // ä¸‹è½ä¸­çš„é›ªèŠ±ï¼šåœ†å½¢
                        ctx.translate(this.x, this.y);
                        ctx.rotate(this.rotation);
                        ctx.beginPath();
                        ctx.arc(0, 0, this.size, 0, Math.PI * 2);
                        ctx.fill();
                    }

                    ctx.restore();
                }
            }

            // ========================================
            // åˆå§‹åŒ–ä¸ä¸»å¾ªç¯
            // ========================================

            /**
             * è°ƒæ•´ç”»å¸ƒå¤§å°
             */
            function resize() {
                width = window.innerWidth;
                height = window.innerHeight;
                canvas.width = width;
                canvas.height = height;
                // çª—å£å¤§å°æ”¹å˜æ—¶å¼ºåˆ¶æ›´æ–°å¡ç‰‡ä½ç½®
                updateCardPositions(true);
            }

            /**
             * åˆå§‹åŒ–é›ªèŠ±ç³»ç»Ÿ
             */
            function initSnow() {
                resize();
                snowflakes = [];

                for (let i = 0; i < CONFIG.COUNT; i++) {
                    snowflakes.push(new Snowflake());
                }

                // åˆå§‹åŒ–å¡ç‰‡ä½ç½®ç¼“å­˜
                updateCardPositions(true);

                // å¯åŠ¨åŠ¨ç”»å¾ªç¯
                loop();
            }

            /**
             * åŠ¨ç”»ä¸»å¾ªç¯
             */
            function loop() {
                // æ¸…ç©ºç”»å¸ƒ
                ctx.clearRect(0, 0, width, height);

                // æ›´æ–°å¡ç‰‡ä½ç½®ç¼“å­˜ï¼ˆå¸¦èŠ‚æµï¼‰
                updateCardPositions();

                // ç»Ÿè®¡ç§¯é›ªæ•°é‡ï¼ˆç”¨äºé™åˆ¶æ¯å¼ å¡ç‰‡çš„ç§¯é›ªï¼‰
                countAccumulatedSnow();

                // æ›´æ–°å¹¶ç»˜åˆ¶æ‰€æœ‰é›ªèŠ±
                snowflakes.forEach(flake => {
                    flake.update();
                    flake.draw();
                });

                // ç»§ç»­ä¸‹ä¸€å¸§
                requestAnimationFrame(loop);
            }

            // ========================================
            // æ€§èƒ½ç›‘æ§ï¼ˆå¯é€‰ï¼Œç”¨äºè°ƒè¯•ï¼‰
            // ========================================
            let frameCount = 0;
            let lastFpsCheck = Date.now();

            function checkPerformance() {
                frameCount++;
                const now = Date.now();
                if (now - lastFpsCheck >= 1000) {
                    const fps = frameCount;
                    frameCount = 0;
                    lastFpsCheck = now;

                    // å¦‚æœ FPS è¿‡ä½ï¼Œå‡å°‘é›ªèŠ±æ•°é‡
                    if (fps < 30 && snowflakes.length > 50) {
                        console.log(`[Snow] FPS: ${fps}, å‡å°‘é›ªèŠ±æ•°é‡`);
                        snowflakes.splice(0, 20);  // ç§»é™¤ 20 ä¸ªé›ªèŠ±
                    }
                }
            }

            // ========================================
            // äº‹ä»¶ç›‘å¬
            // ========================================

            // çª—å£å¤§å°æ”¹å˜
            window.addEventListener('resize', resize);

            // é¡µé¢æ»šåŠ¨æ—¶å¼ºåˆ¶æ›´æ–°å¡ç‰‡ä½ç½®
            window.addEventListener('scroll', () => {
                updateCardPositions(true);
            }, { passive: true });

            // ç›‘å¬ DOM å˜åŒ–ï¼ˆæ–°å¢/åˆ é™¤å¡ç‰‡æ—¶æ›´æ–°ç¼“å­˜ï¼‰
            const domObserver = new MutationObserver(() => {
                updateCardPositions(true);
            });

            // å»¶è¿Ÿåˆå§‹åŒ–ï¼Œç¡®ä¿ DOM åŠ è½½å®Œæˆ
            setTimeout(() => {
                initSnow();

                // å¼€å§‹ç›‘å¬ DOM å˜åŒ–
                const mainContent = document.getElementById('main-content');
                if (mainContent) {
                    domObserver.observe(mainContent, {
                        childList: true,
                        subtree: true
                    });
                }
            }, 100);
        })();


        // --- ğŸµ AUDIO ENGINE CONFIGURATION ğŸµ ---
        // ğŸš¨ è­¦å‘Šï¼šè¯·åœ¨è¿™é‡Œç²˜è´´ä½ çš„ Base64 ä»£ç ï¼
        const NOTIFY_SOUND_BASE64 = "data:audio/mpeg;base64,SUQzBAAAAAABClRYWFgAAAASAAADbWFqb3JfYnJhbmQAaXNvbQBUWFhYAAAAEwAAA21pbm9yX3ZlcnNpb24ANTEyAFRYWFgAAAAkAAADY29tcGF0aWJsZV9icmFuZHMAaXNvbWlzbzJhdmMxbXA0MQBUU1NFAAAADwAAA0xhdmY1Ny44My4xMDAAAAAAAAAAAAAAAP/7UAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEluZm8AAAAPAAAAXQAAmKYABAYJDA8RFBcaHB8iJCcnKi0vMjU4Oj1AQ0VIS0tOUFNWWFteYWNmaWxubnF0d3l8f4KEh4qMj5KVlZeanaCipairrbCztri4u77Bw8bJy87R1NbZ3Nzf4eTn6uzv8vX3+v3/AAAAAExhdmM1Ny4xMAAAAAAAAAAAAAAAACQEQAAAAAAAAJimHEJfLgAAAAAAAAAAAAAAAAAAAAD/+5BkAA/wAABpAAAACAAADSAAAAEAAAGkAAAAIAAANIAAAARMQU1FMy4xMDBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVMQU1FMy4xMDBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+5JkQI/wAABpAAAACAAADSAAAAEAAAGkAAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//uSZECP8AAAaQAAAAgAAA0gAAABAAABpAAAACAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7kmRAj/AAAGkAAAAIAAANIAAAAQAAAaQAAAAgAAA0gAAABFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVMQU1FMy4xMDBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+5JkQI/wAABpAAAACAAADSAAAAEAAAGkAAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRVVVIODk9IAgQ4IAEHBydlECemEEHJk9s8nsEIy4BGNyX5JlSdvf8cf9hY5q8/9szP/ODA8qdkw8hMye+kJB48cCQTGSWI5bYBuI6sqA0ESIriOOi0QwbltIDQREQ4AgIjo5gTEdoQADjukBADiglg3HdaIYEx3TAgBAsHYA//uSZECP8AAAaQAAAAgAAA0gAAABAAABpAAAACAAADSAAAAEgHFA5gTEd4cAaDu0EgHCwVwTA+qEMCYjrhAAgOjIhgcLBfBuI6MkA0JjQkA0LCGIYjqzgG4jxlQSCZUzJ55CSye+kJB5U4Jh5U7M35AEiUo/9gso1IMMCyFt/uZuWzs/7Oz1KSkE4tu7ZE+sToSUyH0Zi8dDNjdaPUE3LB+cNwVtE5em5tu+9Nmb5WN+jbELS1URCIWzy+wHJaIhEH8mHaRlc7GrWXmm2djRqF7DcDL0Tj7EMDK5SrR6EP8tiROYsJDxfjEJ2fiTYmWNNEf2eMa6TpxGoeCFqBjk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qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uSZECP8AAAaQAAAAgAAA0gAAABAAABpAAAACAAADSAAAAEqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqg==";
        let notifyAudio = null;
        try {
            notifyAudio = new Audio(NOTIFY_SOUND_BASE64);
        } catch (e) { console.error("éŸ³é¢‘åˆå§‹åŒ–å¤±è´¥", e); }
        
        function playNotificationSound() {
            // ã€ä¿®å¤ã€‘å…è®¸ç§˜å¯†æŒ‰é’®ç»•è¿‡é€šçŸ¥å¼€å…³é™åˆ¶
            const isSecretButtonTest = arguments.length > 0 && arguments[0] === true;

            // å¦‚æœé€šçŸ¥å…³é—­ã€éŸ³é¢‘æœªåˆå§‹åŒ–æˆ–è®¾å¤‡ä¸ºiOSï¼Œåˆ™è·³è¿‡ï¼ˆé™¤éæ˜¯ç§˜å¯†æŒ‰é’®æµ‹è¯•ï¼‰
            if ((!notificationsEnabled && !isSecretButtonTest) || !notifyAudio) {
                return;
            }

            // iOSè®¾å¤‡æ£€æŸ¥ï¼ˆå¯é…ç½®ï¼‰
            if (iOSDevice && !APP_CONFIG.AUDIO.ENABLE_ON_IOS) {
                if (APP_CONFIG.DEBUG.LOG_AUDIO) {
                    console.warn("[éŸ³é¢‘] iOSè®¾å¤‡éŸ³é¢‘å·²ç¦ç”¨ï¼ˆå¯åœ¨é…ç½®ä¸­å¯ç”¨ï¼‰");
                }
                return;
            }

            // å¦‚æœéŸ³é¢‘ä¸Šä¸‹æ–‡æœªè§£é”ï¼Œåˆ™ä¸å°è¯•æ’­æ”¾ï¼Œå¹¶ç»™ç”¨æˆ·ä¸€ä¸ªæç¤º
            if (!window.audioContextUnlocked) {
                if (APP_CONFIG.DEBUG.LOG_AUDIO) {
                    console.warn("[éŸ³é¢‘] æ’­æ”¾å¤±è´¥ï¼šç”¨æˆ·æœªä¸é¡µé¢äº¤äº’ã€‚");
                }
                // é¦–æ¬¡æç¤ºï¼Œé¿å…é‡å¤æ‰“æ‰°
                if (!window.hasShownAudioUnlockToast) {
                    window.showToast("ğŸ’¡ æç¤ºï¼šè¯·ç‚¹å‡»é¡µé¢ä»»æ„å¤„ä»¥æ¿€æ´»éŸ³æ•ˆ", "info");
                    window.hasShownAudioUnlockToast = true;
                }
                return;
            }

            // ã€ä¿®å¤ã€‘ç¡®ä¿éŸ³é‡è®¾ç½®æ­£ç¡®
            notifyAudio.volume = APP_CONFIG.AUDIO.NOTIFICATION_VOLUME;

            notifyAudio.currentTime = 0;
            const playPromise = notifyAudio.play();

            if (playPromise !== undefined) {
                playPromise
                    .then(() => {
                        if (APP_CONFIG.DEBUG.LOG_AUDIO) {
                            console.log(`[éŸ³é¢‘] âœ“ æ’­æ”¾æˆåŠŸï¼ŒéŸ³é‡: ${(notifyAudio.volume * 100).toFixed(0)}%`);
                        }
                    })
                    .catch(error => {
                        // åªæœ‰åœ¨æ˜ç¡®è§£é”åæ’­æ”¾ä»ç„¶å¤±è´¥ï¼Œæ‰è®°å½•ä¸ºé”™è¯¯
                        console.error("[éŸ³é¢‘] æ’­æ”¾å¤±è´¥", error);
                        window.showToast("éŸ³é¢‘æ’­æ”¾å¤±è´¥ï¼Œè¯·æ£€æŸ¥æµè§ˆå™¨æƒé™", "error");
                    });
            }
        }

        // --- ã€iOSæ£€æµ‹ã€‘Device Detection ---
        const iOSDevice = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
        const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);

        console.log(`[è®¾å¤‡æ£€æµ‹] iOS: ${iOSDevice}, Safari: ${isSafari}, Mobile: ${isMobile}`);

        // ============================================================
        // IP åœ°ç†ä½ç½®æ£€æµ‹å™¨ - æ™ºèƒ½è¯†åˆ«å¤§é™†/æµ·å¤–ç”¨æˆ·
        // ============================================================
        async function detectUserRegion() {
            if (!APP_CONFIG.REGION.AUTO_DETECT) {
                console.log('[åœ°åŒºæ£€æµ‹] è‡ªåŠ¨æ£€æµ‹å·²ç¦ç”¨');
                return false;
            }

            // å°è¯•å¤šä¸ªå…è´¹ IP APIï¼ˆæŒ‰å¯é æ€§æ’åºï¼‰
            const ipAPIs = [
                {
                    name: 'ipapi.co',
                    url: 'https://ipapi.co/json/',
                    parse: (data) => data.country_code === 'CN'
                },
                {
                    name: 'ip-api.com',
                    url: 'http://ip-api.com/json/?fields=countryCode',
                    parse: (data) => data.countryCode === 'CN'
                },
                {
                    name: 'ipinfo.io',
                    url: 'https://ipinfo.io/json',
                    parse: (data) => data.country === 'CN'
                }
            ];

            for (const api of ipAPIs) {
                try {
                    console.log(`[åœ°åŒºæ£€æµ‹] å°è¯•ä½¿ç”¨ ${api.name}...`);
                    const controller = new AbortController();
                    const timeoutId = setTimeout(() => controller.abort(), APP_CONFIG.REGION.DETECTION_TIMEOUT);

                    const response = await fetch(api.url, {
                        signal: controller.signal,
                        cache: 'no-cache'
                    });
                    clearTimeout(timeoutId);

                    if (!response.ok) throw new Error(`HTTP ${response.status}`);

                    const data = await response.json();
                    const isMainland = api.parse(data);

                    APP_CONFIG.REGION.IS_MAINLAND_CHINA = isMainland;
                    SafeStorage.setItem('user_region', isMainland ? 'CN' : 'INTL');

                    console.log(`[åœ°åŒºæ£€æµ‹] æ£€æµ‹æˆåŠŸ (${api.name}): ${isMainland ? 'ä¸­å›½å¤§é™†' : 'æµ·å¤–åœ°åŒº'}`);
                    return isMainland;

                } catch (error) {
                    console.warn(`[åœ°åŒºæ£€æµ‹] ${api.name} å¤±è´¥:`, error.message);
                    continue; // å°è¯•ä¸‹ä¸€ä¸ª API
                }
            }

            // æ‰€æœ‰APIéƒ½å¤±è´¥ï¼Œæ£€æŸ¥ç¼“å­˜ï¼ˆå¸¦æ—¶æ•ˆæ€§éªŒè¯ï¼‰
            const cachedRegion = SafeStorage.getItem('user_region');
            const cachedTime = SafeStorage.getItem('user_region_timestamp');
            const CACHE_VALID_DAYS = 7; // ç¼“å­˜æœ‰æ•ˆæœŸï¼š7å¤©
            const cacheAge = cachedTime ? (Date.now() - parseInt(cachedTime)) : Infinity;
            const isCacheValid = cacheAge < (CACHE_VALID_DAYS * 24 * 60 * 60 * 1000);

            if (cachedRegion && isCacheValid) {
                const isMainland = cachedRegion === 'CN';
                APP_CONFIG.REGION.IS_MAINLAND_CHINA = isMainland;
                const ageInDays = Math.floor(cacheAge / (24 * 60 * 60 * 1000));
                console.log(`[åœ°åŒºæ£€æµ‹] ä½¿ç”¨ç¼“å­˜ (${ageInDays}å¤©å‰): ${isMainland ? 'ä¸­å›½å¤§é™†' : 'æµ·å¤–åœ°åŒº'}`);
                return isMainland;
            } else if (cachedRegion && !isCacheValid) {
                console.warn('[åœ°åŒºæ£€æµ‹] ç¼“å­˜å·²è¿‡æœŸï¼Œæ¸…é™¤æ—§æ•°æ®');
                SafeStorage.removeItem('user_region');
                SafeStorage.removeItem('user_region_timestamp');
            }

            // å®Œå…¨å¤±è´¥ï¼Œé»˜è®¤ä¸ºæµ·å¤–ï¼ˆä¿å®ˆç­–ç•¥ï¼Œå…è®¸å°è¯•è®¿é—®æ‰€æœ‰å¹³å°ï¼‰
            console.warn('[åœ°åŒºæ£€æµ‹] æ‰€æœ‰æ£€æµ‹å¤±è´¥ä¸”æ— æœ‰æ•ˆç¼“å­˜ï¼Œé»˜è®¤ä¸ºæµ·å¤–æ¨¡å¼');
            APP_CONFIG.REGION.IS_MAINLAND_CHINA = false;
            return false;
        }

        // --- PROXY POOL (ä¼˜åŒ–ç‰ˆ - CodeTabsä¼˜å…ˆï¼Œä¿ç•™HTTPå¤‡ç”¨) ---
        // tier: 'premium' (ç²¾é€‰ï¼Œä¼˜å…ˆä½¿ç”¨), 'standard' (æ ‡å‡†ï¼Œæ¬¡é€‰), 'fallback' (å¤‡ç”¨ï¼Œæœ€åä½¿ç”¨)
        // region: 'overseas' (æµ·å¤–ä»£ç†), 'mainland' (å›½å†…ä»£ç†), 'global' (å…¨çƒå¯ç”¨)
        // wrap: true è¡¨ç¤ºéœ€è¦ä» response.contents ä¸­æå–æ•°æ®
        // æ³¨ï¼šfile://åè®®ä¸‹ï¼Œåªæœ‰CodeTabså¯ç”¨ï¼›http://åè®®ä¸‹ï¼Œå…¶ä»–ä»£ç†å¯ä½œä¸ºå¤‡ç”¨
        const PROXIES = [
            // === ç²¾é€‰å±‚ï¼ˆTier 1ï¼‰ï¼šfile://ä¸‹å¯ç”¨ ===
            { name: "CodeTabs", url: u => `https://api.codetabs.com/v1/proxy?quest=${encodeURIComponent(u)}`, wrap: false, weight: 50, region: 'overseas', tier: 'premium' },

            // === æ–°å¢ä»£ç†ï¼ˆTier 1ï¼‰ï¼šå¾…éªŒè¯ ===
            { name: "AllOrigins-ML", url: u => `https://api.allorigins.ml/get?url=${encodeURIComponent(u)}`, wrap: true, weight: 25, region: 'overseas', tier: 'premium' },
            { name: "HTMLDriven", url: u => `https://cors-proxy.htmldriven.com/?url=${encodeURIComponent(u)}`, wrap: false, weight: 20, region: 'overseas', tier: 'premium' },
            { name: "WhateverOrigin", url: u => `https://whateverorigin.herokuapp.com/get?url=${encodeURIComponent(u)}`, wrap: true, weight: 15, region: 'overseas', tier: 'premium' },

            // === æ ‡å‡†å±‚ï¼ˆTier 2ï¼‰ï¼šHTTPå¤‡ç”¨ ===
            { name: "CORS.IO", url: u => `https://corsproxy.io/?${encodeURIComponent(u)}`, wrap: false, weight: 12, region: 'overseas', tier: 'standard' },
            { name: "AllOrigins", url: u => `https://api.allorigins.win/get?url=${encodeURIComponent(u)}`, wrap: true, weight: 10, region: 'overseas', tier: 'standard' },
            { name: "CORS-EU", url: u => `https://cors.eu.org/?${encodeURIComponent(u)}`, wrap: false, weight: 8, region: 'overseas', tier: 'standard' },

            // === å¤‡ç”¨å±‚ï¼ˆTier 3ï¼‰ï¼šæœ€åé€‰æ‹© ===
            { name: "ThingProxy", url: u => `https://thingproxy.freeboard.io/fetch/${u}`, wrap: false, weight: 5, region: 'overseas', tier: 'fallback' },
            { name: "Proxy.CORS", url: u => `https://proxy.cors.sh/${u}`, wrap: false, weight: 3, region: 'overseas', tier: 'fallback' },
            { name: "CORS-Anywhere", url: u => `https://cors-anywhere.herokuapp.com/${u}`, wrap: false, weight: 2, region: 'overseas', tier: 'fallback' }

            // ã€å¾…æ‰©å±•ã€‘å¦‚æœå‘ç°å¯ç”¨çš„å›½å†…CORSä»£ç†ï¼Œåœ¨æ­¤æ·»åŠ ï¼š
            // { name: "å›½å†…ä»£ç†1", url: u => `...`, wrap: false, weight: 60, region: 'mainland', tier: 'premium' },
        ];
        
        // ä»£ç†æˆåŠŸç‡è¿½è¸ª
        let proxyStats = SafeStorage.getJSON('pro_proxy_stats', {});

        // --- GLOBAL STATE ---
        let rooms = SafeStorage.getJSON('pro_monitored_rooms', [
            { id: "6979222", platform: "douyu", isFav: false },
            { id: "545318", platform: "bilibili", isFav: false },
            { id: "xqc", platform: "twitch", isFav: false }
        ]);
        let searchHistory = SafeStorage.getJSON('pro_search_history', ["6979222", "545318", "xqc"]);
        let notificationsEnabled = SafeStorage.getItem('pro_notify_enabled', 'false') === 'true';
        let did = SafeStorage.getItem('pro_did') || '100000' + Math.random().toString(36).substring(2);
        if(!SafeStorage.getItem('pro_did')) SafeStorage.setItem('pro_did', did);

        let roomDataCache = SafeStorage.getJSON('pro_room_cache', {});
        
        let timer = null; let timeLeft = 300;
        let imgTimestamp = Math.floor(Date.now() / APP_CONFIG.CACHE.IMAGE_TIMESTAMP_INTERVAL);

        // ã€ä¼˜åŒ–ã€‘é˜²æŠ–æ§åˆ¶
        let lastRefreshTime = 0;
        let isRefreshing = false;

        // ã€ä¼˜åŒ–ã€‘åˆ·æ–°ç»Ÿè®¡
        let refreshStats = { total: 0, completed: 0, startTime: 0 };

        // ã€æ–°å¢ã€‘è‡ªåŠ¨åˆ·æ–°
        let autoRefreshEnabled = localStorage.getItem('pro_auto_refresh') === 'true';
        let autoRefreshTimer = null;
        let autoRefreshCountdown = APP_CONFIG.AUTO_REFRESH.INTERVAL;

        // ã€æ–°å¢ã€‘é˜²ä¼‘çœ æ¨¡å¼
        let keepAliveEnabled = SafeStorage.getItem('pro_keepalive_enabled', 'false') === 'true';
        let keepAliveAudio = null;
        let keepAliveUnlocked = false;

        // ã€æ–°å¢ã€‘ä¸‹é›ªç‰¹æ•ˆå¼€å…³
        let snowEnabled = SafeStorage.getItem('pro_snow_enabled', 'true') === 'true';

        // ã€æ–°å¢ã€‘çŠ¶æ€å˜åŒ–é€šçŸ¥
        let previousLiveStatus = {}; // å­˜å‚¨ä¸Šä¸€æ¬¡çš„åœ¨çº¿çŠ¶æ€
        let statusChangeQueue = []; // çŠ¶æ€å˜åŒ–æ¶ˆæ¯é˜Ÿåˆ—
        let currentTickerIndex = 0; // å½“å‰æ˜¾ç¤ºçš„æ¶ˆæ¯ç´¢å¼•
        let tickerTimer = null; // æ»šåŠ¨å®šæ—¶å™¨

        // --- SIGNER ---
        const Signer = {
            getDid: () => did
        };

        // --- HELPERS ---
        function showToast(msg, type='info') {
            const c = document.getElementById('toast-container');
            const el = document.createElement('div'); el.className = 'toast';
            el.innerHTML = `<span style="color:${type==='error'?'#ef4444':'#10b981'}">â—</span> ${msg}`;
            c.appendChild(el);
            // ã€æ€§èƒ½ä¼˜åŒ–ã€‘ä½¿ç”¨èµ„æºç®¡ç†å™¨ç®¡ç†å®šæ—¶å™¨
            const timerId = setTimeout(() => el.remove(), APP_CONFIG.UI.TOAST_DURATION);
            ResourceManager.addTimer(timerId);
        }
        
        function formatHeat(num) {
            if (!num || isNaN(num) || num <= 0) return '0';
            const n = parseInt(num);
            if (n >= 10000) return (n / 10000).toFixed(1) + 'ä¸‡';
            return n.toString();
        }
        
        // ã€æ–°å¢ã€‘æ ¼å¼åŒ–ç›´æ’­æ—¶é•¿
        function formatDuration(startTime) {
            if (!startTime) return null;
            const now = Date.now();
            const diff = now - startTime;
            if (diff < 0) return null;
            
            const hours = Math.floor(diff / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            
            if (hours > 0) {
                return `${hours}h ${minutes}m`;
            } else {
                return `${minutes}m`;
            }
        }

        function saveConfig() {
            SafeStorage.setJSON('pro_monitored_rooms', rooms);
            SafeStorage.setJSON('pro_search_history', searchHistory);
            SafeStorage.setItem('pro_notify_enabled', notificationsEnabled);
        }

        function updateNotifyBtn() {
            const btn = document.getElementById('notify-btn');
            if (notificationsEnabled) {
                btn.classList.remove('off');
                btn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor"><path d="M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z" /></svg><span>æ¨é€: å¼€</span>`;
            } else {
                btn.classList.add('off');
                btn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" /></svg><span>æ¨é€: å…³</span>`;
            }
        }

        // ã€iOSå…¼å®¹ã€‘é€šçŸ¥åˆ‡æ¢åŠŸèƒ½
        function toggleNotifications() {
            // iOS Safari ä¸æ”¯æŒ Notification API
            if (!("Notification" in window) || iOSDevice) {
                window.showToast(iOSDevice ? "iOSæš‚ä¸æ”¯æŒé€šçŸ¥åŠŸèƒ½" : "æµè§ˆå™¨ä¸æ”¯æŒé€šçŸ¥", "error");
                return;
            }

            // åˆ‡æ¢çŠ¶æ€
            if (notificationsEnabled) {
                notificationsEnabled = false;
                saveConfig();
                updateNotifyBtn();
                window.showToast("æ¨é€é€šçŸ¥å·²å…³é—­");
            } else {
                Notification.requestPermission().then(p => {
                    if (p === "granted") {
                        notificationsEnabled = true;
                        saveConfig();
                        updateNotifyBtn();

                        // ã€iOSè·³è¿‡éŸ³é¢‘ã€‘iOS SafariéŸ³é¢‘é™åˆ¶å¤ªä¸¥æ ¼
                        if (!iOSDevice) {
                            playNotificationSound();
                        }

                        window.showToast("æ¨é€é€šçŸ¥å·²å¼€å¯");
                        new Notification("LiveRadar", { body: "ç³»ç»Ÿé€šçŸ¥å·²è¿æ¥" });
                    } else window.showToast("è¯·å…è®¸é€šçŸ¥æƒé™", "error");
                }).catch(e => {
                    console.error("[é€šçŸ¥] è¯·æ±‚å¤±è´¥", e);
                    window.showToast("é€šçŸ¥æƒé™è¯·æ±‚å¤±è´¥", "error");
                });
            }
        }

        // ====================================================================
        // ã€æ–°å¢ã€‘è‡ªåŠ¨åˆ·æ–°åŠŸèƒ½
        // ====================================================================
        function formatCountdown(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        }
        
        function updateAutoRefreshBtn() {
            const btn = document.getElementById('auto-refresh-btn');
            const label = document.getElementById('auto-refresh-label');
            if (!btn || !label) return;
            
            if (autoRefreshEnabled) {
                btn.classList.remove('off');
                label.textContent = `è‡ªåŠ¨: ${formatCountdown(autoRefreshCountdown)}`;
            } else {
                btn.classList.add('off');
                label.textContent = 'è‡ªåŠ¨: å…³';
            }
        }
        
        function startAutoRefreshTimer() {
            if (autoRefreshTimer) clearInterval(autoRefreshTimer);
            autoRefreshCountdown = APP_CONFIG.AUTO_REFRESH.INTERVAL;

            autoRefreshTimer = setInterval(() => {
                autoRefreshCountdown--;
                updateAutoRefreshBtn();

                if (autoRefreshCountdown <= 0) {
                    console.log('[è‡ªåŠ¨åˆ·æ–°] è§¦å‘åˆ·æ–°');
                    autoRefreshCountdown = APP_CONFIG.AUTO_REFRESH.INTERVAL;
                    window.refreshAll(false, true); // ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºæ˜¯è‡ªåŠ¨åˆ·æ–°
                }
            }, 1000);
        }

        function stopAutoRefreshTimer() {
            if (autoRefreshTimer) {
                clearInterval(autoRefreshTimer);
                autoRefreshTimer = null;
            }
            autoRefreshCountdown = APP_CONFIG.AUTO_REFRESH.INTERVAL;
        }
        
        function toggleAutoRefresh() {
            autoRefreshEnabled = !autoRefreshEnabled;
            SafeStorage.setItem('pro_auto_refresh', autoRefreshEnabled);
            
            if (autoRefreshEnabled) {
                startAutoRefreshTimer();
                window.showToast("è‡ªåŠ¨åˆ·æ–°å·²å¼€å¯ (æ¯10åˆ†é’Ÿ)");
            } else {
                stopAutoRefreshTimer();
                window.showToast("è‡ªåŠ¨åˆ·æ–°å·²å…³é—­");
            }
            updateAutoRefreshBtn();
        }
        
        function initAutoRefresh() {
            if (autoRefreshEnabled) {
                startAutoRefreshTimer();
            }
            updateAutoRefreshBtn();
        }

        // ====================================================================
        // ã€æ–°å¢ã€‘ä¸‹é›ªç‰¹æ•ˆå¼€å…³
        // ====================================================================
        function updateSnowBtn() {
            const btn = document.getElementById('snow-toggle-btn');
            const canvas = document.getElementById('snow-canvas');
            if (!btn) return;

            if (snowEnabled) {
                btn.classList.remove('off');
                btn.classList.add('on');
                if (canvas) canvas.style.display = 'block';
            } else {
                btn.classList.remove('on');
                btn.classList.add('off');
                if (canvas) canvas.style.display = 'none';
            }
        }

        function toggleSnow() {
            snowEnabled = !snowEnabled;
            SafeStorage.setItem('pro_snow_enabled', snowEnabled);
            updateSnowBtn();

            if (snowEnabled) {
                window.showToast("â„ï¸ ä¸‹é›ªç‰¹æ•ˆå·²å¼€å¯");
            } else {
                window.showToast("ä¸‹é›ªç‰¹æ•ˆå·²å…³é—­");
            }
        }

        // ====================================================================
        // ã€æ–°å¢ã€‘å¯¼å…¥å¯¼å‡ºåŠŸèƒ½ (Import/Export)
        // ====================================================================

        // å¯¼å‡ºä¸»æ’­åˆ—è¡¨
        function exportRooms() {
            try {
                // å‡†å¤‡å¯¼å‡ºæ•°æ®ï¼ˆä»…åŒ…å«å¿…è¦ä¿¡æ¯ï¼Œä¿æŒæ–‡ä»¶æœ€å°ï¼‰
                const exportData = {
                    version: "3.1.1",
                    timestamp: Date.now(),
                    rooms: rooms.map(room => ({
                        id: room.id,
                        platform: room.platform,
                        isFav: room.isFav || false
                    }))
                };

                // è½¬æ¢ä¸ºJSONå­—ç¬¦ä¸²
                const jsonStr = JSON.stringify(exportData, null, 2);
                const blob = new Blob([jsonStr], { type: 'application/json' });

                // åˆ›å»ºä¸‹è½½é“¾æ¥
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;

                // æ–‡ä»¶åï¼šLiveRadar_Backup_æ—¥æœŸæ—¶é—´.json
                const now = new Date();
                const dateStr = `${now.getFullYear()}${String(now.getMonth() + 1).padStart(2, '0')}${String(now.getDate()).padStart(2, '0')}_${String(now.getHours()).padStart(2, '0')}${String(now.getMinutes()).padStart(2, '0')}`;
                a.download = `LiveRadar_Backup_${dateStr}.json`;

                // è§¦å‘ä¸‹è½½
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);

                window.showToast(`âœ… å·²å¯¼å‡º ${exportData.rooms.length} ä¸ªä¸»æ’­`, 'success');
                console.log('[å¯¼å‡º] æˆåŠŸå¯¼å‡ºä¸»æ’­åˆ—è¡¨:', exportData);
            } catch (error) {
                console.error('[å¯¼å‡º] å¯¼å‡ºå¤±è´¥:', error);
                window.showToast('å¯¼å‡ºå¤±è´¥ï¼Œè¯·é‡è¯•', 'error');
            }
        }

        // å¯¼å…¥ä¸»æ’­åˆ—è¡¨
        function importRooms(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    // è§£æJSON
                    const importData = JSON.parse(e.target.result);

                    // éªŒè¯æ•°æ®æ ¼å¼
                    if (!importData.rooms || !Array.isArray(importData.rooms)) {
                        throw new Error('æ— æ•ˆçš„æ–‡ä»¶æ ¼å¼');
                    }

                    // éªŒè¯æ¯ä¸ªæˆ¿é—´æ•°æ®
                    const validRooms = importData.rooms.filter(room => {
                        return room.id && room.platform &&
                               ['douyu', 'bilibili', 'twitch'].includes(room.platform);
                    });

                    if (validRooms.length === 0) {
                        throw new Error('æ–‡ä»¶ä¸­æ²¡æœ‰æœ‰æ•ˆçš„ä¸»æ’­æ•°æ®');
                    }

                    // æ˜¾ç¤ºå¯¼å…¥é€‰é¡¹å¯¹è¯æ¡†
                    showImportDialog(validRooms, importData.version);

                } catch (error) {
                    console.error('[å¯¼å…¥] è§£æå¤±è´¥:', error);
                    window.showToast('æ–‡ä»¶æ ¼å¼é”™è¯¯ï¼Œè¯·é€‰æ‹©æœ‰æ•ˆçš„å¤‡ä»½æ–‡ä»¶', 'error');
                }

                // é‡ç½®æ–‡ä»¶è¾“å…¥ï¼Œå…è®¸é‡å¤é€‰æ‹©åŒä¸€æ–‡ä»¶
                event.target.value = '';
            };

            reader.onerror = function() {
                window.showToast('æ–‡ä»¶è¯»å–å¤±è´¥', 'error');
                event.target.value = '';
            };

            reader.readAsText(file);
        }

        // æ˜¾ç¤ºå¯¼å…¥é€‰é¡¹å¯¹è¯æ¡†
        function showImportDialog(importRooms, version) {
            // åˆ›å»ºå¯¹è¯æ¡†HTML
            const dialogHTML = `
                <div id="import-dialog" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8); z-index: 9999; display: flex; align-items: center; justify-content: center;">
                    <div style="background: #1a1a1a; border-radius: 16px; padding: 32px; max-width: 480px; width: 90%; border: 1px solid #333;">
                        <h3 style="color: #fff; font-size: 20px; font-weight: bold; margin: 0 0 16px 0;">å¯¼å…¥ä¸»æ’­åˆ—è¡¨</h3>
                        <p style="color: #9ca3af; margin: 0 0 24px 0;">
                            æ£€æµ‹åˆ° <strong style="color: #60a5fa;">${importRooms.length}</strong> ä¸ªä¸»æ’­<br>
                            å½“å‰åˆ—è¡¨æœ‰ <strong style="color: #60a5fa;">${rooms.length}</strong> ä¸ªä¸»æ’­
                        </p>
                        <div style="display: flex; flex-direction: column; gap: 12px;">
                            <button onclick="window.doImport('replace', ${JSON.stringify(importRooms).replace(/"/g, '&quot;')})"
                                    style="padding: 12px 20px; background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); color: white; border: none; border-radius: 10px; font-weight: 600; cursor: pointer; transition: all 0.2s;">
                                ğŸ”„ æ›¿æ¢å½“å‰åˆ—è¡¨
                            </button>
                            <button onclick="window.doImport('merge', ${JSON.stringify(importRooms).replace(/"/g, '&quot;')})"
                                    style="padding: 12px 20px; background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; border: none; border-radius: 10px; font-weight: 600; cursor: pointer; transition: all 0.2s;">
                                â• åˆå¹¶åˆ°å½“å‰åˆ—è¡¨ï¼ˆå»é‡ï¼‰
                            </button>
                            <button onclick="window.closeImportDialog()"
                                    style="padding: 12px 20px; background: rgba(255,255,255,0.1); color: #9ca3af; border: 1px solid #333; border-radius: 10px; font-weight: 600; cursor: pointer; transition: all 0.2s;">
                                å–æ¶ˆ
                            </button>
                        </div>
                    </div>
                </div>
            `;

            // æ·»åŠ åˆ°é¡µé¢
            const dialogContainer = document.createElement('div');
            dialogContainer.innerHTML = dialogHTML;
            document.body.appendChild(dialogContainer.firstElementChild);
        }

        // æ‰§è¡Œå¯¼å…¥
        function doImport(mode, importRooms) {
            try {
                let newRooms = [];
                let message = '';

                if (mode === 'replace') {
                    // æ›¿æ¢æ¨¡å¼ï¼šç›´æ¥ä½¿ç”¨å¯¼å…¥çš„åˆ—è¡¨
                    newRooms = importRooms;
                    message = `æ­£åœ¨åŠ è½½ ${newRooms.length} ä¸ªä¸»æ’­...`;
                    window.showToast(message, 'info');
                } else if (mode === 'merge') {
                    // åˆå¹¶æ¨¡å¼ï¼šå»é‡ååˆå¹¶
                    const existingKeys = new Set(rooms.map(r => `${r.platform}-${r.id}`));
                    const toAdd = importRooms.filter(r => !existingKeys.has(`${r.platform}-${r.id}`));
                    newRooms = [...rooms, ...toAdd];

                    if (toAdd.length === 0) {
                        window.showToast('æ‰€æœ‰ä¸»æ’­éƒ½å·²å­˜åœ¨ï¼Œæ— éœ€æ·»åŠ ', 'info');
                        closeImportDialog();
                        return;
                    }

                    message = `æ­£åœ¨æ·»åŠ  ${toAdd.length} ä¸ªæ–°ä¸»æ’­...`;
                    window.showToast(message, 'info');
                }

                // æ›´æ–°å…¨å±€roomså˜é‡
                rooms = newRooms;

                // ä¿å­˜åˆ°localStorage
                SafeStorage.setJSON('pro_monitored_rooms', rooms);

                // æ¸…ç†ç¼“å­˜ï¼ˆå¼ºåˆ¶é‡æ–°è·å–ï¼‰
                roomDataCache = {};
                SafeStorage.setJSON('pro_room_cache', roomDataCache);

                // å…³é—­å¯¹è¯æ¡†
                closeImportDialog();

                // åˆ·æ–°ç•Œé¢ï¼ˆæ‰¹é‡è·å–ï¼Œæœ‰å¹¶å‘æ§åˆ¶ï¼Œ50+ä¸»æ’­ä¹Ÿæ²¡é—®é¢˜ï¼‰
                console.log(`[å¯¼å…¥] å¼€å§‹æ‰¹é‡åˆ·æ–° ${rooms.length} ä¸ªä¸»æ’­ï¼ˆå¹¶å‘æ§åˆ¶ï¼š3-5ä¸ªï¼‰`);
                window.refreshAll(true);

                console.log('[å¯¼å…¥] æˆåŠŸå¯¼å…¥ï¼Œæ–°åˆ—è¡¨é•¿åº¦:', rooms.length);
            } catch (error) {
                console.error('[å¯¼å…¥] å¯¼å…¥å¤±è´¥:', error);
                window.showToast('å¯¼å…¥å¤±è´¥ï¼Œè¯·é‡è¯•', 'error');
            }
        }

        // å…³é—­å¯¼å…¥å¯¹è¯æ¡†
        function closeImportDialog() {
            const dialog = document.getElementById('import-dialog');
            if (dialog) {
                dialog.remove();
            }
        }

        // ====================================================================
        // ã€æ–°å¢ã€‘åœ°åŒºæ¨¡å¼åˆ‡æ¢ (Region Mode Toggle)
        // ====================================================================

        // åˆ‡æ¢åœ°åŒºæ¨¡å¼
        window.toggleRegionMode = function() {
            const btn = document.getElementById('region-btn');
            const label = document.getElementById('region-label');

            // å¾ªç¯åˆ‡æ¢ï¼šè‡ªåŠ¨ -> å¤§é™† -> æµ·å¤– -> è‡ªåŠ¨
            if (APP_CONFIG.REGION.AUTO_DETECT) {
                // åˆ‡æ¢åˆ°å¤§é™†æ¨¡å¼
                APP_CONFIG.REGION.AUTO_DETECT = false;
                APP_CONFIG.REGION.IS_MAINLAND_CHINA = true;
                SafeStorage.setItem('manual_region_mode', 'mainland');
                btn.className = 'region-btn mainland';
                label.textContent = 'åœ°åŒº: å¤§é™†';
                window.showToast('å·²åˆ‡æ¢åˆ°å¤§é™†æ¨¡å¼ï¼ˆTwitchç¦ç”¨ï¼Œå›½å†…å¹³å°ç›´è¿ï¼‰', 'info');
                console.log('[åœ°åŒºæ¨¡å¼] æ‰‹åŠ¨åˆ‡æ¢åˆ°å¤§é™†æ¨¡å¼');
            } else if (APP_CONFIG.REGION.IS_MAINLAND_CHINA === true) {
                // åˆ‡æ¢åˆ°æµ·å¤–æ¨¡å¼
                APP_CONFIG.REGION.IS_MAINLAND_CHINA = false;
                SafeStorage.setItem('manual_region_mode', 'overseas');
                btn.className = 'region-btn overseas';
                label.textContent = 'åœ°åŒº: æµ·å¤–';
                window.showToast('å·²åˆ‡æ¢åˆ°æµ·å¤–æ¨¡å¼ï¼ˆæ‰€æœ‰å¹³å°å¯ç”¨ï¼‰', 'info');
                console.log('[åœ°åŒºæ¨¡å¼] æ‰‹åŠ¨åˆ‡æ¢åˆ°æµ·å¤–æ¨¡å¼');
            } else {
                // åˆ‡æ¢å›è‡ªåŠ¨æ¨¡å¼
                APP_CONFIG.REGION.AUTO_DETECT = true;
                APP_CONFIG.REGION.IS_MAINLAND_CHINA = null;
                SafeStorage.setItem('manual_region_mode', 'auto');
                btn.className = 'region-btn';
                label.textContent = 'åœ°åŒº: è‡ªåŠ¨';
                window.showToast('å·²åˆ‡æ¢åˆ°è‡ªåŠ¨æ£€æµ‹æ¨¡å¼', 'info');
                console.log('[åœ°åŒºæ¨¡å¼] åˆ‡æ¢åˆ°è‡ªåŠ¨æ£€æµ‹');
                // é‡æ–°æ£€æµ‹
                detectUserRegion();
            }
        };

        // åˆå§‹åŒ–åœ°åŒºæŒ‰é’®çŠ¶æ€
        function updateRegionButtonState() {
            const btn = document.getElementById('region-btn');
            const label = document.getElementById('region-label');
            if (!btn || !label) return;

            const manualMode = SafeStorage.getItem('manual_region_mode');

            if (manualMode === 'mainland') {
                APP_CONFIG.REGION.AUTO_DETECT = false;
                APP_CONFIG.REGION.IS_MAINLAND_CHINA = true;
                btn.className = 'region-btn mainland';
                label.textContent = 'åœ°åŒº: å¤§é™†';
            } else if (manualMode === 'overseas') {
                APP_CONFIG.REGION.AUTO_DETECT = false;
                APP_CONFIG.REGION.IS_MAINLAND_CHINA = false;
                btn.className = 'region-btn overseas';
                label.textContent = 'åœ°åŒº: æµ·å¤–';
            } else {
                // è‡ªåŠ¨æ¨¡å¼ï¼Œæ ¹æ®æ£€æµ‹ç»“æœæ›´æ–°æ˜¾ç¤º
                btn.className = 'region-btn';
                if (APP_CONFIG.REGION.IS_MAINLAND_CHINA === true) {
                    label.textContent = 'åœ°åŒº: è‡ªåŠ¨(å¤§é™†)';
                } else if (APP_CONFIG.REGION.IS_MAINLAND_CHINA === false) {
                    label.textContent = 'åœ°åŒº: è‡ªåŠ¨(æµ·å¤–)';
                } else {
                    label.textContent = 'åœ°åŒº: è‡ªåŠ¨';
                }
            }
        }

        // ====================================================================
        // ã€æ–°å¢ã€‘å…¨å±€éŸ³é¢‘ç®¡ç† (Global Audio Management)
        // ====================================================================
        window.audioContextUnlocked = false;
        window.hasShownAudioUnlockToast = false;

        function unlockAllAudio() {
            if (window.audioContextUnlocked) return;

            const promises = [];

            // 1. è§£é”é€šçŸ¥éŸ³é¢‘
            if (notifyAudio) {
                notifyAudio.volume = 0; // å¿…é¡»é™éŸ³æ’­æ”¾æ‰èƒ½è§£é”
                const notifyPromise = notifyAudio.play()
                    .then(() => {
                        notifyAudio.pause();
                        notifyAudio.currentTime = 0;
                        notifyAudio.volume = APP_CONFIG.AUDIO.NOTIFICATION_VOLUME;
                        if (APP_CONFIG.DEBUG.LOG_AUDIO) {
                            console.log(`[éŸ³é¢‘] âœ“ é€šçŸ¥éŸ³é¢‘å·²è§£é”ï¼ŒéŸ³é‡: ${(APP_CONFIG.AUDIO.NOTIFICATION_VOLUME * 100).toFixed(0)}%`);
                        }
                    })
                    .catch(err => console.warn('[éŸ³é¢‘] é€šçŸ¥éŸ³è§£é”å¤±è´¥', err));
                promises.push(notifyPromise);
            }

            // 2. è§£é”é˜²ä¼‘çœ éŸ³é¢‘
            if (!keepAliveAudio) {
                keepAliveAudio = document.getElementById('bg-keepalive');
            }
            if (keepAliveAudio) {
                keepAliveAudio.volume = 0;
                const keepAlivePromise = keepAliveAudio.play()
                    .then(() => {
                        keepAliveAudio.pause();
                        keepAliveAudio.currentTime = 0;
                    })
                    .catch(err => console.warn('[éŸ³é¢‘] é˜²ä¼‘çœ éŸ³è§£é”å¤±è´¥', err));
                promises.push(keepAlivePromise);
            }

            Promise.all(promises).then(() => {
                if (promises.length > 0) {
                    window.audioContextUnlocked = true;
                    console.log('[éŸ³é¢‘] å…¨å±€éŸ³é¢‘ä¸Šä¸‹æ–‡å·²è§£é”');
                    window.showToast("éŸ³æ•ˆå·²æ¿€æ´»", "info");

                    // è§£é”åï¼Œå¦‚æœé˜²ä¼‘çœ æ˜¯å¼€å¯çš„ï¼Œç«‹å³å¯åŠ¨å®ƒ
                    if (keepAliveEnabled) {
                        startKeepAlive();
                    }
                }
            });
            
            // æ— è®ºæˆåŠŸä¸å¦ï¼Œéƒ½åªå°è¯•ä¸€æ¬¡
            document.removeEventListener('click', unlockAllAudio);
            document.removeEventListener('touchstart', unlockAllAudio);
        }

        function updateKeepAliveBtn() {
            const btn = document.getElementById('keepalive-btn');
            const label = document.getElementById('keepalive-label');
            if (!btn || !label) return;

            if (keepAliveEnabled) {
                btn.classList.remove('off');
                label.textContent = 'é˜²ä¼‘çœ : å¼€';
            } else {
                btn.classList.add('off');
                label.textContent = 'é˜²ä¼‘çœ : å…³';
            }
        }

        function toggleKeepAlive() {
            keepAliveEnabled = !keepAliveEnabled;
            SafeStorage.setItem('pro_keepalive_enabled', keepAliveEnabled);

            if (keepAliveEnabled) {
                startKeepAlive();
                window.showToast("é˜²ä¼‘çœ æ¨¡å¼å·²å¼€å¯");
            } else {
                stopKeepAlive();
                window.showToast("é˜²ä¼‘çœ æ¨¡å¼å·²å…³é—­");
            }
            updateKeepAliveBtn();
        }

        function startKeepAlive() {
            if (!keepAliveAudio) {
                keepAliveAudio = document.getElementById('bg-keepalive');
            }
            if (!keepAliveAudio) {
                console.error('[é˜²ä¼‘çœ ] éŸ³é¢‘å…ƒç´ æœªæ‰¾åˆ°');
                return;
            }

            if (window.audioContextUnlocked) {
                keepAliveAudio.volume = 0.01; // æä½éŸ³é‡
                keepAliveAudio.play().catch(e => {
                    console.warn('[é˜²ä¼‘çœ ] æ’­æ”¾å¤±è´¥', e);
                });
                console.log('[é˜²ä¼‘çœ ] éŸ³é¢‘å·²å¯åŠ¨');
            } else {
                console.log('[é˜²ä¼‘çœ ] ç­‰å¾…ç”¨æˆ·äº¤äº’ä»¥è§£é”éŸ³é¢‘');
                if (!window.hasShownAudioUnlockToast) {
                    window.showToast("è¯·ç‚¹å‡»é¡µé¢ä»»æ„å¤„ä»¥æ¿€æ´»é˜²ä¼‘çœ æ¨¡å¼", "info");
                    window.hasShownAudioUnlockToast = true;
                }
            }
        }

        function stopKeepAlive() {
            if (keepAliveAudio) {
                keepAliveAudio.pause();
                keepAliveAudio.currentTime = 0;
                console.log('[é˜²ä¼‘çœ ] éŸ³é¢‘å·²åœæ­¢');
            }
        }

        function initAudio() {
            updateKeepAliveBtn();
            // æ·»åŠ å…¨å±€ä¸€æ¬¡æ€§äº‹ä»¶ç›‘å¬å™¨ä»¥è§£é”æ‰€æœ‰éŸ³é¢‘
            document.addEventListener('click', unlockAllAudio, { once: true });
            document.addEventListener('touchstart', unlockAllAudio, { once: true });
            
            // å¦‚æœå·²è§£é”ä¸”å¼€å¯ï¼Œåˆ™å¯åŠ¨
            if (keepAliveEnabled && window.audioContextUnlocked) {
                startKeepAlive();
            }
        }

        // ã€å…³é”®ä¿®æ”¹ã€‘æ·»åŠ å£°éŸ³æ’­æ”¾
        function checkAndNotify(room, isLive, ownerName) {
            if (!notificationsEnabled || !room.isFav || !isLive) return;
            const cacheKey = `last_notify_${room.platform}_${room.id}`;
            const lastState = sessionStorage.getItem(cacheKey); 
            if (lastState !== 'true' && isLive) {
                // æ’­æ”¾å£°éŸ³
                playNotificationSound();
                new Notification(`ğŸ”´ ${ownerName} å¼€æ’­äº†!`, { body: `å…³æ³¨çš„ä¸»æ’­æ­£åœ¨ç›´æ’­ä¸­`, icon: 'https://cdn-icons-png.flaticon.com/512/1162/1162232.png' });
            }
            sessionStorage.setItem(cacheKey, isLive ? 'true' : 'false');
        }

        function toggleFavorite(id, platform) {
            rooms = rooms.map(r => (r.id === id && r.platform === platform ? { ...r, isFav: !r.isFav } : r));

            // ã€ä¿®å¤ã€‘æ ‡è®°ç¼“å­˜æ•°æ®ä¸ºæœ‰å˜åŒ–ï¼Œç¡®ä¿å¢é‡æ›´æ–°æ¨¡å¼ä¸‹DOMä¹Ÿä¼šæ›´æ–°
            const cacheKey = `${platform}-${id}`;
            if (roomDataCache[cacheKey]) {
                roomDataCache[cacheKey]._hasChanges = true;
            }

            saveConfig(); window.renderAll();
        }

        function toggleDropdown(e) { e && e.stopPropagation(); const m = document.getElementById('selector-menu'); if (m.classList.contains('dropdown-enter')) { m.classList.remove('dropdown-enter'); m.classList.add('dropdown-enter-active'); } else window.closeDropdown(); }
        function closeDropdown() { const m = document.getElementById('selector-menu'); if (!m.classList.contains('dropdown-enter')) { m.classList.remove('dropdown-enter-active'); m.classList.add('dropdown-enter'); } }
        function selectPlatform(v, c, l) { document.getElementById('platform-select').value = v; const lbl = document.getElementById('current-platform-label'), ind = document.getElementById('selected-indicator'); lbl.textContent = l; lbl.style.color = c; ind.style.backgroundColor = c; ind.style.boxShadow = `0 0 8px ${c}`; window.updatePlaceholder(); window.closeDropdown(); }
        function updatePlaceholder() { const p = document.getElementById('platform-select').value; const i = document.getElementById('room-id-input'); const m = { twitch: "è¾“å…¥ ID (å¦‚ xqc)...", douyu: "è¾“å…¥æˆ¿é—´å·...", bilibili: "è¾“å…¥æˆ¿é—´å·..." }; i.placeholder = m[p] || "è¾“å…¥ ID..."; }

        function showHistory() { 
            const input = document.getElementById('room-id-input');
            window.renderHistory(input ? input.value : '');
            const menu = document.getElementById('history-dropdown'); 
            menu.classList.remove('dropdown-enter'); 
            menu.classList.add('dropdown-enter-active'); 
        }
        function handleInput(e) { 
            const value = e && e.target ? e.target.value : '';
            window.renderHistory(value);
            const m = document.getElementById('history-dropdown'); 
            if (m.classList.contains('dropdown-enter')) { 
                m.classList.remove('dropdown-enter'); 
                m.classList.add('dropdown-enter-active'); 
            }
        }
        function hideHistory(e) { if (e && (e.target.closest('#custom-selector-container') || e.target.id === 'room-id-input')) return; const menu = document.getElementById('history-dropdown'); if (!menu.classList.contains('dropdown-enter')) { menu.classList.remove('dropdown-enter-active'); menu.classList.add('dropdown-enter'); } }
        
        async function addRoom(id, p) { 
            if (!id) return; 
            const pid = id.toString(); 
            if (rooms.some(r => r.id === pid && r.platform === p)) { window.showToast('å·²å­˜åœ¨', 'error'); return; } 
            const nr = { id: pid, platform: p, isFav: false }; 
            rooms.push(nr); 
            saveConfig(); 
            window.renderAll(); 
            await fetchStatus(nr, 0); 
            window.renderAll(); 
        }

        function handleAddInput() { const i = document.getElementById('room-id-input'); const v = i.value.trim(); const p = document.getElementById('platform-select').value; if (!v) return; window.saveSearchHistory(v); window.addRoom(v, p); i.value = ''; i.focus(); window.showHistory(); }
        function removeRoom(id, p) { rooms = rooms.filter(r => !(r.id === id && r.platform === p)); delete roomDataCache[`${p}-${id}`]; saveConfig(); SafeStorage.setJSON('pro_room_cache', roomDataCache); window.renderAll(); }

        function applyHistory(val) { document.getElementById('room-id-input').value = val; window.handleAddInput(); }
        function deleteHistory(e, val) { e.stopPropagation(); searchHistory = searchHistory.filter(item => item !== val); SafeStorage.setJSON('pro_search_history', searchHistory); window.renderHistory(); document.getElementById('room-id-input').focus(); }
        function saveSearchHistory(val) {
            if (!val) return;
            searchHistory = searchHistory.filter(item => item !== val);
            searchHistory.unshift(val);
            if (searchHistory.length > 5) searchHistory = searchHistory.slice(0, 5);
            SafeStorage.setJSON('pro_search_history', searchHistory);
        }

        let historyEventsBound = false;
        function bindHistoryEvents() {
            if (historyEventsBound) return;
            const el = document.getElementById('history-dropdown');
            if (!el) return;
            el.addEventListener('click', (e) => {
                const del = e.target.closest('.history-delete');
                if (del && del.dataset.value != null) {
                    window.deleteHistory(e, del.dataset.value);
                    return;
                }
                const item = e.target.closest('.history-item');
                if (item && item.dataset.value != null) {
                    window.applyHistory(item.dataset.value);
                }
            });
            historyEventsBound = true;
        }

        function renderHistory(query = '') {
            const el = document.getElementById('history-dropdown');
            if (!el) return;
            bindHistoryEvents();
            el.textContent = '';
            const q = query.trim().toLowerCase();
            const items = q ? searchHistory.filter(item => item.toLowerCase().includes(q)) : searchHistory.slice();
            if (items.length === 0) {
                const empty = document.createElement('div');
                empty.className = 'p-3 text-xs text-gray-600 text-center';
                empty.textContent = q ? 'æ— åŒ¹é…å†å²' : 'æš‚æ— å†å²è®°å½•';
                el.appendChild(empty);
                return;
            }
            const frag = document.createDocumentFragment();
            const appendHighlighted = (node, text, needle) => {
                if (!needle) { node.textContent = text; return; }
                const lower = text.toLowerCase();
                let start = 0;
                while (start < text.length) {
                    const idx = lower.indexOf(needle, start);
                    if (idx === -1) {
                        node.appendChild(document.createTextNode(text.slice(start)));
                        break;
                    }
                    if (idx > start) {
                        node.appendChild(document.createTextNode(text.slice(start, idx)));
                    }
                    const strong = document.createElement('strong');
                    strong.textContent = text.slice(idx, idx + needle.length);
                    node.appendChild(strong);
                    start = idx + needle.length;
                }
            };
            items.forEach((item) => {
                const row = document.createElement('div');
                row.className = 'history-item';
                row.dataset.value = item;
                const label = document.createElement('span');
                appendHighlighted(label, item, q);
                const del = document.createElement('span');
                del.className = 'history-delete';
                del.dataset.value = item;
                del.textContent = 'âœ•';
                row.appendChild(label);
                row.appendChild(del);
                frag.appendChild(row);
            });
            el.appendChild(frag);
        }

        // ====================================================================
        // ã€ä¼˜åŒ–ã€‘æ™ºèƒ½ä»£ç†é€‰æ‹© - æ”¯æŒåˆ†å±‚ç­–ç•¥ + åœ°ç†ä½ç½®æ„ŸçŸ¥
        // ====================================================================
        function getSmartProxyOrder(targetUrl = '') {
            const userIsMainland = APP_CONFIG.REGION.IS_MAINLAND_CHINA === true;
            const isDomesticTarget = targetUrl && (targetUrl.includes('bilibili.com') || targetUrl.includes('douyu.com'));
            const now = Date.now();

            // åˆ†å±‚ä¼˜å…ˆçº§æ˜ å°„
            const tierPriority = { 'premium': 1000, 'standard': 500, 'fallback': 100 };

            return [...PROXIES].sort((a, b) => {
                // 1. è·å–ç»Ÿè®¡æ•°æ®
                const statsA = proxyStats[a.name] || { success: 0, fail: 0, lastSuccessTime: 0, avgResponseTime: 0 };
                const statsB = proxyStats[b.name] || { success: 0, fail: 0, lastSuccessTime: 0, avgResponseTime: 0 };

                // 2. è®¡ç®—æˆåŠŸç‡ï¼ˆ0-1èŒƒå›´ï¼‰
                const totalA = statsA.success + statsA.fail;
                const totalB = statsB.success + statsB.fail;
                const successRateA = totalA > 0 ? statsA.success / totalA : 0.5; // æ— æ•°æ®æ—¶ç»™ä¸­ç­‰åˆ†
                const successRateB = totalB > 0 ? statsB.success / totalB : 0.5;

                // 3. è®¡ç®—æ—¶æ•ˆæ€§å¾—åˆ†ï¼ˆ0-1èŒƒå›´ï¼Œæœ€è¿‘æˆåŠŸçš„å¾—åˆ†é«˜ï¼‰
                const recencyA = statsA.lastSuccessTime > 0
                    ? Math.max(0, 1 - (now - statsA.lastSuccessTime) / (1000 * 60 * 60 * 24)) // 24å°æ—¶è¡°å‡
                    : 0;
                const recencyB = statsB.lastSuccessTime > 0
                    ? Math.max(0, 1 - (now - statsB.lastSuccessTime) / (1000 * 60 * 60 * 24))
                    : 0;

                // 4. è®¡ç®—é€Ÿåº¦å¾—åˆ†ï¼ˆ0-1èŒƒå›´ï¼Œå“åº”æ—¶é—´è¶ŠçŸ­å¾—åˆ†è¶Šé«˜ï¼‰
                // å‡è®¾ç†æƒ³å“åº”æ—¶é—´æ˜¯500msï¼Œè¶…è¿‡3000mså¾—åˆ†è¶‹è¿‘0
                const speedA = statsA.avgResponseTime > 0
                    ? Math.max(0, 1 - statsA.avgResponseTime / 3000)
                    : 0.5; // æ— æ•°æ®æ—¶ç»™ä¸­ç­‰åˆ†
                const speedB = statsB.avgResponseTime > 0
                    ? Math.max(0, 1 - statsB.avgResponseTime / 3000)
                    : 0.5;

                // 5. åœ°ç†ä½ç½®æƒé‡è°ƒæ•´
                let geoWeightA = a.weight || 1;
                let geoWeightB = b.weight || 1;

                // å¦‚æœç”¨æˆ·åœ¨å¤§é™†ï¼Œä¼˜å…ˆä½¿ç”¨å›½å†…ä»£ç†ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰
                if (userIsMainland) {
                    if (a.region === 'mainland') geoWeightA *= 3;
                    if (b.region === 'mainland') geoWeightB *= 3;
                }

                // 6. åˆ†å±‚ä¼˜å…ˆçº§åŠ æˆ
                const tierScoreA = tierPriority[a.tier] || 0;
                const tierScoreB = tierPriority[b.tier] || 0;

                // 7. ã€æ™ºèƒ½è¯„åˆ†ã€‘å¤šç»´åº¦åŠ æƒè®¡ç®—
                // æˆåŠŸç‡40% + æ—¶æ•ˆæ€§30% + é€Ÿåº¦30%
                const qualityScoreA = (successRateA * 0.4) + (recencyA * 0.3) + (speedA * 0.3);
                const qualityScoreB = (successRateB * 0.4) + (recencyB * 0.3) + (speedB * 0.3);

                // 8. ç»¼åˆè¯„åˆ† = å±‚çº§ä¼˜å…ˆçº§ + (è´¨é‡å¾—åˆ† * åœ°ç†æƒé‡ * 100)
                // å±‚çº§æ˜¯ä¸»è¦å› ç´ ï¼Œè´¨é‡å¾—åˆ†æ˜¯å¾®è°ƒå› ç´ 
                const finalScoreA = tierScoreA + (qualityScoreA * geoWeightA * 100);
                const finalScoreB = tierScoreB + (qualityScoreB * geoWeightB * 100);

                // ã€è°ƒè¯•æ—¥å¿—ã€‘å¯é€‰ï¼šæ‰“å°å‰3åä»£ç†çš„å¾—åˆ†
                if (APP_CONFIG.DEBUG.LOG_PERFORMANCE) {
                    const rankA = PROXIES.indexOf(a);
                    const rankB = PROXIES.indexOf(b);
                    if (rankA < 3 || rankB < 3) {
                        console.log(`[ä»£ç†è¯„åˆ†] ${a.name}: æ€»åˆ†${finalScoreA.toFixed(1)} (æˆåŠŸç‡${(successRateA*100).toFixed(0)}%, æ—¶æ•ˆ${(recencyA*100).toFixed(0)}%, é€Ÿåº¦${(speedA*100).toFixed(0)}%)`);
                    }
                }

                return finalScoreB - finalScoreA;
            });
        }
        
        function recordProxyResult(proxyName, success, responseTime = null) {
            // åˆå§‹åŒ–ç»Ÿè®¡æ•°æ®ç»“æ„
            if (!proxyStats[proxyName]) {
                proxyStats[proxyName] = {
                    success: 0,
                    fail: 0,
                    lastSuccessTime: 0,
                    totalResponseTime: 0,
                    avgResponseTime: 0
                };
            }

            const stats = proxyStats[proxyName];

            // æ›´æ–°æˆåŠŸ/å¤±è´¥è®¡æ•°
            if (success) {
                stats.success++;
                stats.lastSuccessTime = Date.now(); // è®°å½•æœ€åæˆåŠŸæ—¶é—´

                // æ›´æ–°å“åº”æ—¶é—´ç»Ÿè®¡
                if (responseTime !== null && responseTime > 0) {
                    stats.totalResponseTime += responseTime;
                    stats.avgResponseTime = stats.totalResponseTime / stats.success;
                }
            } else {
                stats.fail++;
            }

            // ã€ä¼˜åŒ–ã€‘é™åˆ¶æœ€å¤§è®°å½•æ•°ï¼Œé˜²æ­¢æ—§æ•°æ®å½±å“è¿‡å¤§ï¼ˆä¿æŒæœ€è¿‘100æ¬¡è®°å½•çš„æƒé‡ï¼‰
            const totalRequests = stats.success + stats.fail;
            if (totalRequests > 100) {
                const decay = 0.8;
                stats.success = Math.floor(stats.success * decay);
                stats.fail = Math.floor(stats.fail * decay);
                stats.totalResponseTime = Math.floor(stats.totalResponseTime * decay);
                // avgResponseTimeä¼šåœ¨ä¸‹æ¬¡æˆåŠŸæ—¶é‡æ–°è®¡ç®—
            }

            SafeStorage.setJSON('pro_proxy_stats', proxyStats);
        }

        // --- FETCHING (ä»£ç†æ¨¡å¼) ---
        async function fetchWithProxy(targetUrl, isBinary = false, timeout = APP_CONFIG.NETWORK.PROXY_TIMEOUT) {
            const did = Signer.getDid();
            const tt = Math.round(Date.now() / 1000);
            const finalUrl = targetUrl + (targetUrl.includes('?') ? '&' : '?') + `t=${tt}&did=${did}`;

            // ã€æ™ºèƒ½ç›´è¿ã€‘http/httpsåè®®ä¸‹ä¼˜å…ˆå°è¯•ç›´è¿ï¼ˆfile://åè®®è·³è¿‡ï¼‰
            const isDomesticPlatform = targetUrl.includes('bilibili.com') || targetUrl.includes('douyu.com');
            const canTryDirect = (window.location.protocol === 'http:' || window.location.protocol === 'https:') && isDomesticPlatform;

            if (canTryDirect) {
                try {
                    console.log('[ä»£ç†ç­–ç•¥] http/httpsæ¨¡å¼ï¼Œå°è¯•ç›´è¿...');
                    const controller = new AbortController();
                    const directTimeoutId = setTimeout(() => controller.abort(), 4000); // å¿«é€Ÿè¶…æ—¶

                    const directRes = await fetch(finalUrl, { signal: controller.signal });
                    clearTimeout(directTimeoutId);

                    if (directRes.ok) {
                        if (isBinary) {
                            console.log('[ä»£ç†ç­–ç•¥] âœ“ ç›´è¿æˆåŠŸï¼ˆäºŒè¿›åˆ¶æ•°æ®ï¼‰');
                            return await directRes.blob();
                        }
                        const data = await directRes.json();
                        if (data) {
                            console.log('[ä»£ç†ç­–ç•¥] âœ“ ç›´è¿æˆåŠŸ');
                            return data;
                        }
                    }
                } catch (e) {
                    console.log('[ä»£ç†ç­–ç•¥] ç›´è¿å¤±è´¥ï¼Œä½¿ç”¨ä»£ç†æ± :', e.message);
                }
            }

            console.log('[ä»£ç†ç­–ç•¥] ä½¿ç”¨æ™ºèƒ½ä»£ç†æ± è·å–æ•°æ®...');

            const smartProxies = getSmartProxyOrder(targetUrl); // ä¼ å…¥targetUrlå¯ç”¨æ™ºèƒ½é€‰æ‹©

            for (const proxy of smartProxies) {
                const startTime = Date.now(); // è®°å½•è¯·æ±‚å¼€å§‹æ—¶é—´

                try {
                    const controller = new AbortController();
                    const timeoutId = setTimeout(() => controller.abort(), timeout);

                    const res = await fetch(proxy.url(finalUrl), {
                        signal: controller.signal
                    });
                    clearTimeout(timeoutId);

                    const responseTime = Date.now() - startTime; // è®¡ç®—å“åº”æ—¶é—´

                    if (!res.ok) {
                        recordProxyResult(proxy.name, false, responseTime);
                        continue;
                    }

                    if (isBinary) {
                        recordProxyResult(proxy.name, true, responseTime);
                        return await res.blob();
                    }

                    const raw = await res.json();
                    const data = proxy.wrap ? (typeof raw.contents === 'string' ? JSON.parse(raw.contents) : raw.contents) : raw;
                    if (data) {
                        recordProxyResult(proxy.name, true, responseTime);
                        return data;
                    }
                    recordProxyResult(proxy.name, false, responseTime);
                } catch (e) {
                    const responseTime = Date.now() - startTime;
                    recordProxyResult(proxy.name, false, responseTime);
                    continue;
                }
            }
            return null;
        }

        // ã€ä¼˜åŒ–ã€‘å¿«é€Ÿè¯·æ±‚ - å•ä»£ç†å°è¯•ï¼Œç”¨äºæ¬¡è¦æ•°æ®
        async function fetchQuick(targetUrl, timeout = APP_CONFIG.NETWORK.PROXY_TIMEOUT_QUICK) {
            const did = Signer.getDid();
            const tt = Math.round(Date.now() / 1000);
            const finalUrl = targetUrl + (targetUrl.includes('?') ? '&' : '?') + `t=${tt}&did=${did}`;
            const smartProxies = getSmartProxyOrder(targetUrl); // ä¼ å…¥targetUrlå¯ç”¨æ™ºèƒ½é€‰æ‹©
            const bestProxy = smartProxies[0]; // åªç”¨æœ€ä½³ä»£ç†
            
            try {
                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), timeout);
                const res = await fetch(bestProxy.url(finalUrl), { signal: controller.signal });
                clearTimeout(timeoutId);
                if (!res.ok) return null;
                const raw = await res.json();
                return bestProxy.wrap ? (typeof raw.contents === 'string' ? JSON.parse(raw.contents) : raw.contents) : raw;
            } catch (e) { return null; }
        }

        async function fetchTextWithProxy(targetUrl, timeout = APP_CONFIG.NETWORK.PROXY_TIMEOUT) {
            const did = Signer.getDid();
            const tt = Math.round(Date.now() / 1000);
            const finalUrl = targetUrl + (targetUrl.includes('?') ? '&' : '?') + `t=${tt}&did=${did}`;
            const smartProxies = getSmartProxyOrder(targetUrl); // ä¼ å…¥targetUrlå¯ç”¨æ™ºèƒ½é€‰æ‹©

            for (const proxy of smartProxies) {
                const startTime = Date.now(); // è®°å½•è¯·æ±‚å¼€å§‹æ—¶é—´

                try {
                    const controller = new AbortController();
                    const timeoutId = setTimeout(() => controller.abort(), timeout);
                    const res = await fetch(proxy.url(finalUrl), { signal: controller.signal });
                    clearTimeout(timeoutId);

                    const responseTime = Date.now() - startTime; // è®¡ç®—å“åº”æ—¶é—´

                    if (!res.ok) {
                        recordProxyResult(proxy.name, false, responseTime);
                        continue;
                    }
                    const text = await res.text();
                    if (text) {
                        recordProxyResult(proxy.name, true, responseTime);
                        return text;
                    }
                    recordProxyResult(proxy.name, false, responseTime);
                } catch (e) {
                    const responseTime = Date.now() - startTime;
                    recordProxyResult(proxy.name, false, responseTime);
                    continue;
                }
            }
            return null;
        }

        // ====================================================================
        // ã€ä¼˜åŒ–ã€‘SNIFFERS - APIä¼˜å…ˆçº§ç­–ç•¥
        // ====================================================================
        
        // æ–—é±¼ï¼šä¼˜å…ˆä½¿ç”¨ ratestream APIï¼ˆæœ€å¿«æœ€ç¨³å®šï¼‰
        async function sniffDouyu(id, fetchAvatar, prevData) {
            let res = { isLive: false, isReplay: false, title: prevData?.title || "ä¿¡å·æ³¢åŠ¨", owner: prevData?.owner || id, cover: prevData?.cover || "", avatar: prevData?.avatar || "", heatValue: 0, isError: false, startTime: null };
            
            // ã€ä¼˜åŒ–ã€‘ä¼˜å…ˆçº§ç­–ç•¥ï¼šå…ˆè¯•æœ€å¿«çš„API
            const rateData = await fetchWithProxy(`https://m.douyu.com/api/room/ratestream?rid=${id}`, false, 8000);
            
            if (rateData?.data) {
                const d = rateData.data;
                const roomInfo = d.roomInfo || {};
                const bizAll = d.room_biz_all || {};
                
                res.isReplay = roomInfo.videoLoop === 1 || bizAll.videoLoop === 1;
                res.isLive = res.isReplay ? false : (roomInfo.show_status === 1 || bizAll.show_status === 1);
                res.title = bizAll.room_name || roomInfo.room_name || res.title;
                res.owner = bizAll.nickname || roomInfo.nickname || res.owner;
                res.heatValue = parseInt(bizAll.online || roomInfo.online || 0);
                
                const baseCover = bizAll.room_pic || roomInfo.room_pic;
                res.cover = res.isLive && baseCover ? `${baseCover}?t=${imgTimestamp}` : baseCover || res.cover;
                res.avatar = bizAll.owner_avatar || roomInfo.avatar || res.avatar;
                
                // ã€æ–°å¢ã€‘è·å–å¼€æ’­æ—¶é—´
                const showTime = bizAll.show_time || roomInfo.show_time;
                if (showTime && res.isLive) {
                    res.startTime = showTime * 1000; // è½¬æ¢ä¸ºæ¯«ç§’æ—¶é—´æˆ³
                }
                
                return res;
            }
            
            // ã€fallbackã€‘å°è¯• betard API
            const betardData = await fetchQuick(`https://www.douyu.com/betard/${id}`);
            if (betardData?.room) {
                const d = betardData.room;
                res.isReplay = d.videoLoop === 1;
                res.isLive = res.isReplay ? false : d.show_status === 1;
                res.title = d.room_name || res.title;
                res.owner = d.nickname || res.owner;
                res.heatValue = parseInt(d.online || 0);
                res.cover = res.isLive && d.room_pic ? `${d.room_pic}?t=${imgTimestamp}` : d.room_pic || res.cover;
                res.avatar = d.owner_avatar || res.avatar;
                
                // ã€æ–°å¢ã€‘è·å–å¼€æ’­æ—¶é—´
                if (d.show_time && res.isLive) {
                    res.startTime = d.show_time * 1000;
                }
                
                return res;
            }
            
            res.isError = true;
            return res;
        }

        // Bç«™ï¼šä¿®å¤å¤´åƒå’Œä¸»æ’­åè·å–
        async function sniffBilibili(id, fetchAvatar, prevData) {
            let res = { isLive: false, isReplay: false, title: prevData?.title || "ä¿¡å·æ³¢åŠ¨", owner: prevData?.owner || id, cover: prevData?.cover || "", avatar: prevData?.avatar || "", heatValue: 0, isError: false, startTime: null };
            
            // ã€ä¼˜åŒ–ã€‘å¹¶è¡Œè¯·æ±‚ï¼šæˆ¿é—´ä¿¡æ¯ + ç”¨æˆ·åˆå§‹åŒ–ä¿¡æ¯
            const [infoRes, initRes] = await Promise.allSettled([
                fetchWithProxy(`https://api.live.bilibili.com/room/v1/Room/get_info?room_id=${id}`, false, 8000),
                fetchWithProxy(`https://api.live.bilibili.com/room/v1/Room/room_init?id=${id}`, false, 6000)
            ]);
            
            const info = infoRes.status === 'fulfilled' ? infoRes.value : null;
            const init = initRes.status === 'fulfilled' ? initRes.value : null;
            
            console.log(`[Bç«™] room=${id}, info=${info?.code}, init=${init?.code}`);
            
            // ä»ä¸¤ä¸ªæ¥æºå°è¯•è·å– UID
            let uid = null;
            if (init?.data?.uid) uid = init.data.uid;
            else if (info?.data?.uid) uid = info.data.uid;
            
            if (info?.code === 0) {
                const d = info.data;
                res.isLive = d.live_status === 1;
                res.isReplay = d.live_status === 2;
                res.heatValue = d.online || 0;
                
                // ã€æ–°å¢ã€‘è·å–å¼€æ’­æ—¶é—´
                if (d.live_time && res.isLive) {
                    // Bç«™è¿”å›çš„æ˜¯ "2024-01-01 12:00:00" æ ¼å¼
                    const liveTime = new Date(d.live_time.replace(' ', 'T') + '+08:00');
                    if (!isNaN(liveTime.getTime())) {
                        res.startTime = liveTime.getTime();
                    }
                }
                
                if (res.isLive || res.isReplay) {
                    res.title = d.title;
                    res.cover = d.keyframe || d.user_cover;
                    if (res.isLive) res.cover += `?t=${imgTimestamp}`;
                } else {
                    res.title = prevData?.title || d.title;
                    res.cover = prevData?.cover || d.user_cover;
                }
            }
            
            // è·å–ç”¨æˆ·å¤´åƒå’Œåå­—
            // ã€ä¿®å¤ã€‘åªè¦æ²¡æœ‰å¤´åƒï¼Œå°±è·å–ç”¨æˆ·ä¿¡æ¯
            const hasValidOwner = prevData?.owner && prevData.owner !== id && prevData.owner !== String(id);
            const needUserInfo = !prevData?.avatar || !hasValidOwner;
            
            console.log(`[Bç«™] uid=${uid}, needUserInfo=${needUserInfo}, hasAvatar=${!!prevData?.avatar}, owner=${prevData?.owner}`);
            
            if (uid && needUserInfo) {
                console.log(`[Bç«™] å¼€å§‹è·å–ç”¨æˆ·ä¿¡æ¯: uid=${uid}`);
                
                // ã€ä¿®å¤ã€‘ä½¿ç”¨Bç«™ç›´æ’­ä¸“ç”¨APIï¼Œè€Œä¸æ˜¯ä¸»ç«™APIï¼ˆä¸»ç«™APIæœ‰CORSé™åˆ¶ï¼‰
                const masterInfo = await fetchWithProxy(`https://api.live.bilibili.com/live_user/v1/Master/info?uid=${uid}`, false, 8000);
                console.log(`[Bç«™] Master API è¿”å›:`, masterInfo?.code, masterInfo?.data?.info?.uname);
                
                if (masterInfo?.code === 0 && masterInfo?.data?.info) {
                    res.avatar = masterInfo.data.info.face || res.avatar;
                    res.owner = masterInfo.data.info.uname || res.owner;
                    console.log(`[Bç«™] âœ“ è·å–æˆåŠŸ: ${res.owner}, å¤´åƒ: ${res.avatar ? 'æœ‰' : 'æ— '}`);
                } else {
                    // å¤‡ç”¨æ–¹æ¡ˆï¼šå°è¯•ä¸»ç«™API
                    console.log(`[Bç«™] Master APIå¤±è´¥ï¼Œå°è¯•ä¸»ç«™API...`);
                    const userInfo = await fetchWithProxy(`https://api.bilibili.com/x/space/acc/info?mid=${uid}`, false, 8000);
                    if (userInfo?.code === 0 && userInfo?.data) {
                        res.avatar = userInfo.data.face || res.avatar;
                        res.owner = userInfo.data.name || res.owner;
                        console.log(`[Bç«™] âœ“ ä¸»ç«™APIè·å–æˆåŠŸ: ${res.owner}`);
                    } else {
                        console.log(`[Bç«™] âœ— æ‰€æœ‰APIéƒ½å¤±è´¥äº†`);
                    }
                }
            }
            
            // ä¿ç•™ä¹‹å‰çš„å¤´åƒå’Œåå­—ï¼ˆå¦‚æœæœ¬æ¬¡æ²¡è·å–åˆ°ï¼‰
            if (!res.avatar && prevData?.avatar) res.avatar = prevData.avatar;
            if ((!res.owner || res.owner === id || res.owner === String(id)) && hasValidOwner) {
                res.owner = prevData.owner;
            }
            
            if (!info || info.code !== 0) return null;
            return res;
        }

        // Twitchï¼šä¿æŒåŸæœ‰é€»è¾‘ï¼Œç•¥å¾®ä¼˜åŒ–è¶…æ—¶
        async function sniffTwitch(id, fetchAvatar, prevData) {
            // ã€ä¼˜åŒ–ã€‘ç§»é™¤åœ°åŒºé™åˆ¶ï¼Œæ‰€æœ‰ç”¨æˆ·éƒ½å°è¯•è·å–æ•°æ®
            // å¤±è´¥æ—¶ä¼šè¿”å›nullï¼Œç”±è°ƒç”¨æ–¹æ ‡è®°isErrorï¼Œæ¸²æŸ“å±‚æ˜¾ç¤º"è¿æ¥å¼‚å¸¸"
            let res = { isLive: false, isReplay: false, title: "", owner: prevData?.owner || id, cover: prevData?.cover || "", avatar: prevData?.avatar || "", heatValue: 0, isError: false, startTime: null };
            try {
                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), APP_CONFIG.NETWORK.PROXY_TIMEOUT_TWITCH);

                const uptime = await fetch(`https://decapi.me/twitch/uptime/${id}`, { signal: controller.signal }).then(r => r.text());
                clearTimeout(timeoutId);

                const isOffline = uptime.toLowerCase().includes("offline") || uptime.toLowerCase().includes("not found") || uptime.toLowerCase().includes("error");
                res.isLive = !isOffline;

                // ã€ä¿®æ”¹ã€‘æ— è®ºåœ¨çº¿è¿˜æ˜¯ç¦»çº¿ï¼Œéƒ½å°è¯•è·å–titleï¼ˆèƒ½è¿æ¥å°±èƒ½è·å–ï¼‰
                const titlePromise = fetch(`https://decapi.me/twitch/title/${id}`).then(r => r.text()).catch(() => "");

                if (res.isLive) {
                    // ã€æ–°å¢ã€‘è§£æ uptime è®¡ç®—å¼€æ’­æ—¶é—´
                    // uptime æ ¼å¼: "2 hours, 30 minutes, 15 seconds" æˆ– "30 minutes, 15 seconds"
                    const uptimeMs = parseUptimeToMs(uptime);
                    if (uptimeMs > 0) {
                        res.startTime = Date.now() - uptimeMs;
                    }

                    // ã€ä¼˜åŒ–ã€‘å¹¶è¡Œè·å–titleå’Œviewers
                    const [t, v] = await Promise.all([
                        titlePromise,
                        fetch(`https://decapi.me/twitch/viewers/${id}`).then(r => r.text()).catch(() => "0")
                    ]);
                    res.title = t || ""; // ä½¿ç”¨å®é™…è·å–çš„titleï¼Œç©ºåˆ™ä¸ºç©º
                    // ã€ä¿®å¤ã€‘éªŒè¯ viewers æ•°æ®æœ‰æ•ˆæ€§ï¼Œæ’é™¤ 404 ç­‰é”™è¯¯
                    const cleanV = v.replace(/,/g, '').trim();
                    if (cleanV && !isNaN(parseInt(cleanV)) && parseInt(cleanV) >= 0 && !/error|not found|404/i.test(v)) {
                        res.heatValue = parseInt(cleanV);
                    }
                    res.cover = `https://static-cdn.jtvnw.net/previews-ttv/live_user_${id}-640x360.jpg?t=${imgTimestamp}`;
                } else {
                    // ã€æ–°å¢ã€‘ç¦»çº¿æ—¶ä¹Ÿè·å–title
                    res.title = await titlePromise || "";
                }

                // ã€ä¼˜åŒ–ã€‘å¤´åƒå¼‚æ­¥è·å–
                if (fetchAvatar && !res.avatar) {
                    fetchTwitchAvatarAsync(id);
                }

                return res;
            } catch(e) { return null; }
        }
        
        // ã€æ–°å¢ã€‘è§£æ Twitch uptime å­—ç¬¦ä¸²ä¸ºæ¯«ç§’
        function parseUptimeToMs(uptime) {
            if (!uptime) return 0;
            let totalMs = 0;
            
            // åŒ¹é… hours
            const hours = uptime.match(/(\d+)\s*hour/i);
            if (hours) totalMs += parseInt(hours[1]) * 60 * 60 * 1000;
            
            // åŒ¹é… minutes
            const minutes = uptime.match(/(\d+)\s*minute/i);
            if (minutes) totalMs += parseInt(minutes[1]) * 60 * 1000;
            
            // åŒ¹é… seconds
            const seconds = uptime.match(/(\d+)\s*second/i);
            if (seconds) totalMs += parseInt(seconds[1]) * 1000;
            
            return totalMs;
        }
        
        // ã€æ–°å¢ã€‘Twitchå¤´åƒå¼‚æ­¥è·å–
        async function fetchTwitchAvatarAsync(id) {
            try {
                const av = await fetch(`https://decapi.me/twitch/avatar/${id}`).then(r => r.text());
                if (!av.includes("No user")) {
                    const cacheKey = `twitch-${id}`;
                    if (roomDataCache[cacheKey]) {
                        roomDataCache[cacheKey].avatar = av;
                        debouncedSaveCache();
                        window.renderAll();
                    }
                }
            } catch(e) {}
        }


        // --- DISPATCHER ---
        async function fetchStatus(room, jitter = 0) {
            if (jitter > 0) await new Promise(r => setTimeout(r, jitter));
            const cacheKey = `${room.platform}-${room.id}`;
            const prevData = roomDataCache[cacheKey];
            const now = Date.now();
            const needAvatarUpdate = !prevData?.avatar || !prevData?.lastAvatarUpdate || (now - prevData.lastAvatarUpdate > APP_CONFIG.CACHE.AVATAR_UPDATE_INTERVAL);

            let result = null;
            try {
                if (room.platform === 'douyu') result = await sniffDouyu(room.id, needAvatarUpdate, prevData);
                else if (room.platform === 'bilibili') result = await sniffBilibili(room.id, needAvatarUpdate, prevData);
                else if (room.platform === 'twitch') result = await sniffTwitch(room.id, needAvatarUpdate, prevData);
            } catch (error) {
                console.error(`[fetchStatus] ${room.platform}-${room.id} è·å–å¤±è´¥:`, error.message);
                result = null;
            }

            if (result) {
                const finalIsLive = result.isLive && !result.isReplay;
                let heatValue = result.heatValue || 0;
                if (heatValue <= 0 && prevData && prevData.heatValue > 0) heatValue = prevData.heatValue;
                let viewers = "ç¦»çº¿";
                if (finalIsLive) {
                    // ã€ä¿®å¤ã€‘ä¼˜å…ˆæ˜¾ç¤ºçƒ­åº¦å€¼ï¼ŒTwitchæ·»åŠ "äºº"åç¼€
                    if (heatValue > 0) {
                        viewers = "åœ¨çº¿ " + formatHeat(heatValue);
                        if (room.platform === 'twitch') viewers += "äºº";
                    } else {
                        // æ— çƒ­åº¦æ•°æ®æ—¶æ˜¾ç¤ºåœ¨çº¿çŠ¶æ€
                        viewers = "åœ¨çº¿";
                    }
                }
                if (!finalIsLive && !result.isReplay && prevData) {
                     if (!result.title) result.title = prevData.title;
                     if (!result.owner) result.owner = prevData.owner;
                     if (!result.cover) result.cover = prevData.cover;
                     if (!result.avatar) result.avatar = prevData.avatar;
                }
                
                // ã€ä¼˜åŒ–ã€‘æ–—é±¼å¤´åƒå¤‡ç”¨è·å–
                if (room.platform === 'douyu' && !result.avatar && !result.isError) {
                     fetchQuick(`https://open.douyucdn.cn/api/RoomApi/room/${room.id}`)
                        .then(o => { 
                            if (o?.data?.avatar && roomDataCache[cacheKey]) { 
                                roomDataCache[cacheKey].avatar = o.data.avatar;
                                window.renderAll(); 
                            }
                        });
                }
                
                checkAndNotify(room, finalIsLive, result.owner || room.id);

                const updateData = {
                    ...result,
                    isLive: finalIsLive,
                    viewers,
                    avatar: result.avatar || prevData?.avatar || "",
                    cover: result.cover,
                    platform: room.platform,
                    id: room.id,
                    loading: false,
                    heatValue,
                    isError: false,
                    _stale: false
                };
                if (result.avatar && result.avatar !== prevData?.avatar) updateData.lastAvatarUpdate = now;
                else { updateData.avatar = prevData?.avatar || ""; updateData.lastAvatarUpdate = prevData?.lastAvatarUpdate || 0; }

                // ã€å¢é‡æ›´æ–°ã€‘æ¯”è¾ƒæ–°æ—§æ•°æ®ï¼Œæ£€æµ‹æ˜¯å¦æœ‰å˜åŒ–
                const diffResult = DataDiffer.compare(prevData, updateData);
                updateData._hasChanges = diffResult.changed;
                updateData._changes = diffResult.changes;

                // ã€è°ƒè¯•æ—¥å¿—ã€‘è®°å½•å˜åŒ–
                if (APP_CONFIG.INCREMENTAL.LOG_CHANGES && diffResult.changed) {
                    const summary = DataDiffer.summarize(prevData, updateData, diffResult.changes);
                    console.log(`[å¢é‡æ›´æ–°] ${room.platform}-${room.id}: ${summary}`);
                }

                roomDataCache[cacheKey] = updateData;
            } else {
                if (prevData) roomDataCache[cacheKey] = { ...prevData, isError: false, loading: false, _stale: true };
                else roomDataCache[cacheKey] = { loading: false, isError: true };
            }
            // ã€ä¼˜åŒ–ã€‘ä½¿ç”¨é˜²æŠ–ä¿å­˜ï¼Œå‡å°‘localStorageå†™å…¥é¢‘ç‡
            debouncedSaveCache();
        }
        
        // ã€æ–°å¢ã€‘é˜²æŠ–ä¿å­˜ç¼“å­˜
        let saveCacheTimer = null;
        function debouncedSaveCache() {
            if (saveCacheTimer) clearTimeout(saveCacheTimer);
            saveCacheTimer = setTimeout(() => {
                SafeStorage.setJSON('pro_room_cache', roomDataCache);
            }, APP_CONFIG.CACHE.DEBOUNCE_DELAY);
        }
        
        // ã€æ–°å¢ã€‘ç«‹å³ä¿å­˜ç¼“å­˜ï¼ˆç”¨äºå…³é”®æ—¶åˆ»ï¼‰
        function saveCache() {
            if (saveCacheTimer) clearTimeout(saveCacheTimer);
            SafeStorage.setJSON('pro_room_cache', roomDataCache);
        }

        // ====================================================================
        // ã€ä¼˜åŒ–ã€‘æ™ºèƒ½å¹¶å‘æ± 
        // ====================================================================
        async function promisePool(items, concurrentLimit, taskFn, notifyBatchSize = 3, isInitial = false) {
            const pool = new Set();
            let finishedCount = 0;

            for (const item of items) {
                if (pool.size >= concurrentLimit) await Promise.race(pool);
                const jitter = isInitial ? Math.floor(Math.random() * APP_CONFIG.AUTO_REFRESH.JITTER_MAX_INITIAL) : 0;
                const task = taskFn(item, jitter)
                    .catch(error => {
                        console.error(`[promisePool] ä»»åŠ¡æ‰§è¡Œå¤±è´¥:`, error);
                    })
                    .finally(() => {
                        pool.delete(task);
                        finishedCount++;

                        // æ›´æ–°è¿›åº¦
                        refreshStats.completed = finishedCount;
                        updateRefreshStats();

                        // æ‰¹é‡æ¸²æŸ“
                        if (finishedCount % notifyBatchSize === 0 || finishedCount === items.length) {
                            window.renderAll();
                        }
                    });
                pool.add(task);
            }
            await Promise.allSettled(pool);
        }
        
        // ã€æ–°å¢ã€‘åˆ·æ–°è¿›åº¦æ˜¾ç¤º
        function updateRefreshStats() {
            const el = document.getElementById('refresh-stats');
            if (!el) return;
            
            if (isRefreshing) {
                const elapsed = ((Date.now() - refreshStats.startTime) / 1000).toFixed(1);
                el.textContent = `${refreshStats.completed}/${refreshStats.total} (${elapsed}s)`;
                el.classList.remove('hidden');
                el.classList.add('active');
            } else {
                el.classList.remove('active');
                const timerId = setTimeout(() => el.classList.add('hidden'), APP_CONFIG.UI.STATS_HIDE_DELAY);
                ResourceManager.addTimer(timerId);
            }
        }

        // ====================================================================
        // ã€ä¼˜åŒ–ã€‘æ™ºèƒ½åˆ·æ–°å‡½æ•°
        // ====================================================================
        async function refreshAll(sl=false, isAutoRefresh=false) { 
            // ã€ä¼˜åŒ–ã€‘é˜²æŠ–ï¼šé˜²æ­¢é‡å¤åˆ·æ–°ï¼ˆè‡ªåŠ¨åˆ·æ–°è·³è¿‡æ­¤æ£€æŸ¥ï¼‰
            const now = Date.now();
            if (!sl && !isAutoRefresh && isRefreshing) {
                window.showToast("æ­£åœ¨åˆ·æ–°ä¸­...", "info");
                return;
            }
            if (!sl && !isAutoRefresh && now - lastRefreshTime < APP_CONFIG.NETWORK.REFRESH_COOLDOWN) {
                window.showToast(`è¯·${Math.ceil((APP_CONFIG.NETWORK.REFRESH_COOLDOWN - (now - lastRefreshTime))/1000)}ç§’åå†è¯•`, "info");
                return;
            }

            // ã€æ–°å¢ã€‘æ‰‹åŠ¨åˆ·æ–°æ—¶é‡ç½®è‡ªåŠ¨åˆ·æ–°å€’è®¡æ—¶
            if (!isAutoRefresh && autoRefreshEnabled) {
                autoRefreshCountdown = APP_CONFIG.AUTO_REFRESH.INTERVAL;
                updateAutoRefreshBtn();
            }

            lastRefreshTime = now;
            isRefreshing = true;
            imgTimestamp = Math.floor(Date.now() / APP_CONFIG.CACHE.IMAGE_TIMESTAMP_INTERVAL);
            
            const b = document.getElementById('global-refresh-btn'); 
            if(b) b.classList.add('animate-spin-reverse');
            
            // ã€ä¼˜åŒ–ã€‘æœ€çˆ±ä¼˜å…ˆæ’åº
            const sortedRooms = [...rooms].sort((a, b) => {
                if (a.isFav !== b.isFav) return b.isFav - a.isFav;
                return 0;
            });
            
            // ã€æ€§èƒ½ä¼˜åŒ–ã€‘åŠ¨æ€å¹¶å‘æ•°ï¼šæ ¹æ®ä¸»æ’­æ•°é‡å’Œè®¾å¤‡æ€§èƒ½è‡ªåŠ¨è°ƒæ•´
            let concurrency = APP_CONFIG.CONCURRENCY.DEFAULT;
            if (sortedRooms.length > APP_CONFIG.CONCURRENCY.THRESHOLD_HIGH) {
                concurrency = APP_CONFIG.CONCURRENCY.HIGH;
            } else if (sortedRooms.length > APP_CONFIG.CONCURRENCY.THRESHOLD_MEDIUM) {
                concurrency = APP_CONFIG.CONCURRENCY.MEDIUM;
            }
            
            // åˆå§‹åŒ–ç»Ÿè®¡
            refreshStats = { 
                total: sortedRooms.length, 
                completed: 0, 
                startTime: Date.now() 
            };
            updateRefreshStats();
            
            // ã€æ€§èƒ½ä¼˜åŒ–ã€‘æ‰¹é‡æ¸²æŸ“å¤§å°ï¼šæ ¹æ®æ€»æ•°åŠ¨æ€è°ƒæ•´
            const batchSize = sortedRooms.length > APP_CONFIG.BATCH.THRESHOLD
                ? APP_CONFIG.BATCH.SIZE_LARGE
                : APP_CONFIG.BATCH.SIZE_SMALL;

            try {
                await promisePool(sortedRooms, concurrency, fetchStatus, batchSize, sl === true);

                // ã€å¢é‡æ›´æ–°ã€‘ç»Ÿè®¡æ•°æ®å˜åŒ–
                const changedCount = Object.values(roomDataCache).filter(d => d._hasChanges === true).length;
                const unchangedCount = Object.values(roomDataCache).filter(d => d._hasChanges === false).length;

                // æ˜¾ç¤ºå®Œæˆä¿¡æ¯
                const elapsed = ((Date.now() - refreshStats.startTime) / 1000).toFixed(1);
                if (APP_CONFIG.INCREMENTAL.ENABLED && APP_CONFIG.DEBUG.LOG_PERFORMANCE) {
                    console.log(`[LiveRadar] åˆ·æ–°å®Œæˆ: ${sortedRooms.length}ä¸ªä¸»æ’­, è€—æ—¶${elapsed}ç§’, å¹¶å‘${concurrency}, å˜åŒ–${changedCount}ä¸ª, æœªå˜åŒ–${unchangedCount}ä¸ª`);
                } else {
                    console.log(`[LiveRadar] åˆ·æ–°å®Œæˆ: ${sortedRooms.length}ä¸ªä¸»æ’­, è€—æ—¶${elapsed}ç§’, å¹¶å‘${concurrency}`);
                }

                // ã€æ–°å¢ã€‘æ£€æµ‹çŠ¶æ€å˜åŒ–å¹¶æ˜¾ç¤ºé€šçŸ¥
                detectStatusChanges();
            } catch (error) {
                console.error('[LiveRadar] åˆ·æ–°å‡ºé”™:', error);
                window.showToast('åˆ·æ–°å‡ºé”™ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥', 'error');
            } finally {
                // ã€å…³é”®ä¿®å¤ã€‘æ— è®ºæˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Œéƒ½è¦æ‰§è¡Œæ¸…ç†å·¥ä½œ
                isRefreshing = false;
                updateRefreshStats();

                if(b) b.classList.remove('animate-spin-reverse');

                // ã€å…³é”®ä¿®å¤ã€‘ç¡®ä¿åˆå§‹loaderå§‹ç»ˆè¢«ç§»é™¤ï¼ˆæœ€å°æ˜¾ç¤º1.5ç§’ï¼‰
                if(sl) {
                    const l = document.getElementById('initial-loader');
                    if (l) {
                        // è®¡ç®—å·²ç»æ˜¾ç¤ºçš„æ—¶é—´
                        const elapsedTime = Date.now() - loaderStartTime;
                        const remainingTime = Math.max(0, MIN_LOADER_DISPLAY_TIME - elapsedTime);

                        // ç¡®ä¿è‡³å°‘æ˜¾ç¤º1.5ç§’åå†æ·¡å‡º
                        const timerId = setTimeout(() => {
                            l.style.opacity='0';
                            const fadeTimerId = setTimeout(() => l.remove(), APP_CONFIG.UI.LOADER_FADE_DURATION);
                            ResourceManager.addTimer(fadeTimerId);
                        }, remainingTime);
                        ResourceManager.addTimer(timerId);
                    }
                }
            }
        }

        // ====================================================================
        // ã€æ–°å¢ã€‘çŠ¶æ€å˜åŒ–æ£€æµ‹å’Œæ»šåŠ¨é€šçŸ¥
        // ====================================================================
        function detectStatusChanges() {
            const changes = [];

            // éå†æ‰€æœ‰æˆ¿é—´ï¼Œæ£€æµ‹çŠ¶æ€å˜åŒ–
            rooms.forEach(room => {
                const key = `${room.platform}-${room.id}`;
                const currentData = roomDataCache[key];

                if (!currentData || currentData.loading || currentData.isError) return;

                const wasLive = previousLiveStatus[key] === true;
                const isLive = currentData.isLive === true;

                // æ£€æµ‹ä¸Šæ’­
                if (!wasLive && isLive) {
                    changes.push({
                        type: 'online',
                        name: currentData.owner || room.id,
                        platform: room.platform
                    });
                }

                // æ£€æµ‹ä¸‹æ’­
                if (wasLive && !isLive) {
                    changes.push({
                        type: 'offline',
                        name: currentData.owner || room.id,
                        platform: room.platform
                    });
                }

                // æ›´æ–°çŠ¶æ€å¿«ç…§
                previousLiveStatus[key] = isLive;
            });

            // å¦‚æœæœ‰å˜åŒ–ï¼Œæ·»åŠ åˆ°é˜Ÿåˆ—å¹¶å¼€å§‹æ»šåŠ¨
            if (changes.length > 0) {
                statusChangeQueue = changes;
                currentTickerIndex = 0;
                startStatusTicker();
            }
        }

        function startStatusTicker() {
            // æ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨
            if (tickerTimer) {
                clearInterval(tickerTimer);
            }

            const ticker = document.getElementById('live-status-ticker');
            if (!ticker || statusChangeQueue.length === 0) return;

            // æ˜¾ç¤ºtickerå®¹å™¨
            ticker.style.display = 'flex';

            // æ˜¾ç¤ºç¬¬ä¸€æ¡æ¶ˆæ¯
            showTickerMessage(currentTickerIndex);

            // å¦‚æœåªæœ‰ä¸€æ¡æ¶ˆæ¯ï¼Œæ˜¾ç¤º2ç§’åéšè—
            if (statusChangeQueue.length === 1) {
                setTimeout(() => {
                    ticker.style.display = 'none';
                }, 2000);
                return;
            }

            // æ¯2ç§’åˆ‡æ¢åˆ°ä¸‹ä¸€æ¡ï¼ˆä¸å¾ªç¯ï¼‰
            tickerTimer = setInterval(() => {
                currentTickerIndex++;

                // å¦‚æœåˆ°è¾¾æœ€åä¸€æ¡ï¼Œæ˜¾ç¤ºå®Œåéšè—å¹¶åœæ­¢
                if (currentTickerIndex >= statusChangeQueue.length) {
                    clearInterval(tickerTimer);
                    tickerTimer = null;
                    setTimeout(() => {
                        ticker.style.display = 'none';
                    }, 2000);
                    return;
                }

                showTickerMessage(currentTickerIndex);
            }, 2000);
        }

        function showTickerMessage(index) {
            const ticker = document.getElementById('live-status-ticker');
            if (!ticker) return;

            const message = statusChangeQueue[index];
            if (!message) return;

            // ç§»é™¤æ—§æ¶ˆæ¯ï¼ˆæ·»åŠ é€€å‡ºåŠ¨ç”»ï¼‰
            const oldItems = ticker.querySelectorAll('.status-ticker-item');
            oldItems.forEach(item => {
                item.classList.remove('active');
                item.classList.add('exit');
                setTimeout(() => item.remove(), 300);
            });

            // åˆ›å»ºæ–°æ¶ˆæ¯
            const item = document.createElement('div');
            item.className = 'status-ticker-item';

            const icon = document.createElement('div');
            icon.className = `ticker-icon ${message.type}`;
            icon.textContent = message.type === 'online' ? 'â—' : 'â—‹';

            const text = document.createElement('span');
            text.className = 'ticker-text';

            const name = document.createElement('span');
            name.className = 'ticker-name';
            name.textContent = message.name;

            const action = document.createElement('span');
            action.textContent = message.type === 'online' ? ' å¼€æ’­äº†' : ' ä¸‹æ’­äº†';

            text.appendChild(name);
            text.appendChild(action);

            item.appendChild(icon);
            item.appendChild(text);
            ticker.appendChild(item);

            // è§¦å‘è¿›å…¥åŠ¨ç”»
            setTimeout(() => item.classList.add('active'), 10);
        }

        function renderAll() {
            const grids = {
                live: document.getElementById('grid-live'),
                offline: document.getElementById('grid-offline'),
                loop: document.getElementById('grid-loop')
            };
            const zones = document.querySelectorAll('.zone-container');

            if (rooms.length === 0) {
                document.getElementById('empty-state').classList.remove('hidden');
                zones.forEach(el => el.classList.remove('active'));
                Object.values(grids).forEach(grid => { if(grid) grid.innerHTML = ''; });
                return;
            }
            document.getElementById('empty-state').classList.add('hidden');

            const sortedRooms = [...rooms].sort((a, b) => {
                const dA = roomDataCache[`${a.platform}-${a.id}`] || {};
                const dB = roomDataCache[`${b.platform}-${b.id}`] || {};
                if (a.isFav !== b.isFav) return b.isFav - a.isFav;
                if (dA.isLive !== dB.isLive) return dB.isLive - dA.isLive;
                if (dA.isReplay !== dB.isReplay) return dB.isReplay - dA.isReplay;
                return (dB.heatValue || 0) - (dA.heatValue || 0);
            });

            const presentCardIds = new Set();
            let hasLive = false, hasOffline = false, hasLoop = false;

            // ã€å¢é‡æ›´æ–°ã€‘ç»Ÿè®¡å˜åŒ–
            let updatedCount = 0;
            let unchangedCount = 0;
            let newCardsCount = 0;

            sortedRooms.forEach(roomInfo => {
                const cardId = `card-${roomInfo.platform}-${roomInfo.id}`;
                presentCardIds.add(cardId);
                const data = roomDataCache[`${roomInfo.platform}-${roomInfo.id}`] || { loading: true };

                let card = document.getElementById(cardId);

                let targetGridKey = 'offline';
                let cardState = 'loading';
                if (!data.loading) {
                    if (data.isLive) { targetGridKey = 'live'; cardState = 'live'; hasLive = true; }
                    else if (data.isReplay) { targetGridKey = 'loop'; cardState = 'loop'; hasLoop = true; }
                    else { targetGridKey = 'offline'; cardState = 'offline'; hasOffline = true; }
                } else {
                    hasOffline = true;
                }

                // ã€å¢é‡æ›´æ–°ã€‘æ™ºèƒ½æ›´æ–°é€»è¾‘
                if (card) {
                    // å¡ç‰‡å·²å­˜åœ¨
                    if (APP_CONFIG.INCREMENTAL.ENABLED) {
                        // å¢é‡æ›´æ–°æ¨¡å¼ï¼šåªåœ¨æœ‰å˜åŒ–æ—¶æ›´æ–°
                        if (data._hasChanges !== false) {
                            // æœ‰å˜åŒ–æˆ–æœªæ ‡è®°ï¼ˆå…¼å®¹æ—§æ•°æ®ï¼‰
                            updateCard(card, roomInfo, data, cardState);
                            updatedCount++;
                        } else {
                            // æ— å˜åŒ–ï¼Œè·³è¿‡æ›´æ–°
                            unchangedCount++;
                        }
                    } else {
                        // å…¨é‡æ›´æ–°æ¨¡å¼
                        updateCard(card, roomInfo, data, cardState);
                        updatedCount++;
                    }
                } else {
                    // æ–°å¡ç‰‡ï¼Œå¿…é¡»åˆ›å»º
                    card = createCard(cardId, roomInfo, data, cardState);
                    newCardsCount++;
                }

                // ç§»åŠ¨å¡ç‰‡åˆ°æ­£ç¡®çš„ç½‘æ ¼å¹¶ç¡®ä¿æ’åº
                // appendChildä¼šè‡ªåŠ¨å¤„ç†å…ƒç´ çš„ç§»åŠ¨ï¼Œä»è€Œæ ¹æ®sortedRoomsæ•°ç»„å¼ºåˆ¶å®ç°æ­£ç¡®çš„DOMé¡ºåº
                const targetGrid = grids[targetGridKey];
                targetGrid.appendChild(card);
            });

            // ã€å¢é‡æ›´æ–°ã€‘è®°å½•ç»Ÿè®¡ä¿¡æ¯
            if (APP_CONFIG.INCREMENTAL.ENABLED && APP_CONFIG.DEBUG.LOG_RENDER) {
                console.log(`[æ¸²æŸ“ç»Ÿè®¡] æ€»è®¡: ${sortedRooms.length}, æ›´æ–°: ${updatedCount}, æ–°å»º: ${newCardsCount}, è·³è¿‡: ${unchangedCount}`);
            }

            const allCardElements = document.querySelectorAll('.room-card');
            allCardElements.forEach(card => {
                if (!presentCardIds.has(card.id)) {
                    card.remove();
                }
            });
            
            document.getElementById('zone-live').classList.toggle('active', hasLive);
            document.getElementById('zone-offline').classList.toggle('active', hasOffline);
            document.getElementById('zone-loop').classList.toggle('active', hasLoop);
        }

        function createCard(cardId, roomInfo, data, cardState) {
            const clone = document.getElementById('card-template').content.cloneNode(true);
            const card = clone.querySelector('.room-card');
            card.id = cardId;
            card.href = {
                douyu: `https://www.douyu.com/${roomInfo.id}`,
                bilibili: `https://live.bilibili.com/${roomInfo.id}`,
                twitch: `https://www.twitch.tv/${roomInfo.id}`,
            }[roomInfo.platform];

            const favBtn = card.querySelector('.fav-btn');
            favBtn.dataset.id = roomInfo.id;
            favBtn.dataset.platform = roomInfo.platform;

            const delBtn = card.querySelector('.delete-btn');
            delBtn.dataset.id = roomInfo.id;
            delBtn.dataset.platform = roomInfo.platform;

            // ã€æ€§èƒ½ä¼˜åŒ–ã€‘ç¼“å­˜DOMå¼•ç”¨åˆ°cardå¯¹è±¡ï¼Œé¿å…é‡å¤æŸ¥è¯¢
            card._domRefs = {
                thumb: card.querySelector('.card-thumbnail'),
                chip: card.querySelector('.status-chip'),
                chipText: card.querySelector('.status-text'),
                titleEl: card.querySelector('.room-title'),
                ownerEl: card.querySelector('.room-owner'),
                viewerPill: card.querySelector('.viewer-pill'),
                viewerIcon: card.querySelector('.viewer-icon'),
                viewerNum: card.querySelector('.viewer-num'),
                avatar: card.querySelector('.u-avatar'),
                favBtn: favBtn,
                loader: card.querySelector('.thumb-loader'),
                durationEl: card.querySelector('.live-duration')
            };

            updateCard(card, roomInfo, data, cardState);
            return card;
        }

        function updateCard(card, roomInfo, data, cardState) {
            // ã€æ€§èƒ½ä¼˜åŒ–ã€‘ä½¿ç”¨ç¼“å­˜çš„DOMå¼•ç”¨ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
            let refs;
            if (card._domRefs) {
                // ä½¿ç”¨ç¼“å­˜çš„å¼•ç”¨
                refs = card._domRefs;
            } else {
                // é™çº§æ–¹æ¡ˆï¼šå¦‚æœç¼“å­˜ä¸å­˜åœ¨ï¼Œç›´æ¥æŸ¥è¯¢ï¼ˆç”¨äºå…¼å®¹æ€§ï¼‰
                refs = {
                    thumb: card.querySelector('.card-thumbnail'),
                    chip: card.querySelector('.status-chip'),
                    chipText: card.querySelector('.status-text'),
                    titleEl: card.querySelector('.room-title'),
                    ownerEl: card.querySelector('.room-owner'),
                    viewerPill: card.querySelector('.viewer-pill'),
                    viewerIcon: card.querySelector('.viewer-icon'),
                    viewerNum: card.querySelector('.viewer-num'),
                    avatar: card.querySelector('.u-avatar'),
                    favBtn: card.querySelector('.fav-btn'),
                    loader: card.querySelector('.thumb-loader'),
                    durationEl: card.querySelector('.live-duration')
                };
            }

            const { thumb, chip, chipText, titleEl, ownerEl, viewerPill, viewerIcon, viewerNum, avatar: avt, favBtn, loader, durationEl } = refs;
            
            const cols = { douyu: '#ff5d23', bilibili: '#fb7299', twitch: '#9146ff' };
            card.style.setProperty('--brand-color', cols[roomInfo.platform]);
            viewerIcon.textContent = (roomInfo.platform === 'twitch') ? 'ğŸ‘¤' : 'ğŸ”¥';

            const isFav = roomInfo.isFav;
            if (isFav !== card.classList.contains('is-favorite')) {
                card.classList.toggle('is-favorite', isFav);
                favBtn.classList.toggle('active', isFav);
                favBtn.innerHTML = isFav 
                    ? '<svg viewBox="0 0 24 24"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z" fill="currentColor" stroke="none"/></svg>'
                    : '<svg viewBox="0 0 24 24"><path d="M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.01 4.38.38-3.32 2.88 1 4.28L12 15.4z" fill="none" stroke="currentColor" stroke-width="2"/></svg>';
            }
            
            card.classList.remove('is-live-card', 'is-offline-card', 'is-loop-card');
            
            let newThumbSrc = '';
            let newAvatarSrc = data.avatar || '';

            switch(cardState) {
                case 'live':
                    card.classList.add('is-live-card');
                    chip.className = 'status-chip chip-live';
                    if (chipText.textContent !== 'ç›´æ’­ä¸­') chipText.textContent = 'ç›´æ’­ä¸­';

                    // ã€ä¼˜åŒ–ã€‘Twitch å¹³å°æ ¹æ®æ•°æ®çŠ¶æ€æ˜¾ç¤ºä¸åŒå†…å®¹
                    let displayTitle = data.title;
                    if (roomInfo.platform === 'twitch' && (data.isError || data._stale)) {
                        displayTitle = 'è¿æ¥å¼‚å¸¸';
                    }
                    if (titleEl.textContent !== displayTitle) titleEl.textContent = displayTitle;

                    if (ownerEl.textContent !== `${data.owner} - ${roomInfo.id}`) ownerEl.textContent = `${data.owner} - ${roomInfo.id}`;
                    if (viewerNum.textContent !== data.viewers) viewerNum.textContent = data.viewers;
                    newThumbSrc = data.cover;

                    const duration = data.startTime ? formatDuration(data.startTime) : null;
                    if (duration) {
                        durationEl.textContent = `â± ${duration}`;
                        if(durationEl.classList.contains('hidden')) durationEl.classList.remove('hidden');
                    } else {
                        if(!durationEl.classList.contains('hidden')) durationEl.classList.add('hidden');
                    }
                    break;
                case 'loop':
                    card.classList.add('is-loop-card');
                    chip.className = 'status-chip chip-loop';
                    if (chipText.textContent !== 'è½®æ’­') chipText.textContent = 'è½®æ’­';

                    // ã€ä¼˜åŒ–ã€‘Twitch å¹³å°æ ¹æ®æ•°æ®çŠ¶æ€æ˜¾ç¤ºä¸åŒå†…å®¹
                    let displayTitleLoop = data.title;
                    if (roomInfo.platform === 'twitch' && (data.isError || data._stale)) {
                        displayTitleLoop = 'è¿æ¥å¼‚å¸¸';
                    }
                    if (titleEl.textContent !== displayTitleLoop) titleEl.textContent = displayTitleLoop;

                    if (ownerEl.textContent !== `${data.owner} - ${roomInfo.id}`) ownerEl.textContent = `${data.owner} - ${roomInfo.id}`;
                    if (viewerNum.textContent !== 'è½®æ’­ä¸­') viewerNum.textContent = 'è½®æ’­ä¸­';
                    newThumbSrc = data.cover;
                    if(!durationEl.classList.contains('hidden')) durationEl.classList.add('hidden');
                    break;
                case 'offline':
                    card.classList.add('is-offline-card');
                    chip.className = 'status-chip chip-off';
                    if (chipText.textContent !== 'ç¦»çº¿') chipText.textContent = 'ç¦»çº¿';

                    // ã€ä¼˜åŒ–ã€‘Twitch å¹³å°æ ¹æ®æ•°æ®çŠ¶æ€æ˜¾ç¤ºä¸åŒå†…å®¹
                    let displayTitleOffline = data.title || "æœªå¼€æ’­";
                    if (roomInfo.platform === 'twitch' && (data.isError || data._stale)) {
                        displayTitleOffline = 'è¿æ¥å¼‚å¸¸';
                    }
                    if (titleEl.textContent !== displayTitleOffline) titleEl.textContent = displayTitleOffline;

                    if (ownerEl.textContent !== `${data.owner || roomInfo.id} - ${roomInfo.id}`) ownerEl.textContent = `${data.owner || roomInfo.id} - ${roomInfo.id}`;
                    if (viewerNum.textContent !== 'ç¦»çº¿') viewerNum.textContent = 'ç¦»çº¿';
                    newThumbSrc = data.avatar || data.cover;
                    if(!durationEl.classList.contains('hidden')) durationEl.classList.add('hidden');
                    break;
                case 'loading':
                default:
                    chip.className = 'status-chip chip-off';
                    if (chipText.textContent !== 'åŠ è½½ä¸­') chipText.textContent = 'åŠ è½½ä¸­';
                    if (titleEl.textContent !== 'è¿æ¥ä¸­...') titleEl.textContent = 'è¿æ¥ä¸­...';
                    if (ownerEl.textContent !== '---') ownerEl.textContent = '---';
                    if (viewerNum.textContent !== '--') viewerNum.textContent = '--';
                    if(!durationEl.classList.contains('hidden')) durationEl.classList.add('hidden');
                    break;
            }

            if (newThumbSrc && thumb.src !== newThumbSrc) {
                thumb.classList.remove('loaded');
                loader.classList.remove('hidden');
                thumb.src = newThumbSrc;
                thumb.onload = () => {
                    thumb.classList.add('loaded');
                    loader.classList.add('hidden');
                };
                thumb.onerror = () => {
                    loader.classList.add('hidden');
                };
            } else if (!newThumbSrc && thumb.src) {
                thumb.src = '';
                thumb.classList.remove('loaded');
            }

            const avatarSkeleton = avt.nextElementSibling;
            if (newAvatarSrc && avt.src !== newAvatarSrc) {
                avt.src = newAvatarSrc;
                avt.onload = () => {
                    avt.classList.remove('hidden');
                    if (avatarSkeleton) avatarSkeleton.classList.add('hidden');
                };
                avt.onerror = () => {
                    avt.classList.add('hidden');
                    if (avatarSkeleton) avatarSkeleton.classList.remove('hidden');
                };
            } else if (!newAvatarSrc && avt.src) {
                 avt.src = '';
                 avt.classList.add('hidden');
                 if(avatarSkeleton) avatarSkeleton.classList.remove('hidden');
            }
        }

        // ============================================================
        // File Protocol Warning System
        // ============================================================

        /**
         * æ£€æµ‹æ˜¯å¦ä½¿ç”¨file://åè®®ï¼Œå¹¶æ˜¾ç¤ºè­¦å‘Šæ¨ªå¹…
         */
        function checkFileProtocolAndWarn() {
            // åªåœ¨file://åè®®ä¸‹æ‰æ˜¾ç¤ºè­¦å‘Š
            if (window.location.protocol !== 'file:') {
                return;
            }

            // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²æ°¸ä¹…å¿½ç•¥æç¤º
            let permanentlyDismissed = false;
            try {
                permanentlyDismissed = SafeStorage.getItem('hide_file_protocol_warning') === 'true';
            } catch (e) {
                console.warn('[File Warning] localStorageè¯»å–å¤±è´¥ï¼Œä½¿ç”¨å†…å­˜æ¨¡å¼:', e.message);
                permanentlyDismissed = window._fileWarningDismissed || false;
            }

            if (permanentlyDismissed) {
                console.log('[File Warning] ç”¨æˆ·å·²é€‰æ‹©ä¸å†æç¤º');
                return;
            }

            // æ˜¾ç¤ºè­¦å‘Šæ¨ªå¹…
            const warningBanner = document.getElementById('file-protocol-warning');
            if (warningBanner) {
                warningBanner.classList.remove('hidden');
                console.log('[File Warning] å·²æ˜¾ç¤ºfile://åè®®è­¦å‘Šæ¨ªå¹…');
            }
        }

        /**
         * ä¸´æ—¶å…³é—­è­¦å‘Šæ¨ªå¹…ï¼ˆæœ¬æ¬¡ä¼šè¯ï¼‰
         */
        window.dismissFileWarning = function() {
            const warningBanner = document.getElementById('file-protocol-warning');
            if (warningBanner) {
                warningBanner.classList.add('hidden');
                console.log('[File Warning] ç”¨æˆ·ä¸´æ—¶å…³é—­æç¤º');
            }
        };

        /**
         * æ°¸ä¹…å…³é—­è­¦å‘Šæ¨ªå¹…ï¼ˆè®°å½•åˆ°localStorageï¼‰
         */
        window.dismissFileWarningPermanently = function() {
            try {
                SafeStorage.setItem('hide_file_protocol_warning', 'true');
                console.log('[File Warning] ç”¨æˆ·é€‰æ‹©ä¸å†æç¤ºï¼Œå·²ä¿å­˜åˆ°localStorage');
            } catch (e) {
                console.warn('[File Warning] localStorageä¿å­˜å¤±è´¥ï¼Œä½¿ç”¨å†…å­˜æ¨¡å¼:', e.message);
                window._fileWarningDismissed = true;
            }

            const warningBanner = document.getElementById('file-protocol-warning');
            if (warningBanner) {
                warningBanner.classList.add('hidden');
            }

            window.showToast('âœ“ å·²ä¿å­˜è®¾ç½®ï¼Œä¸å†æ˜¾ç¤ºæ­¤æç¤º', 'info');
        };

        /**
         * æ˜¾ç¤ºè¯¦ç»†éƒ¨ç½²æ•™ç¨‹ï¼ˆç®€åŒ–ç‰ˆï¼Œæ˜¾ç¤ºtoastæç¤ºï¼‰
         */
        window.showDeploymentGuide = function() {
            const guide = `
ğŸ“š æœ¬åœ°HTTPæœåŠ¡å™¨éƒ¨ç½²æŒ‡å—

ã€Pythonæ–¹æ¡ˆã€‘ï¼ˆæ¨èï¼ŒWindows/Mac/Linuxé€šç”¨ï¼‰
1. æ‰“å¼€ç»ˆç«¯/å‘½ä»¤æç¤ºç¬¦
2. cd åˆ°HTMLæ–‡ä»¶æ‰€åœ¨ç›®å½•
3. è¿è¡Œï¼špython -m http.server 8000
4. æµè§ˆå™¨è®¿é—®ï¼šhttp://localhost:8000

ã€Node.jsæ–¹æ¡ˆã€‘ï¼ˆéœ€è¦å…ˆå®‰è£…Node.jsï¼‰
1. å…¨å±€å®‰è£…ï¼šnpm install -g http-server
2. cd åˆ°HTMLæ–‡ä»¶æ‰€åœ¨ç›®å½•
3. è¿è¡Œï¼šhttp-server -p 8000
4. æµè§ˆå™¨è®¿é—®ï¼šhttp://localhost:8000

ã€VS Codeæ–¹æ¡ˆã€‘ï¼ˆæœ€ç®€å•ï¼Œé€‚åˆå¼€å‘è€…ï¼‰
1. å®‰è£… "Live Server" æ‰©å±•
2. å³é”®HTMLæ–‡ä»¶ â†’ "Open with Live Server"
3. è‡ªåŠ¨åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€

è¯¦ç»†æ–‡æ¡£è¯·æŸ¥çœ‹é¡¹ç›® docs/guides/ ç›®å½•
            `.trim();

            // ä½¿ç”¨alertæ˜¾ç¤ºï¼ˆåç»­å¯ä»¥ä¼˜åŒ–æˆæ¨¡æ€æ¡†ï¼‰
            alert(guide);
            console.log('[File Warning] å·²æ˜¾ç¤ºéƒ¨ç½²æŒ‡å—');
        };

        function initBackToTopButton() {
            const btn = document.getElementById('back-to-top');
            if (!btn) return;

            // ã€æ€§èƒ½ä¼˜åŒ–ã€‘ä½¿ç”¨ requestAnimationFrame èŠ‚æµæ»šåŠ¨äº‹ä»¶
            let ticking = false;
            const handleScroll = () => {
                if (!ticking) {
                    window.requestAnimationFrame(() => {
                        btn.classList.toggle('hidden-btn', window.scrollY <= APP_CONFIG.UI.SCROLL_THRESHOLD);
                        ticking = false;
                    });
                    ticking = true;
                }
            };

            // ä½¿ç”¨èµ„æºç®¡ç†å™¨æ³¨å†Œäº‹ä»¶ç›‘å¬å™¨
            ResourceManager.addEventListener(window, 'scroll', handleScroll, { passive: true });

            // ç‚¹å‡»äº‹ä»¶ä¹Ÿé€šè¿‡èµ„æºç®¡ç†å™¨æ³¨å†Œ
            ResourceManager.addEventListener(btn, 'click', (e) => {
                e.preventDefault();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
        }

        function init() {
            // ã€File Protocolæ£€æµ‹ã€‘æ£€æµ‹æ˜¯å¦ä½¿ç”¨file://åè®®å¹¶æ˜¾ç¤ºè­¦å‘Š
            checkFileProtocolAndWarn();

            // ã€åœ°åŒºæ£€æµ‹ã€‘ä¼˜å…ˆæ£€æµ‹ç”¨æˆ·æ‰€åœ¨åœ°åŒºï¼ˆå¼‚æ­¥æ‰§è¡Œï¼Œä¸é˜»å¡åˆå§‹åŒ–ï¼‰
            detectUserRegion().then(isMainland => {
                if (isMainland) {
                    console.log('[åˆå§‹åŒ–] ä¸­å›½å¤§é™†ç”¨æˆ·ï¼ŒTwitchåŠŸèƒ½å·²ç¦ç”¨');
                }
            }).catch(err => {
                console.warn('[åˆå§‹åŒ–] åœ°åŒºæ£€æµ‹å¤±è´¥:', err.message);
            });

            window.updatePlaceholder();
            window.updateNotifyBtn();
            window.updateSnowBtn();

            // ã€ä¿®å¤ã€‘ç§˜å¯†éŸ³æ•ˆæµ‹è¯•æŒ‰é’® - å¢å¼ºç‰ˆ
            const secretButton = document.getElementById('secret-audio-button');
            if (secretButton) {
                secretButton.addEventListener('click', (e) => {
                    e.stopPropagation(); // é˜²æ­¢äº‹ä»¶å†’æ³¡

                    // å¦‚æœéŸ³é¢‘æœªè§£é”ï¼Œå…ˆè§£é”
                    if (!window.audioContextUnlocked) {
                        unlockAllAudio();
                        // ç­‰å¾…è§£é”åæ’­æ”¾
                        setTimeout(() => {
                            playNotificationSound(true); // trueè¡¨ç¤ºæ˜¯æµ‹è¯•æ’­æ”¾
                            window.showToast('ğŸ”Š æµ‹è¯•éŸ³æ•ˆæ’­æ”¾ä¸­...', 'info');
                        }, 100);
                    } else {
                        // å·²è§£é”ï¼Œç›´æ¥æ’­æ”¾
                        playNotificationSound(true); // trueè¡¨ç¤ºæ˜¯æµ‹è¯•æ’­æ”¾
                        window.showToast('ğŸ”Š æµ‹è¯•éŸ³æ•ˆæ’­æ”¾ä¸­...', 'info');
                    }

                    console.log(`[ç§˜å¯†æŒ‰é’®] ç‚¹å‡»æµ‹è¯•ï¼ŒéŸ³é¢‘çŠ¶æ€: ${window.audioContextUnlocked ? 'å·²è§£é”' : 'æœªè§£é”'}, éŸ³é‡: ${notifyAudio?.volume || 0}`);
                });
            } 
            
            // ã€ä¿®å¤ã€‘è‡ªåŠ¨æ¸…ç†Bç«™ç¼ºå°‘å¤´åƒçš„ç¼“å­˜ï¼Œå¼ºåˆ¶é‡æ–°è·å–
            let cacheFixed = false;
            Object.keys(roomDataCache).forEach(key => {
                if (key.startsWith('bilibili-')) {
                    const data = roomDataCache[key];
                    const roomId = key.replace('bilibili-', '');
                    // å¦‚æœæ²¡æœ‰å¤´åƒï¼Œæˆ–è€… owner è¿˜æ˜¯æˆ¿é—´å·ï¼Œæ¸…é™¤ç¼“å­˜è®©å®ƒé‡æ–°è·å–
                    if (!data.avatar || data.owner === roomId || data.owner === String(roomId)) {
                        console.log(`[ä¿®å¤] æ¸…ç†Bç«™ç¼“å­˜: ${key}, owner=${data.owner}, avatar=${!!data.avatar}`);
                        delete roomDataCache[key].avatar;
                        delete roomDataCache[key].lastAvatarUpdate;
                        // ä¸åˆ é™¤ ownerï¼Œè®©åˆ¤æ–­é€»è¾‘çŸ¥é“éœ€è¦æ›´æ–°
                        cacheFixed = true;
                    }
                }
            });
            if (cacheFixed) {
                SafeStorage.setJSON('pro_room_cache', roomDataCache);
                console.log('[ä¿®å¤] Bç«™ç¼“å­˜å·²æ¸…ç†ï¼Œå°†é‡æ–°è·å–å¤´åƒ');
            }
            
            const hasCache = Object.keys(roomDataCache).length > 0;

            // ã€æ–°å¢ã€‘åˆå§‹åŒ–çŠ¶æ€å¿«ç…§ï¼Œé¿å…é¦–æ¬¡åˆ·æ–°è¯¯æŠ¥
            rooms.forEach(room => {
                const key = `${room.platform}-${room.id}`;
                const cachedData = roomDataCache[key];
                if (cachedData && !cachedData.loading && !cachedData.isError) {
                    previousLiveStatus[key] = cachedData.isLive === true;
                }
            });

            if (hasCache) {
                window.renderAll();
                // ã€ä¿®å¤ã€‘ç¡®ä¿åŠ è½½å™¨è‡³å°‘æ˜¾ç¤º1.5ç§’åå†ç§»é™¤ï¼ˆå³ä½¿æœ‰ç¼“å­˜ï¼‰
                const l = document.getElementById('initial-loader');
                if (l) {
                    const elapsedTime = Date.now() - loaderStartTime;
                    const remainingTime = Math.max(0, MIN_LOADER_DISPLAY_TIME - elapsedTime);

                    const timerId = setTimeout(() => {
                        l.style.opacity = '0';
                        const fadeTimerId = setTimeout(() => l.remove(), APP_CONFIG.UI.LOADER_FADE_DURATION);
                        ResourceManager.addTimer(fadeTimerId);
                    }, remainingTime);
                    ResourceManager.addTimer(timerId);
                }
            }
            window.refreshAll(!hasCache); 
            
            // ã€æ–°å¢ã€‘åˆå§‹åŒ–è‡ªåŠ¨åˆ·æ–°
            initAutoRefresh();

            // ã€æ–°å¢ã€‘åˆå§‹åŒ–åœ°åŒºæ¨¡å¼æŒ‰é’®çŠ¶æ€
            updateRegionButtonState();

            // ã€æ–°å¢ã€‘åˆå§‹åŒ–å…¨å±€éŸ³é¢‘ç®¡ç†å™¨
            initAudio();

            // ã€æ–°å¢ã€‘ç½‘ç»œçŠ¶æ€ç›‘å¬
            initNetworkMonitor();

            // ã€æ–°å¢ã€‘è¿”å›é¡¶éƒ¨æŒ‰é’®
            initBackToTopButton();
        }

        // ã€æ–°å¢ã€‘ç½‘ç»œçŠ¶æ€ç›‘æ§
        function initNetworkMonitor() {
            let wasOffline = false;
            
            ResourceManager.addEventListener(window, 'online', () => {
                if (wasOffline) {
                    window.showToast('ç½‘ç»œå·²æ¢å¤ï¼Œæ­£åœ¨åˆ·æ–°...', 'info');
                    wasOffline = false;
                    const timerId = setTimeout(() => window.refreshAll(), APP_CONFIG.NETWORK.RETRY_DELAY);
                    ResourceManager.addTimer(timerId);
                }
            });
            
            ResourceManager.addEventListener(window, 'offline', () => {
                wasOffline = true;
                window.showToast('ç½‘ç»œè¿æ¥å·²æ–­å¼€', 'error');
            });

            // æ£€æŸ¥åˆå§‹çŠ¶æ€
            if (!navigator.onLine) {
                wasOffline = true;
                window.showToast('å½“å‰å¤„äºç¦»çº¿çŠ¶æ€', 'error');
            }

            // ã€æ€§èƒ½ä¼˜åŒ–ã€‘é¡µé¢å¸è½½å‰ä¿å­˜ç¼“å­˜å¹¶æ¸…ç†èµ„æº
            ResourceManager.addEventListener(window, 'beforeunload', () => {
                saveCache();
                ResourceManager.cleanup();
            });
        }

        // --- GLOBAL EXPORTS (Absolute Final Fix) ---
        window.refreshAll = refreshAll; 
        window.renderAll = renderAll;
        window.handleAddInput = handleAddInput; 
        window.addRoom = addRoom;
        window.removeRoom = removeRoom;
        window.updatePlaceholder = updatePlaceholder; 
        window.toggleDropdown = toggleDropdown; 
        window.selectPlatform = selectPlatform;
        window.closeDropdown = closeDropdown;
        window.showHistory = showHistory;
        window.hideHistory = hideHistory;
        window.handleInput = handleInput;
        window.applyHistory = applyHistory;
        window.deleteHistory = deleteHistory;
        window.toggleNotifications = toggleNotifications;
        window.toggleFavorite = toggleFavorite;
        window.renderHistory = renderHistory;
        window.saveSearchHistory = saveSearchHistory;
        window.formatHeat = formatHeat;
        window.showToast = showToast;
        window.updateNotifyBtn = updateNotifyBtn;
        window.toggleAutoRefresh = toggleAutoRefresh;
        window.toggleKeepAlive = toggleKeepAlive;
        window.toggleSnow = toggleSnow;
        window.updateSnowBtn = updateSnowBtn;
        window.exportRooms = exportRooms;
        window.importRooms = importRooms;
        window.doImport = doImport;
        window.closeImportDialog = closeImportDialog;
        window.init = init;

        // ã€iOSå…¼å®¹ã€‘ç­‰å¾…DOMå®Œå…¨åŠ è½½åå†åˆå§‹åŒ–
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', window.init);
        } else {
            // DOMå·²ç»åŠ è½½å®Œæˆï¼Œç›´æ¥åˆå§‹åŒ–
            window.init();
        }
    </script>
</body>
</html>
