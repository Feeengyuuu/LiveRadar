/* --- 核心特效：细金色呼吸 (仅在线最爱) --- */
@keyframes goldenBreath {
    0% { box-shadow: 0 0 5px rgba(255, 215, 0, 0.2); }
    50% { box-shadow: 0 0 15px rgba(255, 215, 0, 0.5); }
    100% { box-shadow: 0 0 5px rgba(255, 215, 0, 0.2); }
}

.room-card {
    background-color: var(--card-bg); border-radius: 16px; overflow: hidden;
    border: 1px solid #262626; display: flex; flex-direction: column; position: relative;
    box-shadow: 0 5px 8px -1px rgba(0,0,0,0.3); transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
    cursor: pointer;
}

.room-card:hover { transform: translateY(-8px) scale(1.02); z-index: 10; box-shadow: 0 25px 35px -5px rgba(0,0,0,0.6); border-color: #404040; }

/* --- 最爱卡片样式增强 --- */
.room-card.is-favorite {
    border-color: rgba(255, 215, 0, 0.6); /* 常驻金边 */
    border-width: 1px;
}
/* 最爱且在线：呼吸光环 */
.room-card.is-favorite.is-live-card {
    animation: goldenBreath 3s infinite ease-in-out;
    border-color: rgba(255, 215, 0, 0.9);
    border-width: 2px;
    z-index: 5;
}
/* 最爱且离线/轮播：静态金边（更明显） */
.room-card.is-favorite.is-offline-card,
.room-card.is-favorite.is-loop-card {
    border-color: rgba(255, 215, 0, 0.7);
    border-width: 2px;
}

.card-thumbnail-box { position: relative; width: 100%; padding-top: 56.25%; background-color: #0a0a0a; overflow: hidden; }
.thumb-loader { position: absolute; inset: 0; display: flex; align-items: center; justify-content: center; background-color: #111; z-index: 5; transition: opacity 0.3s ease; }
.thumb-loader.hidden { opacity: 0; pointer-events: none; }

/* --- 图片样式 --- */
.card-thumbnail {
    position: absolute; inset: 0; width: 100%; height: 100%;
    object-fit: cover; object-position: center;
    transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 10; opacity: 0;
}
.card-thumbnail.loaded { opacity: 1; }

/* 核心修改：只有离线才是黑白，轮播恢复彩色 */
.is-offline-card .card-thumbnail.loaded {
    filter: grayscale(100%) brightness(0.6);
}
/* 悬停状态：恢复彩色 */
.room-card:hover .card-thumbnail.loaded {
    filter: grayscale(0%) brightness(1.1);
    transform: scale(1.08);
}

.status-chip { position: absolute; top: 12px; left: 12px; padding: 5px 12px; border-radius: 6px; font-size: 12px; font-weight: 900; backdrop-filter: blur(8px); display: flex; align-items: center; gap: 6px; z-index: 20; }
.chip-live { background: rgba(16, 185, 129, 0.95); color: white; }
.chip-loop { background: rgba(99, 102, 241, 0.95); color: white; }
.chip-off { background: rgba(0, 0, 0, 0.7); color: #9ca3af; border: 1px solid rgba(255,255,255,0.1); }
.chip-weak { background: var(--weak); color: white; }

.card-info { padding: 18px; display: flex; gap: 14px; flex: 1; background: linear-gradient(to bottom, #161616, #121212); border-top: 1px solid rgba(255,255,255,0.05); position: relative; }
.room-card:hover .card-info { background: var(--brand-color); }

.u-avatar { width: 56px; height: 56px; border-radius: 50%; background-color: #262626; object-fit: cover; border: 2px solid #333; flex-shrink: 0; }
.is-live-card .u-avatar { border-color: var(--live); } .is-loop-card .u-avatar { border-color: var(--loop); } .is-offline-card .u-avatar { border-color: #333; filter: grayscale(1); }
.room-card:hover .u-avatar { border-color: white !important; }
/* 最爱主播的头像始终显示金色边框（在线/离线/轮播） */
.room-card.is-favorite.is-live-card .u-avatar { border-color: var(--gold); }
.room-card.is-favorite.is-offline-card .u-avatar { border-color: var(--gold); filter: grayscale(0); }
.room-card.is-favorite.is-loop-card .u-avatar { border-color: var(--gold); }

.meta-text { flex: 1; min-width: 0; display: flex; flex-direction: column; justify-content: space-between; gap: 4px; padding-right: 2px; }
.room-title { font-size: 16px; font-weight: 700; color: #f3f4f6; line-height: 1.4; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; margin-bottom: 2px; }
.room-owner { font-size: 13px; color: #9ca3af; font-weight: 500; margin-top: auto; } /* 名字顶到底部 */

/* --- 布局重构：底部工具栏 --- */
.card-bottom-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 10px;
    height: 32px; /* 固定高度防止跳动 */
}

.viewer-pill { background-color: #262626; color: #9ca3af; padding: 4px 10px; border-radius: 6px; font-size: 12px; font-weight: 700; display: flex; align-items: center; gap: 5px; border: 1px solid rgba(255,255,255,0.05); }
.viewer-pill.hot { color: #fb923c; background-color: rgba(251, 146, 60, 0.1); border-color: rgba(251, 146, 60, 0.2); }

/* 直播时长样式 */
.live-duration {
    font-size: 12px;
    font-weight: 600;
    color: #6b7280;
    padding: 4px 8px;
    background: rgba(255,255,255,0.05);
    border-radius: 6px;
    font-family: ui-monospace, monospace;
}
.is-live-card .live-duration {
    color: #10b981;
    background: rgba(16, 185, 129, 0.1);
}
.live-duration.hidden { display: none; }

/* 操作按钮容器 (现在是静态布局，靠右对齐) */
.card-actions {
    display: flex; gap: 8px; z-index: 30;
    opacity: 0; transition: opacity 0.2s ease;
}
.room-card:hover .card-actions { opacity: 1; }

.action-btn {
    width: 32px; height: 32px;
    display: flex; align-items: center; justify-content: center;
    border-radius: 50%;
    background: rgba(0,0,0,0.6);
    border: 1px solid rgba(255,255,255,0.1);
    color: #9ca3af;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}
.action-btn:hover { background: #fff; transform: scale(1.1); }
.action-btn svg { width: 18px; height: 18px; fill: none; stroke: currentColor; stroke-width: 2; }

.fav-btn:hover { color: var(--gold); border-color: var(--gold); }
.fav-btn.active { background: rgba(255, 215, 0, 0.15); color: var(--gold); border-color: var(--gold); }
.fav-btn.active svg { fill: currentColor; stroke: none; }
.fav-btn svg { stroke-linejoin: round; }
.delete-btn:hover { color: #ef4444; border-color: #ef4444; }
